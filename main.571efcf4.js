!function(t){function e(e){for(var n,r,s=e[0],o=e[1],a=0,h=[];a<s.length;a++)r=s[a],i[r]&&h.push(i[r][0]),i[r]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n]);for(u&&u(e);h.length;)h.shift()()}var n={},i={0:0};function r(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.e=function(t){var e=[],n=i[t];if(0!==n)if(n)e.push(n[2]);else{var s=new Promise(function(e,r){n=i[t]=[e,r]});e.push(n[2]=s);var o,a=document.getElementsByTagName("head")[0],u=document.createElement("script");u.charset="utf-8",u.timeout=120,r.nc&&u.setAttribute("nonce",r.nc),u.src=function(t){return r.p+""+({}[t]||t)+"."+{1:"7189f816"}[t]+".js"}(t),o=function(e){u.onerror=u.onload=null,clearTimeout(h);var n=i[t];if(0!==n){if(n){var r=e&&("load"===e.type?"missing":e.type),s=e&&e.target&&e.target.src,o=new Error("Loading chunk "+t+" failed.\n("+r+": "+s+")");o.type=r,o.request=s,n[1](o)}i[t]=void 0}};var h=setTimeout(function(){o({type:"timeout",target:u})},12e4);u.onerror=u.onload=o,a.appendChild(u)}return Promise.all(e)},r.m=t,r.c=n,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r.oe=function(t){throw console.error(t),t};var s=window.webpackJsonp=window.webpackJsonp||[],o=s.push.bind(s);s.push=e,s=s.slice();for(var a=0;a<s.length;a++)e(s[a]);var u=o;r(r.s=126)}([function(t,e,n){n(70)("asyncIterator")},function(t,e,n){"use strict";var i=n(2),r=n(13),s=n(9),o=n(6),a=n(12),u=n(50).KEY,h=n(7),l=n(43),c=n(27),m=n(16),f=n(4),d=n(71),v=n(70),y=n(92),p=n(73),g=n(10),k=n(5),b=n(24),_=n(30),w=n(22),C=n(23),x=n(93),S=n(33),T=n(8),A=n(36),E=S.f,P=T.f,R=x.f,N=i.Symbol,O=i.JSON,M=O&&O.stringify,L=f("_hidden"),D=f("toPrimitive"),I={}.propertyIsEnumerable,B=l("symbol-registry"),F=l("symbols"),H=l("op-symbols"),j=Object.prototype,V="function"==typeof N,X=i.QObject,G=!X||!X.prototype||!X.prototype.findChild,z=s&&h(function(){return 7!=C(P({},"a",{get:function(){return P(this,"a",{value:7}).a}})).a})?function(t,e,n){var i=E(j,e);i&&delete j[e],P(t,e,n),i&&t!==j&&P(j,e,i)}:P,Y=function(t){var e=F[t]=C(N.prototype);return e._k=t,e},U=V&&"symbol"==typeof N.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof N},W=function(t,e,n){return t===j&&W(H,e,n),g(t),e=_(e,!0),g(n),r(F,e)?(n.enumerable?(r(t,L)&&t[L][e]&&(t[L][e]=!1),n=C(n,{enumerable:w(0,!1)})):(r(t,L)||P(t,L,w(1,{})),t[L][e]=!0),z(t,e,n)):P(t,e,n)},q=function(t,e){g(t);for(var n,i=y(e=b(e)),r=0,s=i.length;s>r;)W(t,n=i[r++],e[n]);return t},Q=function(t){var e=I.call(this,t=_(t,!0));return!(this===j&&r(F,t)&&!r(H,t))&&(!(e||!r(this,t)||!r(F,t)||r(this,L)&&this[L][t])||e)},K=function(t,e){if(t=b(t),e=_(e,!0),t!==j||!r(F,e)||r(H,e)){var n=E(t,e);return!n||!r(F,e)||r(t,L)&&t[L][e]||(n.enumerable=!0),n}},J=function(t){for(var e,n=R(b(t)),i=[],s=0;n.length>s;)r(F,e=n[s++])||e==L||e==u||i.push(e);return i},Z=function(t){for(var e,n=t===j,i=R(n?H:b(t)),s=[],o=0;i.length>o;)!r(F,e=i[o++])||n&&!r(j,e)||s.push(F[e]);return s};V||(a((N=function(){if(this instanceof N)throw TypeError("Symbol is not a constructor!");var t=m(arguments.length>0?arguments[0]:void 0),e=function(n){this===j&&e.call(H,n),r(this,L)&&r(this[L],t)&&(this[L][t]=!1),z(this,t,w(1,n))};return s&&G&&z(j,t,{configurable:!0,set:e}),Y(t)}).prototype,"toString",function(){return this._k}),S.f=K,T.f=W,n(28).f=x.f=J,n(45).f=Q,n(72).f=Z,s&&!n(19)&&a(j,"propertyIsEnumerable",Q,!0),d.f=function(t){return Y(f(t))}),o(o.G+o.W+o.F*!V,{Symbol:N});for(var $="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),tt=0;$.length>tt;)f($[tt++]);for(var et=A(f.store),nt=0;et.length>nt;)v(et[nt++]);o(o.S+o.F*!V,"Symbol",{for:function(t){return r(B,t+="")?B[t]:B[t]=N(t)},keyFor:function(t){if(!U(t))throw TypeError(t+" is not a symbol!");for(var e in B)if(B[e]===t)return e},useSetter:function(){G=!0},useSimple:function(){G=!1}}),o(o.S+o.F*!V,"Object",{create:function(t,e){return void 0===e?C(t):q(C(t),e)},defineProperty:W,defineProperties:q,getOwnPropertyDescriptor:K,getOwnPropertyNames:J,getOwnPropertySymbols:Z}),O&&o(o.S+o.F*(!V||h(function(){var t=N();return"[null]"!=M([t])||"{}"!=M({a:t})||"{}"!=M(Object(t))})),"JSON",{stringify:function(t){for(var e,n,i=[t],r=1;arguments.length>r;)i.push(arguments[r++]);if(n=e=i[1],(k(e)||void 0!==t)&&!U(t))return p(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!U(e))return e}),i[1]=e,M.apply(O,i)}}),N.prototype[D]||n(11)(N.prototype,D,N.prototype.valueOf),c(N,"Symbol"),c(Math,"Math",!0),c(i.JSON,"JSON",!0)},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e,n){var i=n(6);i(i.S,"Object",{setPrototypeOf:n(68).set})},function(t,e,n){var i=n(43)("wks"),r=n(16),s=n(2).Symbol,o="function"==typeof s;(t.exports=function(t){return i[t]||(i[t]=o&&s[t]||(o?s:r)("Symbol."+t))}).store=i},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){var i=n(2),r=n(21),s=n(11),o=n(12),a=n(14),u=function(t,e,n){var h,l,c,m,f=t&u.F,d=t&u.G,v=t&u.S,y=t&u.P,p=t&u.B,g=d?i:v?i[e]||(i[e]={}):(i[e]||{}).prototype,k=d?r:r[e]||(r[e]={}),b=k.prototype||(k.prototype={});for(h in d&&(n=e),n)c=((l=!f&&g&&void 0!==g[h])?g:n)[h],m=p&&l?a(c,i):y&&"function"==typeof c?a(Function.call,c):c,g&&o(g,h,c,t&u.U),k[h]!=c&&s(k,h,m),y&&b[h]!=c&&(b[h]=c)};i.core=r,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){var i=n(10),r=n(62),s=n(30),o=Object.defineProperty;e.f=n(9)?Object.defineProperty:function(t,e,n){if(i(t),e=s(e,!0),i(n),r)try{return o(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){t.exports=!n(7)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,n){var i=n(5);t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){var i=n(8),r=n(22);t.exports=n(9)?function(t,e,n){return i.f(t,e,r(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var i=n(2),r=n(11),s=n(13),o=n(16)("src"),a=Function.toString,u=(""+a).split("toString");n(21).inspectSource=function(t){return a.call(t)},(t.exports=function(t,e,n,a){var h="function"==typeof n;h&&(s(n,"name")||r(n,"name",e)),t[e]!==n&&(h&&(s(n,o)||r(n,o,t[e]?""+t[e]:u.join(String(e)))),t===i?t[e]=n:a?t[e]?t[e]=n:r(t,e,n):(delete t[e],r(t,e,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[o]||a.call(this)})},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var i=n(17);t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var i=n(25),r=Math.min;t.exports=function(t){return t>0?r(i(t),9007199254740991):0}},function(t,e){var n=0,i=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+i).toString(36))}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){t.exports=!1},function(t,e,n){var i=n(31);t.exports=function(t){return Object(i(t))}},function(t,e){var n=t.exports={version:"2.5.7"};"number"==typeof __e&&(__e=n)},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var i=n(10),r=n(88),s=n(44),o=n(42)("IE_PROTO"),a=function(){},u=function(){var t,e=n(41)("iframe"),i=s.length;for(e.style.display="none",n(66).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;i--;)delete u.prototype[s[i]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(a.prototype=i(t),n=new a,a.prototype=null,n[o]=t):n=u(),void 0===e?n:r(n,e)}},function(t,e,n){var i=n(64),r=n(31);t.exports=function(t){return i(r(t))}},function(t,e){var n=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:n)(t)}},function(t,e){t.exports={}},function(t,e,n){var i=n(8).f,r=n(13),s=n(4)("toStringTag");t.exports=function(t,e,n){t&&!r(t=n?t:t.prototype,s)&&i(t,s,{configurable:!0,value:e})}},function(t,e,n){var i=n(63),r=n(44).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,r)}},function(t,e,n){for(var i=n(55),r=n(36),s=n(12),o=n(2),a=n(11),u=n(26),h=n(4),l=h("iterator"),c=h("toStringTag"),m=u.Array,f={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},d=r(f),v=0;v<d.length;v++){var y,p=d[v],g=f[p],k=o[p],b=k&&k.prototype;if(b&&(b[l]||a(b,l,m),b[c]||a(b,c,p),u[p]=m,g))for(y in i)b[y]||s(b,y,i[y],!0)}},function(t,e,n){var i=n(5);t.exports=function(t,e){if(!i(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!i(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var i=n(33),r=n(46),s=n(13),o=n(6),a=n(5),u=n(10);o(o.S,"Reflect",{get:function t(e,n){var o,h,l=arguments.length<3?e:arguments[2];return u(e)===l?e[n]:(o=i.f(e,n))?s(o,"value")?o.value:void 0!==o.get?o.get.call(l):void 0:a(h=r(e))?t(h,n,l):void 0}})},function(t,e,n){var i=n(45),r=n(22),s=n(24),o=n(30),a=n(13),u=n(62),h=Object.getOwnPropertyDescriptor;e.f=n(9)?h:function(t,e){if(t=s(t),e=o(e,!0),u)try{return h(t,e)}catch(t){}if(a(t,e))return r(!i.f.call(t,e),t[e])}},function(t,e,n){var i=n(12);t.exports=function(t,e,n){for(var r in e)i(t,r,e[r],n);return t}},function(t,e){t.exports=function(t,e,n,i){if(!(t instanceof e)||void 0!==i&&i in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var i=n(63),r=n(44);t.exports=Object.keys||function(t){return i(t,r)}},function(t,e,n){var i=n(25),r=Math.max,s=Math.min;t.exports=function(t,e){return(t=i(t))<0?r(t+e,0):s(t,e)}},function(t,e,n){var i=n(4)("iterator"),r=!1;try{var s=[7][i]();s.return=function(){r=!0},Array.from(s,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!r)return!1;var n=!1;try{var s=[7],o=s[i]();o.next=function(){return{done:n=!0}},s[i]=function(){return o},t(s)}catch(t){}return n}},function(t,e,n){var i=n(4)("unscopables"),r=Array.prototype;void 0==r[i]&&n(11)(r,i,{}),t.exports=function(t){r[i][t]=!0}},function(t,e,n){"use strict";var i=n(2),r=n(8),s=n(9),o=n(4)("species");t.exports=function(t){var e=i[t];s&&e&&!e[o]&&r.f(e,o,{configurable:!0,get:function(){return this}})}},function(t,e,n){var i=n(5),r=n(2).document,s=i(r)&&i(r.createElement);t.exports=function(t){return s?r.createElement(t):{}}},function(t,e,n){var i=n(43)("keys"),r=n(16);t.exports=function(t){return i[t]||(i[t]=r(t))}},function(t,e,n){var i=n(21),r=n(2),s=r["__core-js_shared__"]||(r["__core-js_shared__"]={});(t.exports=function(t,e){return s[t]||(s[t]=void 0!==e?e:{})})("versions",[]).push({version:i.version,mode:n(19)?"pure":"global",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var i=n(13),r=n(20),s=n(42)("IE_PROTO"),o=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=r(t),i(t,s)?t[s]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?o:null}},function(t,e,n){var i=n(26),r=n(4)("iterator"),s=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||s[r]===t)}},function(t,e,n){var i=n(49),r=n(4)("iterator"),s=n(26);t.exports=n(21).getIteratorMethod=function(t){if(void 0!=t)return t[r]||t["@@iterator"]||s[i(t)]}},function(t,e,n){var i=n(18),r=n(4)("toStringTag"),s="Arguments"==i(function(){return arguments}());t.exports=function(t){var e,n,o;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),r))?n:s?i(e):"Object"==(o=i(e))&&"function"==typeof e.callee?"Arguments":o}},function(t,e,n){var i=n(16)("meta"),r=n(5),s=n(13),o=n(8).f,a=0,u=Object.isExtensible||function(){return!0},h=!n(7)(function(){return u(Object.preventExtensions({}))}),l=function(t){o(t,i,{value:{i:"O"+ ++a,w:{}}})},c=t.exports={KEY:i,NEED:!1,fastKey:function(t,e){if(!r(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!s(t,i)){if(!u(t))return"F";if(!e)return"E";l(t)}return t[i].i},getWeak:function(t,e){if(!s(t,i)){if(!u(t))return!0;if(!e)return!1;l(t)}return t[i].w},onFreeze:function(t){return h&&c.NEED&&u(t)&&!s(t,i)&&l(t),t}}},function(t,e,n){var i=n(6);i(i.P,"Array",{fill:n(52)}),n(39)("fill")},function(t,e,n){"use strict";var i=n(20),r=n(37),s=n(15);t.exports=function(t){for(var e=i(this),n=s(e.length),o=arguments.length,a=r(o>1?arguments[1]:void 0,n),u=o>2?arguments[2]:void 0,h=void 0===u?n:r(u,n);h>a;)e[a++]=t;return e}},function(t,e,n){var i=n(14),r=n(64),s=n(20),o=n(15),a=n(97);t.exports=function(t,e){var n=1==t,u=2==t,h=3==t,l=4==t,c=6==t,m=5==t||c,f=e||a;return function(e,a,d){for(var v,y,p=s(e),g=r(p),k=i(a,d,3),b=o(g.length),_=0,w=n?f(e,b):u?f(e,0):void 0;b>_;_++)if((m||_ in g)&&(y=k(v=g[_],_,p),t))if(n)w[_]=y;else if(y)switch(t){case 3:return!0;case 5:return v;case 6:return _;case 2:w.push(v)}else if(l)return!1;return c?-1:h||l?l:w}}},function(t,e,n){"use strict";var i=n(11),r=n(12),s=n(7),o=n(31),a=n(4);t.exports=function(t,e,n){var u=a(t),h=n(o,u,""[t]),l=h[0],c=h[1];s(function(){var e={};return e[u]=function(){return 7},7!=""[t](e)})&&(r(String.prototype,t,l),i(RegExp.prototype,u,2==e?function(t,e){return c.call(t,this,e)}:function(t){return c.call(t,this)}))}},function(t,e,n){"use strict";var i=n(39),r=n(79),s=n(26),o=n(24);t.exports=n(56)(Array,"Array",function(t,e){this._t=o(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,r(1)):r(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values"),s.Arguments=s.Array,i("keys"),i("values"),i("entries")},function(t,e,n){"use strict";var i=n(19),r=n(6),s=n(12),o=n(11),a=n(26),u=n(103),h=n(27),l=n(46),c=n(4)("iterator"),m=!([].keys&&"next"in[].keys()),f=function(){return this};t.exports=function(t,e,n,d,v,y,p){u(n,e,d);var g,k,b,_=function(t){if(!m&&t in S)return S[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},w=e+" Iterator",C="values"==v,x=!1,S=t.prototype,T=S[c]||S["@@iterator"]||v&&S[v],A=T||_(v),E=v?C?_("entries"):A:void 0,P="Array"==e&&S.entries||T;if(P&&(b=l(P.call(new t)))!==Object.prototype&&b.next&&(h(b,w,!0),i||"function"==typeof b[c]||o(b,c,f)),C&&T&&"values"!==T.name&&(x=!0,A=function(){return T.call(this)}),i&&!p||!m&&!x&&S[c]||o(S,c,A),a[e]=A,a[w]=f,v)if(g={values:C?A:_("values"),keys:y?A:_("keys"),entries:E},p)for(k in g)k in S||s(S,k,g[k]);else r(r.P+r.F*(m||x),e,g);return g}},function(t,e,n){var i=n(5),r=n(68).set;t.exports=function(t,e,n){var s,o=e.constructor;return o!==n&&"function"==typeof o&&(s=o.prototype)!==n.prototype&&i(s)&&r&&r(t,s),t}},function(t,e,n){"use strict";var i=n(10);t.exports=function(){var t=i(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,n){var i=n(14),r=n(69),s=n(47),o=n(10),a=n(15),u=n(48),h={},l={};(e=t.exports=function(t,e,n,c,m){var f,d,v,y,p=m?function(){return t}:u(t),g=i(n,c,e?2:1),k=0;if("function"!=typeof p)throw TypeError(t+" is not iterable!");if(s(p)){for(f=a(t.length);f>k;k++)if((y=e?g(o(d=t[k])[0],d[1]):g(t[k]))===h||y===l)return y}else for(v=p.call(t);!(d=v.next()).done;)if((y=r(v,g,d.value,e))===h||y===l)return y}).BREAK=h,e.RETURN=l},function(t,e,n){"use strict";var i,r,s,o,a=n(19),u=n(2),h=n(14),l=n(49),c=n(6),m=n(5),f=n(17),d=n(35),v=n(59),y=n(78),p=n(84).set,g=n(120)(),k=n(85),b=n(121),_=n(122),w=n(123),C=u.TypeError,x=u.process,S=x&&x.versions,T=S&&S.v8||"",A=u.Promise,E="process"==l(x),P=function(){},R=r=k.f,N=!!function(){try{var t=A.resolve(1),e=(t.constructor={})[n(4)("species")]=function(t){t(P,P)};return(E||"function"==typeof PromiseRejectionEvent)&&t.then(P)instanceof e&&0!==T.indexOf("6.6")&&-1===_.indexOf("Chrome/66")}catch(t){}}(),O=function(t){var e;return!(!m(t)||"function"!=typeof(e=t.then))&&e},M=function(t,e){if(!t._n){t._n=!0;var n=t._c;g(function(){for(var i=t._v,r=1==t._s,s=0,o=function(e){var n,s,o,a=r?e.ok:e.fail,u=e.resolve,h=e.reject,l=e.domain;try{a?(r||(2==t._h&&I(t),t._h=1),!0===a?n=i:(l&&l.enter(),n=a(i),l&&(l.exit(),o=!0)),n===e.promise?h(C("Promise-chain cycle")):(s=O(n))?s.call(n,u,h):u(n)):h(i)}catch(t){l&&!o&&l.exit(),h(t)}};n.length>s;)o(n[s++]);t._c=[],t._n=!1,e&&!t._h&&L(t)})}},L=function(t){p.call(u,function(){var e,n,i,r=t._v,s=D(t);if(s&&(e=b(function(){E?x.emit("unhandledRejection",r,t):(n=u.onunhandledrejection)?n({promise:t,reason:r}):(i=u.console)&&i.error&&i.error("Unhandled promise rejection",r)}),t._h=E||D(t)?2:1),t._a=void 0,s&&e.e)throw e.v})},D=function(t){return 1!==t._h&&0===(t._a||t._c).length},I=function(t){p.call(u,function(){var e;E?x.emit("rejectionHandled",t):(e=u.onrejectionhandled)&&e({promise:t,reason:t._v})})},B=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),M(e,!0))},F=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw C("Promise can't be resolved itself");(e=O(t))?g(function(){var i={_w:n,_d:!1};try{e.call(t,h(F,i,1),h(B,i,1))}catch(t){B.call(i,t)}}):(n._v=t,n._s=1,M(n,!1))}catch(t){B.call({_w:n,_d:!1},t)}}};N||(A=function(t){d(this,A,"Promise","_h"),f(t),i.call(this);try{t(h(F,this,1),h(B,this,1))}catch(t){B.call(this,t)}},(i=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(34)(A.prototype,{then:function(t,e){var n=R(y(this,A));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=E?x.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&M(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),s=function(){var t=new i;this.promise=t,this.resolve=h(F,t,1),this.reject=h(B,t,1)},k.f=R=function(t){return t===A||t===o?new s(t):r(t)}),c(c.G+c.W+c.F*!N,{Promise:A}),n(27)(A,"Promise"),n(40)("Promise"),o=n(21).Promise,c(c.S+c.F*!N,"Promise",{reject:function(t){var e=R(this);return(0,e.reject)(t),e.promise}}),c(c.S+c.F*(a||!N),"Promise",{resolve:function(t){return w(a&&this===o?A:this,t)}}),c(c.S+c.F*!(N&&n(38)(function(t){A.all(t).catch(P)})),"Promise",{all:function(t){var e=this,n=R(e),i=n.resolve,r=n.reject,s=b(function(){var n=[],s=0,o=1;v(t,!1,function(t){var a=s++,u=!1;n.push(void 0),o++,e.resolve(t).then(function(t){u||(u=!0,n[a]=t,--o||i(n))},r)}),--o||i(n)});return s.e&&r(s.v),n.promise},race:function(t){var e=this,n=R(e),i=n.reject,r=b(function(){v(t,!1,function(t){e.resolve(t).then(n.resolve,i)})});return r.e&&i(r.v),n.promise}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=function(t){var e=t.min,n=t.max,i=t.float,r=void 0!==i&&i,s=t.includeMax,o=void 0!==s&&s;return r?function(t){var e=t.min,n=void 0===e?0:e,i=t.max,r=t.includeMax,s=void 0!==r&&r;if(0===n){if(s){var o=Math.random()*(i+1);return o>i?i:o}return Math.random()*i}if(s){var a=Math.random()*(i-n+1)+n;return a>i?i:a}return Math.random()*(i-n)+n}({min:e,max:n,includeMax:o}):function(t){var e=t.min,n=void 0===e?0:e,i=t.max,r=t.includeMax,s=void 0!==r&&r;return 0===n?s?Math.floor(Math.random()*(i+1)):Math.floor(Math.random()*i):s?Math.floor(Math.random()*(i-n+1))+n:Math.floor(Math.random()*(i-n))+n}({min:e,max:n,includeMax:o})};e.default=i},function(t,e,n){t.exports=!n(9)&&!n(7)(function(){return 7!=Object.defineProperty(n(41)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var i=n(13),r=n(24),s=n(65)(!1),o=n(42)("IE_PROTO");t.exports=function(t,e){var n,a=r(t),u=0,h=[];for(n in a)n!=o&&i(a,n)&&h.push(n);for(;e.length>u;)i(a,n=e[u++])&&(~s(h,n)||h.push(n));return h}},function(t,e,n){var i=n(18);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==i(t)?t.split(""):Object(t)}},function(t,e,n){var i=n(24),r=n(15),s=n(37);t.exports=function(t){return function(e,n,o){var a,u=i(e),h=r(u.length),l=s(o,h);if(t&&n!=n){for(;h>l;)if((a=u[l++])!=a)return!0}else for(;h>l;l++)if((t||l in u)&&u[l]===n)return t||l||0;return!t&&-1}}},function(t,e,n){var i=n(2).document;t.exports=i&&i.documentElement},function(t,e){t.exports=function(t,e,n){var i=void 0===n;switch(e.length){case 0:return i?t():t.call(n);case 1:return i?t(e[0]):t.call(n,e[0]);case 2:return i?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return i?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return i?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var i=n(5),r=n(10),s=function(t,e){if(r(t),!i(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,i){try{(i=n(14)(Function.call,n(33).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return s(t,n),e?t.__proto__=n:i(t,n),t}}({},!1):void 0),check:s}},function(t,e,n){var i=n(10);t.exports=function(t,e,n,r){try{return r?e(i(n)[0],n[1]):e(n)}catch(e){var s=t.return;throw void 0!==s&&i(s.call(t)),e}}},function(t,e,n){var i=n(2),r=n(21),s=n(19),o=n(71),a=n(8).f;t.exports=function(t){var e=r.Symbol||(r.Symbol=s?{}:i.Symbol||{});"_"==t.charAt(0)||t in e||a(e,t,{value:o.f(t)})}},function(t,e,n){e.f=n(4)},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var i=n(18);t.exports=Array.isArray||function(t){return"Array"==i(t)}},function(t,e,n){"use strict";var i=n(6),r=n(53)(5),s=!0;"find"in[]&&Array(1).find(function(){s=!1}),i(i.P+i.F*s,"Array",{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),n(39)("find")},function(t,e,n){var i=n(5),r=n(18),s=n(4)("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[s])?!!e:"RegExp"==r(t))}},function(t,e,n){for(var i,r=n(2),s=n(11),o=n(16),a=o("typed_array"),u=o("view"),h=!(!r.ArrayBuffer||!r.DataView),l=h,c=0,m="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");c<9;)(i=r[m[c++]])?(s(i.prototype,a,!0),s(i.prototype,u,!0)):l=!1;t.exports={ABV:h,CONSTR:l,TYPED:a,VIEW:u}},function(t,e,n){var i=n(25),r=n(15);t.exports=function(t){if(void 0===t)return 0;var e=i(t),n=r(e);if(e!==n)throw RangeError("Wrong length!");return n}},function(t,e,n){var i=n(10),r=n(17),s=n(4)("species");t.exports=function(t,e){var n,o=i(t).constructor;return void 0===o||void 0==(n=i(o)[s])?e:r(n)}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){n(54)("replace",2,function(t,e,n){return[function(i,r){"use strict";var s=t(this),o=void 0==i?void 0:i[e];return void 0!==o?o.call(i,s,r):n.call(String(s),i,r)},n]})},function(t,e,n){var i=n(5);t.exports=function(t,e){if(!i(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},function(t,e,n){"use strict";var i=Object.prototype.hasOwnProperty,r=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),s=function(t,e){for(var n=e&&e.plainObjects?Object.create(null):{},i=0;i<t.length;++i)void 0!==t[i]&&(n[i]=t[i]);return n};t.exports={arrayToObject:s,assign:function(t,e){return Object.keys(e).reduce(function(t,n){return t[n]=e[n],t},t)},compact:function(t){for(var e=[{obj:{o:t},prop:"o"}],n=[],i=0;i<e.length;++i)for(var r=e[i],s=r.obj[r.prop],o=Object.keys(s),a=0;a<o.length;++a){var u=o[a],h=s[u];"object"==typeof h&&null!==h&&-1===n.indexOf(h)&&(e.push({obj:s,prop:u}),n.push(h))}return function(t){for(var e;t.length;){var n=t.pop();if(e=n.obj[n.prop],Array.isArray(e)){for(var i=[],r=0;r<e.length;++r)void 0!==e[r]&&i.push(e[r]);n.obj[n.prop]=i}}return e}(e)},decode:function(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return t}},encode:function(t){if(0===t.length)return t;for(var e="string"==typeof t?t:String(t),n="",i=0;i<e.length;++i){var s=e.charCodeAt(i);45===s||46===s||95===s||126===s||s>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122?n+=e.charAt(i):s<128?n+=r[s]:s<2048?n+=r[192|s>>6]+r[128|63&s]:s<55296||s>=57344?n+=r[224|s>>12]+r[128|s>>6&63]+r[128|63&s]:(i+=1,s=65536+((1023&s)<<10|1023&e.charCodeAt(i)),n+=r[240|s>>18]+r[128|s>>12&63]+r[128|s>>6&63]+r[128|63&s])}return n},isBuffer:function(t){return null!==t&&void 0!==t&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},isRegExp:function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},merge:function t(e,n,r){if(!n)return e;if("object"!=typeof n){if(Array.isArray(e))e.push(n);else{if("object"!=typeof e)return[e,n];(r.plainObjects||r.allowPrototypes||!i.call(Object.prototype,n))&&(e[n]=!0)}return e}if("object"!=typeof e)return[e].concat(n);var o=e;return Array.isArray(e)&&!Array.isArray(n)&&(o=s(e,r)),Array.isArray(e)&&Array.isArray(n)?(n.forEach(function(n,s){i.call(e,s)?e[s]&&"object"==typeof e[s]?e[s]=t(e[s],n,r):e.push(n):e[s]=n}),e):Object.keys(n).reduce(function(e,s){var o=n[s];return i.call(e,s)?e[s]=t(e[s],o,r):e[s]=o,e},o)}}},function(t,e,n){"use strict";var i=String.prototype.replace,r=/%20/g;t.exports={default:"RFC3986",formatters:{RFC1738:function(t){return i.call(t,r,"+")},RFC3986:function(t){return t}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},function(t,e,n){var i,r,s,o=n(14),a=n(67),u=n(66),h=n(41),l=n(2),c=l.process,m=l.setImmediate,f=l.clearImmediate,d=l.MessageChannel,v=l.Dispatch,y=0,p={},g=function(){var t=+this;if(p.hasOwnProperty(t)){var e=p[t];delete p[t],e()}},k=function(t){g.call(t.data)};m&&f||(m=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return p[++y]=function(){a("function"==typeof t?t:Function(t),e)},i(y),y},f=function(t){delete p[t]},"process"==n(18)(c)?i=function(t){c.nextTick(o(g,t,1))}:v&&v.now?i=function(t){v.now(o(g,t,1))}:d?(s=(r=new d).port2,r.port1.onmessage=k,i=o(s.postMessage,s,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(i=function(t){l.postMessage(t+"","*")},l.addEventListener("message",k,!1)):i="onreadystatechange"in h("script")?function(t){u.appendChild(h("script")).onreadystatechange=function(){u.removeChild(this),g.call(t)}}:function(t){setTimeout(o(g,t,1),0)}),t.exports={set:m,clear:f}},function(t,e,n){"use strict";var i=n(17);t.exports.f=function(t){return new function(t){var e,n;this.promise=new t(function(t,i){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=i}),this.resolve=i(e),this.reject=i(n)}(t)}},function(t,e,n){"use strict";var i=n(118),r=n(119),s=n(83);t.exports={formats:s,parse:r,stringify:i}},function(t,e,n){var i=n(6),r=n(23),s=n(17),o=n(10),a=n(5),u=n(7),h=n(89),l=(n(2).Reflect||{}).construct,c=u(function(){function t(){}return!(l(function(){},[],t)instanceof t)}),m=!u(function(){l(function(){})});i(i.S+i.F*(c||m),"Reflect",{construct:function(t,e){s(t),o(e);var n=arguments.length<3?t:s(arguments[2]);if(m&&!c)return l(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var i=[null];return i.push.apply(i,e),new(h.apply(t,i))}var u=n.prototype,f=r(a(u)?u:Object.prototype),d=Function.apply.call(t,f,e);return a(d)?d:f}})},function(t,e,n){var i=n(8),r=n(10),s=n(36);t.exports=n(9)?Object.defineProperties:function(t,e){r(t);for(var n,o=s(e),a=o.length,u=0;a>u;)i.f(t,n=o[u++],e[n]);return t}},function(t,e,n){"use strict";var i=n(17),r=n(5),s=n(67),o=[].slice,a={};t.exports=Function.bind||function(t){var e=i(this),n=o.call(arguments,1),u=function(){var i=n.concat(o.call(arguments));return this instanceof u?function(t,e,n){if(!(e in a)){for(var i=[],r=0;r<e;r++)i[r]="a["+r+"]";a[e]=Function("F,a","return new F("+i.join(",")+")")}return a[e](t,n)}(e,i.length,i):s(e,i,t)};return r(e.prototype)&&(u.prototype=e.prototype),u}},function(t,e,n){"use strict";var i=n(14),r=n(6),s=n(20),o=n(69),a=n(47),u=n(15),h=n(91),l=n(48);r(r.S+r.F*!n(38)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,r,c,m=s(t),f="function"==typeof this?this:Array,d=arguments.length,v=d>1?arguments[1]:void 0,y=void 0!==v,p=0,g=l(m);if(y&&(v=i(v,d>2?arguments[2]:void 0,2)),void 0==g||f==Array&&a(g))for(n=new f(e=u(m.length));e>p;p++)h(n,p,y?v(m[p],p):m[p]);else for(c=g.call(m),n=new f;!(r=c.next()).done;p++)h(n,p,y?o(c,v,[r.value,p],!0):r.value);return n.length=p,n}})},function(t,e,n){"use strict";var i=n(8),r=n(22);t.exports=function(t,e,n){e in t?i.f(t,e,r(0,n)):t[e]=n}},function(t,e,n){var i=n(36),r=n(72),s=n(45);t.exports=function(t){var e=i(t),n=r.f;if(n)for(var o,a=n(t),u=s.f,h=0;a.length>h;)u.call(t,o=a[h++])&&e.push(o);return e}},function(t,e,n){var i=n(24),r=n(28).f,s={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return o&&"[object Window]"==s.call(t)?function(t){try{return r(t)}catch(t){return o.slice()}}(t):r(i(t))}},function(t,e,n){var i=n(6);i(i.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,e,n){"use strict";var i=n(6),r=n(17),s=n(20),o=n(7),a=[].sort,u=[1,2,3];i(i.P+i.F*(o(function(){u.sort(void 0)})||!o(function(){u.sort(null)})||!n(96)(a)),"Array",{sort:function(t){return void 0===t?a.call(s(this)):a.call(s(this),r(t))}})},function(t,e,n){"use strict";var i=n(7);t.exports=function(t,e){return!!t&&i(function(){e?t.call(null,function(){},1):t.call(null)})}},function(t,e,n){var i=n(98);t.exports=function(t,e){return new(i(t))(e)}},function(t,e,n){var i=n(5),r=n(73),s=n(4)("species");t.exports=function(t){var e;return r(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!r(e.prototype)||(e=void 0),i(e)&&null===(e=e[s])&&(e=void 0)),void 0===e?Array:e}},function(t,e,n){n(54)("split",2,function(t,e,i){"use strict";var r=n(75),s=i,o=[].push;if("c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length){var a=void 0===/()??/.exec("")[1];i=function(t,e){var n=String(this);if(void 0===t&&0===e)return[];if(!r(t))return s.call(n,t,e);var i,u,h,l,c,m=[],f=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),d=0,v=void 0===e?4294967295:e>>>0,y=new RegExp(t.source,f+"g");for(a||(i=new RegExp("^"+y.source+"$(?!\\s)",f));(u=y.exec(n))&&!((h=u.index+u[0].length)>d&&(m.push(n.slice(d,u.index)),!a&&u.length>1&&u[0].replace(i,function(){for(c=1;c<arguments.length-2;c++)void 0===arguments[c]&&(u[c]=void 0)}),u.length>1&&u.index<n.length&&o.apply(m,u.slice(1)),l=u[0].length,d=h,m.length>=v));)y.lastIndex===u.index&&y.lastIndex++;return d===n.length?!l&&y.test("")||m.push(""):m.push(n.slice(d)),m.length>v?m.slice(0,v):m}}else"0".split(void 0,0).length&&(i=function(t,e){return void 0===t&&0===e?[]:s.call(this,t,e)});return[function(n,r){var s=t(this),o=void 0==n?void 0:n[e];return void 0!==o?o.call(n,s,r):i.call(String(s),n,r)},i]})},function(t,e,n){n(101)("Float32",4,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){"use strict";if(n(9)){var i=n(19),r=n(2),s=n(7),o=n(6),a=n(76),u=n(102),h=n(14),l=n(35),c=n(22),m=n(11),f=n(34),d=n(25),v=n(15),y=n(77),p=n(37),g=n(30),k=n(13),b=n(49),_=n(5),w=n(20),C=n(47),x=n(23),S=n(46),T=n(28).f,A=n(48),E=n(16),P=n(4),R=n(53),N=n(65),O=n(78),M=n(55),L=n(26),D=n(38),I=n(40),B=n(52),F=n(104),H=n(8),j=n(33),V=H.f,X=j.f,G=r.RangeError,z=r.TypeError,Y=r.Uint8Array,U=Array.prototype,W=u.ArrayBuffer,q=u.DataView,Q=R(0),K=R(2),J=R(3),Z=R(4),$=R(5),tt=R(6),et=N(!0),nt=N(!1),it=M.values,rt=M.keys,st=M.entries,ot=U.lastIndexOf,at=U.reduce,ut=U.reduceRight,ht=U.join,lt=U.sort,ct=U.slice,mt=U.toString,ft=U.toLocaleString,dt=P("iterator"),vt=P("toStringTag"),yt=E("typed_constructor"),pt=E("def_constructor"),gt=a.CONSTR,kt=a.TYPED,bt=a.VIEW,_t=R(1,function(t,e){return Tt(O(t,t[pt]),e)}),wt=s(function(){return 1===new Y(new Uint16Array([1]).buffer)[0]}),Ct=!!Y&&!!Y.prototype.set&&s(function(){new Y(1).set({})}),xt=function(t,e){var n=d(t);if(n<0||n%e)throw G("Wrong offset!");return n},St=function(t){if(_(t)&&kt in t)return t;throw z(t+" is not a typed array!")},Tt=function(t,e){if(!(_(t)&&yt in t))throw z("It is not a typed array constructor!");return new t(e)},At=function(t,e){return Et(O(t,t[pt]),e)},Et=function(t,e){for(var n=0,i=e.length,r=Tt(t,i);i>n;)r[n]=e[n++];return r},Pt=function(t,e,n){V(t,e,{get:function(){return this._d[n]}})},Rt=function(t){var e,n,i,r,s,o,a=w(t),u=arguments.length,l=u>1?arguments[1]:void 0,c=void 0!==l,m=A(a);if(void 0!=m&&!C(m)){for(o=m.call(a),i=[],e=0;!(s=o.next()).done;e++)i.push(s.value);a=i}for(c&&u>2&&(l=h(l,arguments[2],2)),e=0,n=v(a.length),r=Tt(this,n);n>e;e++)r[e]=c?l(a[e],e):a[e];return r},Nt=function(){for(var t=0,e=arguments.length,n=Tt(this,e);e>t;)n[t]=arguments[t++];return n},Ot=!!Y&&s(function(){ft.call(new Y(1))}),Mt=function(){return ft.apply(Ot?ct.call(St(this)):St(this),arguments)},Lt={copyWithin:function(t,e){return F.call(St(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return Z(St(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return B.apply(St(this),arguments)},filter:function(t){return At(this,K(St(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return $(St(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return tt(St(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){Q(St(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return nt(St(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return et(St(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return ht.apply(St(this),arguments)},lastIndexOf:function(t){return ot.apply(St(this),arguments)},map:function(t){return _t(St(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return at.apply(St(this),arguments)},reduceRight:function(t){return ut.apply(St(this),arguments)},reverse:function(){for(var t,e=St(this).length,n=Math.floor(e/2),i=0;i<n;)t=this[i],this[i++]=this[--e],this[e]=t;return this},some:function(t){return J(St(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return lt.call(St(this),t)},subarray:function(t,e){var n=St(this),i=n.length,r=p(t,i);return new(O(n,n[pt]))(n.buffer,n.byteOffset+r*n.BYTES_PER_ELEMENT,v((void 0===e?i:p(e,i))-r))}},Dt=function(t,e){return At(this,ct.call(St(this),t,e))},It=function(t){St(this);var e=xt(arguments[1],1),n=this.length,i=w(t),r=v(i.length),s=0;if(r+e>n)throw G("Wrong length!");for(;s<r;)this[e+s]=i[s++]},Bt={entries:function(){return st.call(St(this))},keys:function(){return rt.call(St(this))},values:function(){return it.call(St(this))}},Ft=function(t,e){return _(t)&&t[kt]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},Ht=function(t,e){return Ft(t,e=g(e,!0))?c(2,t[e]):X(t,e)},jt=function(t,e,n){return!(Ft(t,e=g(e,!0))&&_(n)&&k(n,"value"))||k(n,"get")||k(n,"set")||n.configurable||k(n,"writable")&&!n.writable||k(n,"enumerable")&&!n.enumerable?V(t,e,n):(t[e]=n.value,t)};gt||(j.f=Ht,H.f=jt),o(o.S+o.F*!gt,"Object",{getOwnPropertyDescriptor:Ht,defineProperty:jt}),s(function(){mt.call({})})&&(mt=ft=function(){return ht.call(this)});var Vt=f({},Lt);f(Vt,Bt),m(Vt,dt,Bt.values),f(Vt,{slice:Dt,set:It,constructor:function(){},toString:mt,toLocaleString:Mt}),Pt(Vt,"buffer","b"),Pt(Vt,"byteOffset","o"),Pt(Vt,"byteLength","l"),Pt(Vt,"length","e"),V(Vt,vt,{get:function(){return this[kt]}}),t.exports=function(t,e,n,u){var h=t+((u=!!u)?"Clamped":"")+"Array",c="get"+t,f="set"+t,d=r[h],p=d||{},g=d&&S(d),k=!d||!a.ABV,w={},C=d&&d.prototype,A=function(t,n){V(t,n,{get:function(){return function(t,n){var i=t._d;return i.v[c](n*e+i.o,wt)}(this,n)},set:function(t){return function(t,n,i){var r=t._d;u&&(i=(i=Math.round(i))<0?0:i>255?255:255&i),r.v[f](n*e+r.o,i,wt)}(this,n,t)},enumerable:!0})};k?(d=n(function(t,n,i,r){l(t,d,h,"_d");var s,o,a,u,c=0,f=0;if(_(n)){if(!(n instanceof W||"ArrayBuffer"==(u=b(n))||"SharedArrayBuffer"==u))return kt in n?Et(d,n):Rt.call(d,n);s=n,f=xt(i,e);var p=n.byteLength;if(void 0===r){if(p%e)throw G("Wrong length!");if((o=p-f)<0)throw G("Wrong length!")}else if((o=v(r)*e)+f>p)throw G("Wrong length!");a=o/e}else a=y(n),s=new W(o=a*e);for(m(t,"_d",{b:s,o:f,l:o,e:a,v:new q(s)});c<a;)A(t,c++)}),C=d.prototype=x(Vt),m(C,"constructor",d)):s(function(){d(1)})&&s(function(){new d(-1)})&&D(function(t){new d,new d(null),new d(1.5),new d(t)},!0)||(d=n(function(t,n,i,r){var s;return l(t,d,h),_(n)?n instanceof W||"ArrayBuffer"==(s=b(n))||"SharedArrayBuffer"==s?void 0!==r?new p(n,xt(i,e),r):void 0!==i?new p(n,xt(i,e)):new p(n):kt in n?Et(d,n):Rt.call(d,n):new p(y(n))}),Q(g!==Function.prototype?T(p).concat(T(g)):T(p),function(t){t in d||m(d,t,p[t])}),d.prototype=C,i||(C.constructor=d));var E=C[dt],P=!!E&&("values"==E.name||void 0==E.name),R=Bt.values;m(d,yt,!0),m(C,kt,h),m(C,bt,!0),m(C,pt,d),(u?new d(1)[vt]==h:vt in C)||V(C,vt,{get:function(){return h}}),w[h]=d,o(o.G+o.W+o.F*(d!=p),w),o(o.S,h,{BYTES_PER_ELEMENT:e}),o(o.S+o.F*s(function(){p.of.call(d,1)}),h,{from:Rt,of:Nt}),"BYTES_PER_ELEMENT"in C||m(C,"BYTES_PER_ELEMENT",e),o(o.P,h,Lt),I(h),o(o.P+o.F*Ct,h,{set:It}),o(o.P+o.F*!P,h,Bt),i||C.toString==mt||(C.toString=mt),o(o.P+o.F*s(function(){new d(1).slice()}),h,{slice:Dt}),o(o.P+o.F*(s(function(){return[1,2].toLocaleString()!=new d([1,2]).toLocaleString()})||!s(function(){C.toLocaleString.call([1,2])})),h,{toLocaleString:Mt}),L[h]=P?E:R,i||P||m(C,dt,R)}}else t.exports=function(){}},function(t,e,n){"use strict";var i=n(2),r=n(9),s=n(19),o=n(76),a=n(11),u=n(34),h=n(7),l=n(35),c=n(25),m=n(15),f=n(77),d=n(28).f,v=n(8).f,y=n(52),p=n(27),g="prototype",k="Wrong index!",b=i.ArrayBuffer,_=i.DataView,w=i.Math,C=i.RangeError,x=i.Infinity,S=b,T=w.abs,A=w.pow,E=w.floor,P=w.log,R=w.LN2,N=r?"_b":"buffer",O=r?"_l":"byteLength",M=r?"_o":"byteOffset";function L(t,e,n){var i,r,s,o=new Array(n),a=8*n-e-1,u=(1<<a)-1,h=u>>1,l=23===e?A(2,-24)-A(2,-77):0,c=0,m=t<0||0===t&&1/t<0?1:0;for((t=T(t))!=t||t===x?(r=t!=t?1:0,i=u):(i=E(P(t)/R),t*(s=A(2,-i))<1&&(i--,s*=2),(t+=i+h>=1?l/s:l*A(2,1-h))*s>=2&&(i++,s/=2),i+h>=u?(r=0,i=u):i+h>=1?(r=(t*s-1)*A(2,e),i+=h):(r=t*A(2,h-1)*A(2,e),i=0));e>=8;o[c++]=255&r,r/=256,e-=8);for(i=i<<e|r,a+=e;a>0;o[c++]=255&i,i/=256,a-=8);return o[--c]|=128*m,o}function D(t,e,n){var i,r=8*n-e-1,s=(1<<r)-1,o=s>>1,a=r-7,u=n-1,h=t[u--],l=127&h;for(h>>=7;a>0;l=256*l+t[u],u--,a-=8);for(i=l&(1<<-a)-1,l>>=-a,a+=e;a>0;i=256*i+t[u],u--,a-=8);if(0===l)l=1-o;else{if(l===s)return i?NaN:h?-x:x;i+=A(2,e),l-=o}return(h?-1:1)*i*A(2,l-e)}function I(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function B(t){return[255&t]}function F(t){return[255&t,t>>8&255]}function H(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function j(t){return L(t,52,8)}function V(t){return L(t,23,4)}function X(t,e,n){v(t[g],e,{get:function(){return this[n]}})}function G(t,e,n,i){var r=f(+n);if(r+e>t[O])throw C(k);var s=t[N]._b,o=r+t[M],a=s.slice(o,o+e);return i?a:a.reverse()}function z(t,e,n,i,r,s){var o=f(+n);if(o+e>t[O])throw C(k);for(var a=t[N]._b,u=o+t[M],h=i(+r),l=0;l<e;l++)a[u+l]=h[s?l:e-l-1]}if(o.ABV){if(!h(function(){b(1)})||!h(function(){new b(-1)})||h(function(){return new b,new b(1.5),new b(NaN),"ArrayBuffer"!=b.name})){for(var Y,U=(b=function(t){return l(this,b),new S(f(t))})[g]=S[g],W=d(S),q=0;W.length>q;)(Y=W[q++])in b||a(b,Y,S[Y]);s||(U.constructor=b)}var Q=new _(new b(2)),K=_[g].setInt8;Q.setInt8(0,2147483648),Q.setInt8(1,2147483649),!Q.getInt8(0)&&Q.getInt8(1)||u(_[g],{setInt8:function(t,e){K.call(this,t,e<<24>>24)},setUint8:function(t,e){K.call(this,t,e<<24>>24)}},!0)}else b=function(t){l(this,b,"ArrayBuffer");var e=f(t);this._b=y.call(new Array(e),0),this[O]=e},_=function(t,e,n){l(this,_,"DataView"),l(t,b,"DataView");var i=t[O],r=c(e);if(r<0||r>i)throw C("Wrong offset!");if(r+(n=void 0===n?i-r:m(n))>i)throw C("Wrong length!");this[N]=t,this[M]=r,this[O]=n},r&&(X(b,"byteLength","_l"),X(_,"buffer","_b"),X(_,"byteLength","_l"),X(_,"byteOffset","_o")),u(_[g],{getInt8:function(t){return G(this,1,t)[0]<<24>>24},getUint8:function(t){return G(this,1,t)[0]},getInt16:function(t){var e=G(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=G(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return I(G(this,4,t,arguments[1]))},getUint32:function(t){return I(G(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return D(G(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return D(G(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){z(this,1,t,B,e)},setUint8:function(t,e){z(this,1,t,B,e)},setInt16:function(t,e){z(this,2,t,F,e,arguments[2])},setUint16:function(t,e){z(this,2,t,F,e,arguments[2])},setInt32:function(t,e){z(this,4,t,H,e,arguments[2])},setUint32:function(t,e){z(this,4,t,H,e,arguments[2])},setFloat32:function(t,e){z(this,4,t,V,e,arguments[2])},setFloat64:function(t,e){z(this,8,t,j,e,arguments[2])}});p(b,"ArrayBuffer"),p(_,"DataView"),a(_[g],o.VIEW,!0),e.ArrayBuffer=b,e.DataView=_},function(t,e,n){"use strict";var i=n(23),r=n(22),s=n(27),o={};n(11)(o,n(4)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=i(o,{next:r(1,n)}),s(t,e+" Iterator")}},function(t,e,n){"use strict";var i=n(20),r=n(37),s=n(15);t.exports=[].copyWithin||function(t,e){var n=i(this),o=s(n.length),a=r(t,o),u=r(e,o),h=arguments.length>2?arguments[2]:void 0,l=Math.min((void 0===h?o:r(h,o))-u,o-a),c=1;for(u<a&&a<u+l&&(c=-1,u+=l-1,a+=l-1);l-- >0;)u in n?n[a]=n[u]:delete n[a],a+=c,u+=c;return n}},function(t,e,n){var i=n(2),r=n(57),s=n(8).f,o=n(28).f,a=n(75),u=n(58),h=i.RegExp,l=h,c=h.prototype,m=/a/g,f=/a/g,d=new h(m)!==m;if(n(9)&&(!d||n(7)(function(){return f[n(4)("match")]=!1,h(m)!=m||h(f)==f||"/a/i"!=h(m,"i")}))){h=function(t,e){var n=this instanceof h,i=a(t),s=void 0===e;return!n&&i&&t.constructor===h&&s?t:r(d?new l(i&&!s?t.source:t,e):l((i=t instanceof h)?t.source:t,i&&s?u.call(t):e),n?this:c,h)};for(var v=function(t){t in h||s(h,t,{configurable:!0,get:function(){return l[t]},set:function(e){l[t]=e}})},y=o(l),p=0;y.length>p;)v(y[p++]);c.constructor=h,h.prototype=c,n(12)(i,"RegExp",h)}n(40)("RegExp")},function(t,e,n){"use strict";n(107);var i=n(10),r=n(58),s=n(9),o=/./.toString,a=function(t){n(12)(RegExp.prototype,"toString",t,!0)};n(7)(function(){return"/a/b"!=o.call({source:"a",flags:"b"})})?a(function(){var t=i(this);return"/".concat(t.source,"/","flags"in t?t.flags:!s&&t instanceof RegExp?r.call(t):void 0)}):"toString"!=o.name&&a(function(){return o.call(this)})},function(t,e,n){n(9)&&"g"!=/./g.flags&&n(8).f(RegExp.prototype,"flags",{configurable:!0,get:n(58)})},function(t,e,n){"use strict";var i=n(109)(!0);n(56)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=i(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){var i=n(25),r=n(31);t.exports=function(t){return function(e,n){var s,o,a=String(r(e)),u=i(n),h=a.length;return u<0||u>=h?t?"":void 0:(s=a.charCodeAt(u))<55296||s>56319||u+1===h||(o=a.charCodeAt(u+1))<56320||o>57343?t?a.charAt(u):s:t?a.slice(u,u+2):o-56320+(s-55296<<10)+65536}}},function(t,e,n){"use strict";var i=n(111),r=n(81);t.exports=n(112)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=i.getEntry(r(this,"Map"),t);return e&&e.v},set:function(t,e){return i.def(r(this,"Map"),0===t?0:t,e)}},i,!0)},function(t,e,n){"use strict";var i=n(8).f,r=n(23),s=n(34),o=n(14),a=n(35),u=n(59),h=n(56),l=n(79),c=n(40),m=n(9),f=n(50).fastKey,d=n(81),v=m?"_s":"size",y=function(t,e){var n,i=f(e);if("F"!==i)return t._i[i];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,h){var l=t(function(t,i){a(t,l,e,"_i"),t._t=e,t._i=r(null),t._f=void 0,t._l=void 0,t[v]=0,void 0!=i&&u(i,n,t[h],t)});return s(l.prototype,{clear:function(){for(var t=d(this,e),n=t._i,i=t._f;i;i=i.n)i.r=!0,i.p&&(i.p=i.p.n=void 0),delete n[i.i];t._f=t._l=void 0,t[v]=0},delete:function(t){var n=d(this,e),i=y(n,t);if(i){var r=i.n,s=i.p;delete n._i[i.i],i.r=!0,s&&(s.n=r),r&&(r.p=s),n._f==i&&(n._f=r),n._l==i&&(n._l=s),n[v]--}return!!i},forEach:function(t){d(this,e);for(var n,i=o(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(i(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!y(d(this,e),t)}}),m&&i(l.prototype,"size",{get:function(){return d(this,e)[v]}}),l},def:function(t,e,n){var i,r,s=y(t,e);return s?s.v=n:(t._l=s={i:r=f(e,!0),k:e,v:n,p:i=t._l,n:void 0,r:!1},t._f||(t._f=s),i&&(i.n=s),t[v]++,"F"!==r&&(t._i[r]=s)),t},getEntry:y,setStrong:function(t,e,n){h(t,e,function(t,n){this._t=d(t,e),this._k=n,this._l=void 0},function(){for(var t=this._k,e=this._l;e&&e.r;)e=e.p;return this._t&&(this._l=e=e?e.n:this._t._f)?l(0,"keys"==t?e.k:"values"==t?e.v:[e.k,e.v]):(this._t=void 0,l(1))},n?"entries":"values",!n,!0),c(e)}}},function(t,e,n){"use strict";var i=n(2),r=n(6),s=n(12),o=n(34),a=n(50),u=n(59),h=n(35),l=n(5),c=n(7),m=n(38),f=n(27),d=n(57);t.exports=function(t,e,n,v,y,p){var g=i[t],k=g,b=y?"set":"add",_=k&&k.prototype,w={},C=function(t){var e=_[t];s(_,t,"delete"==t?function(t){return!(p&&!l(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(p&&!l(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return p&&!l(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof k&&(p||_.forEach&&!c(function(){(new k).entries().next()}))){var x=new k,S=x[b](p?{}:-0,1)!=x,T=c(function(){x.has(1)}),A=m(function(t){new k(t)}),E=!p&&c(function(){for(var t=new k,e=5;e--;)t[b](e,e);return!t.has(-0)});A||((k=e(function(e,n){h(e,k,t);var i=d(new g,e,k);return void 0!=n&&u(n,y,i[b],i),i})).prototype=_,_.constructor=k),(T||E)&&(C("delete"),C("has"),y&&C("get")),(E||S)&&C(b),p&&_.clear&&delete _.clear}else k=v.getConstructor(e,t,y,b),o(k.prototype,n),a.NEED=!0;return f(k,t),w[t]=k,r(r.G+r.W+r.F*(k!=g),w),p||v.setStrong(k,t,y),k}},function(t,e,n){"use strict";var i=n(2),r=n(13),s=n(18),o=n(57),a=n(30),u=n(7),h=n(28).f,l=n(33).f,c=n(8).f,m=n(114).trim,f=i.Number,d=f,v=f.prototype,y="Number"==s(n(23)(v)),p="trim"in String.prototype,g=function(t){var e=a(t,!1);if("string"==typeof e&&e.length>2){var n,i,r,s=(e=p?e.trim():m(e,3)).charCodeAt(0);if(43===s||45===s){if(88===(n=e.charCodeAt(2))||120===n)return NaN}else if(48===s){switch(e.charCodeAt(1)){case 66:case 98:i=2,r=49;break;case 79:case 111:i=8,r=55;break;default:return+e}for(var o,u=e.slice(2),h=0,l=u.length;h<l;h++)if((o=u.charCodeAt(h))<48||o>r)return NaN;return parseInt(u,i)}}return+e};if(!f(" 0o1")||!f("0b1")||f("+0x1")){f=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof f&&(y?u(function(){v.valueOf.call(n)}):"Number"!=s(n))?o(new d(g(e)),n,f):g(e)};for(var k,b=n(9)?h(d):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),_=0;b.length>_;_++)r(d,k=b[_])&&!r(f,k)&&c(f,k,l(d,k));f.prototype=v,v.constructor=f,n(12)(i,"Number",f)}},function(t,e,n){var i=n(6),r=n(31),s=n(7),o=n(115),a="["+o+"]",u=RegExp("^"+a+a+"*"),h=RegExp(a+a+"*$"),l=function(t,e,n){var r={},a=s(function(){return!!o[t]()||"​"!="​"[t]()}),u=r[t]=a?e(c):o[t];n&&(r[n]=u),i(i.P+i.F*a,"String",r)},c=l.trim=function(t,e){return t=String(r(t)),1&e&&(t=t.replace(u,"")),2&e&&(t=t.replace(h,"")),t};t.exports=l},function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(t,e,n){var i=n(6);i(i.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,e,n){n(54)("search",1,function(t,e,n){return[function(n){"use strict";var i=t(this),r=void 0==n?void 0:n[e];return void 0!==r?r.call(n,i):new RegExp(n)[e](String(i))},n]})},function(t,e,n){"use strict";var i=n(82),r=n(83),s={brackets:function(t){return t+"[]"},indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},o=Date.prototype.toISOString,a={delimiter:"&",encode:!0,encoder:i.encode,encodeValuesOnly:!1,serializeDate:function(t){return o.call(t)},skipNulls:!1,strictNullHandling:!1},u=function t(e,n,r,s,o,u,h,l,c,m,f,d){var v=e;if("function"==typeof h)v=h(n,v);else if(v instanceof Date)v=m(v);else if(null===v){if(s)return u&&!d?u(n,a.encoder):n;v=""}if("string"==typeof v||"number"==typeof v||"boolean"==typeof v||i.isBuffer(v))return u?[f(d?n:u(n,a.encoder))+"="+f(u(v,a.encoder))]:[f(n)+"="+f(String(v))];var y,p=[];if(void 0===v)return p;if(Array.isArray(h))y=h;else{var g=Object.keys(v);y=l?g.sort(l):g}for(var k=0;k<y.length;++k){var b=y[k];o&&null===v[b]||(p=Array.isArray(v)?p.concat(t(v[b],r(n,b),r,s,o,u,h,l,c,m,f,d)):p.concat(t(v[b],n+(c?"."+b:"["+b+"]"),r,s,o,u,h,l,c,m,f,d)))}return p};t.exports=function(t,e){var n=t,o=e?i.assign({},e):{};if(null!==o.encoder&&void 0!==o.encoder&&"function"!=typeof o.encoder)throw new TypeError("Encoder has to be a function.");var h=void 0===o.delimiter?a.delimiter:o.delimiter,l="boolean"==typeof o.strictNullHandling?o.strictNullHandling:a.strictNullHandling,c="boolean"==typeof o.skipNulls?o.skipNulls:a.skipNulls,m="boolean"==typeof o.encode?o.encode:a.encode,f="function"==typeof o.encoder?o.encoder:a.encoder,d="function"==typeof o.sort?o.sort:null,v=void 0!==o.allowDots&&o.allowDots,y="function"==typeof o.serializeDate?o.serializeDate:a.serializeDate,p="boolean"==typeof o.encodeValuesOnly?o.encodeValuesOnly:a.encodeValuesOnly;if(void 0===o.format)o.format=r.default;else if(!Object.prototype.hasOwnProperty.call(r.formatters,o.format))throw new TypeError("Unknown format option provided.");var g,k,b=r.formatters[o.format];"function"==typeof o.filter?n=(k=o.filter)("",n):Array.isArray(o.filter)&&(g=k=o.filter);var _,w=[];if("object"!=typeof n||null===n)return"";_=o.arrayFormat in s?o.arrayFormat:"indices"in o?o.indices?"indices":"repeat":"indices";var C=s[_];g||(g=Object.keys(n)),d&&g.sort(d);for(var x=0;x<g.length;++x){var S=g[x];c&&null===n[S]||(w=w.concat(u(n[S],S,C,l,c,m?f:null,k,d,v,y,b,p)))}var T=w.join(h),A=!0===o.addQueryPrefix?"?":"";return T.length>0?A+T:""}},function(t,e,n){"use strict";var i=n(82),r=Object.prototype.hasOwnProperty,s={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:i.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},o=function(t,e,n){if(t){var i=n.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,s=/(\[[^[\]]*])/g,o=/(\[[^[\]]*])/.exec(i),a=o?i.slice(0,o.index):i,u=[];if(a){if(!n.plainObjects&&r.call(Object.prototype,a)&&!n.allowPrototypes)return;u.push(a)}for(var h=0;null!==(o=s.exec(i))&&h<n.depth;){if(h+=1,!n.plainObjects&&r.call(Object.prototype,o[1].slice(1,-1))&&!n.allowPrototypes)return;u.push(o[1])}return o&&u.push("["+i.slice(o.index)+"]"),function(t,e,n){for(var i=e,r=t.length-1;r>=0;--r){var s,o=t[r];if("[]"===o)s=(s=[]).concat(i);else{s=n.plainObjects?Object.create(null):{};var a="["===o.charAt(0)&&"]"===o.charAt(o.length-1)?o.slice(1,-1):o,u=parseInt(a,10);!isNaN(u)&&o!==a&&String(u)===a&&u>=0&&n.parseArrays&&u<=n.arrayLimit?(s=[])[u]=i:s[a]=i}i=s}return i}(u,e,n)}};t.exports=function(t,e){var n=e?i.assign({},e):{};if(null!==n.decoder&&void 0!==n.decoder&&"function"!=typeof n.decoder)throw new TypeError("Decoder has to be a function.");if(n.ignoreQueryPrefix=!0===n.ignoreQueryPrefix,n.delimiter="string"==typeof n.delimiter||i.isRegExp(n.delimiter)?n.delimiter:s.delimiter,n.depth="number"==typeof n.depth?n.depth:s.depth,n.arrayLimit="number"==typeof n.arrayLimit?n.arrayLimit:s.arrayLimit,n.parseArrays=!1!==n.parseArrays,n.decoder="function"==typeof n.decoder?n.decoder:s.decoder,n.allowDots="boolean"==typeof n.allowDots?n.allowDots:s.allowDots,n.plainObjects="boolean"==typeof n.plainObjects?n.plainObjects:s.plainObjects,n.allowPrototypes="boolean"==typeof n.allowPrototypes?n.allowPrototypes:s.allowPrototypes,n.parameterLimit="number"==typeof n.parameterLimit?n.parameterLimit:s.parameterLimit,n.strictNullHandling="boolean"==typeof n.strictNullHandling?n.strictNullHandling:s.strictNullHandling,""===t||null===t||void 0===t)return n.plainObjects?Object.create(null):{};for(var a="string"==typeof t?function(t,e){for(var n={},i=e.ignoreQueryPrefix?t.replace(/^\?/,""):t,o=e.parameterLimit===1/0?void 0:e.parameterLimit,a=i.split(e.delimiter,o),u=0;u<a.length;++u){var h,l,c=a[u],m=c.indexOf("]="),f=-1===m?c.indexOf("="):m+1;-1===f?(h=e.decoder(c,s.decoder),l=e.strictNullHandling?null:""):(h=e.decoder(c.slice(0,f),s.decoder),l=e.decoder(c.slice(f+1),s.decoder)),r.call(n,h)?n[h]=[].concat(n[h]).concat(l):n[h]=l}return n}(t,n):t,u=n.plainObjects?Object.create(null):{},h=Object.keys(a),l=0;l<h.length;++l){var c=h[l],m=o(c,a[c],n);u=i.merge(u,m,n)}return i.compact(u)}},function(t,e,n){var i=n(2),r=n(84).set,s=i.MutationObserver||i.WebKitMutationObserver,o=i.process,a=i.Promise,u="process"==n(18)(o);t.exports=function(){var t,e,n,h=function(){var i,r;for(u&&(i=o.domain)&&i.exit();t;){r=t.fn,t=t.next;try{r()}catch(i){throw t?n():e=void 0,i}}e=void 0,i&&i.enter()};if(u)n=function(){o.nextTick(h)};else if(!s||i.navigator&&i.navigator.standalone)if(a&&a.resolve){var l=a.resolve(void 0);n=function(){l.then(h)}}else n=function(){r.call(i,h)};else{var c=!0,m=document.createTextNode("");new s(h).observe(m,{characterData:!0}),n=function(){m.data=c=!c}}return function(i){var r={fn:i,next:void 0};e&&(e.next=r),t||(t=r,n()),e=r}}},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,n){var i=n(2).navigator;t.exports=i&&i.userAgent||""},function(t,e,n){var i=n(10),r=n(5),s=n(85);t.exports=function(t,e){if(i(t),r(e)&&e.constructor===t)return e;var n=s.f(t);return(0,n.resolve)(e),n.promise}},function(t,e){!function(e){"use strict";var n,i=Object.prototype,r=i.hasOwnProperty,s="function"==typeof Symbol?Symbol:{},o=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",u=s.toStringTag||"@@toStringTag",h="object"==typeof t,l=e.regeneratorRuntime;if(l)h&&(t.exports=l);else{(l=e.regeneratorRuntime=h?t.exports:{}).wrap=b;var c="suspendedStart",m="suspendedYield",f="executing",d="completed",v={},y={};y[o]=function(){return this};var p=Object.getPrototypeOf,g=p&&p(p(N([])));g&&g!==i&&r.call(g,o)&&(y=g);var k=x.prototype=w.prototype=Object.create(y);C.prototype=k.constructor=x,x.constructor=C,x[u]=C.displayName="GeneratorFunction",l.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===C||"GeneratorFunction"===(e.displayName||e.name))},l.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u in t||(t[u]="GeneratorFunction")),t.prototype=Object.create(k),t},l.awrap=function(t){return{__await:t}},S(T.prototype),T.prototype[a]=function(){return this},l.AsyncIterator=T,l.async=function(t,e,n,i){var r=new T(b(t,e,n,i));return l.isGeneratorFunction(e)?r:r.next().then(function(t){return t.done?t.value:r.next()})},S(k),k[u]="Generator",k[o]=function(){return this},k.toString=function(){return"[object Generator]"},l.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var i=e.pop();if(i in t)return n.value=i,n.done=!1,n}return n.done=!0,n}},l.values=N,R.prototype={constructor:R,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(P),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function i(i,r){return a.type="throw",a.arg=t,e.next=i,r&&(e.method="next",e.arg=n),!!r}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),h=r.call(o,"finallyLoc");if(u&&h){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=t,o.arg=e,s?(this.method="next",this.next=s.finallyLoc,v):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),P(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var r=i.arg;P(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,i){return this.delegate={iterator:N(t),resultName:e,nextLoc:i},"next"===this.method&&(this.arg=n),v}}}function b(t,e,n,i){var r=e&&e.prototype instanceof w?e:w,s=Object.create(r.prototype),o=new R(i||[]);return s._invoke=function(t,e,n){var i=c;return function(r,s){if(i===f)throw new Error("Generator is already running");if(i===d){if("throw"===r)throw s;return O()}for(n.method=r,n.arg=s;;){var o=n.delegate;if(o){var a=A(o,n);if(a){if(a===v)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===c)throw i=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=f;var u=_(t,e,n);if("normal"===u.type){if(i=n.done?d:m,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(i=d,n.method="throw",n.arg=u.arg)}}}(t,n,o),s}function _(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function w(){}function C(){}function x(){}function S(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function T(t){var e;this._invoke=function(n,i){function s(){return new Promise(function(e,s){!function e(n,i,s,o){var a=_(t[n],t,i);if("throw"!==a.type){var u=a.arg,h=u.value;return h&&"object"==typeof h&&r.call(h,"__await")?Promise.resolve(h.__await).then(function(t){e("next",t,s,o)},function(t){e("throw",t,s,o)}):Promise.resolve(h).then(function(t){u.value=t,s(u)},o)}o(a.arg)}(n,i,e,s)})}return e=e?e.then(s,s):s()}}function A(t,e){var i=t.iterator[e.method];if(i===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=n,A(t,e),"throw"===e.method))return v;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var r=_(i,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,v;var s=r.arg;return s?s.done?(e[t.resultName]=s.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,v):s:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,v)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function R(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function N(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,s=function e(){for(;++i<t.length;)if(r.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=n,e.done=!0,e};return s.next=s}}return{next:O}}function O(){return{value:n,done:!0}}}(function(){return this}()||Function("return this")())},function(t,e,n){"use strict";var i=n(6),r=n(53)(6),s="findIndex",o=!0;s in[]&&Array(1)[s](function(){o=!1}),i(i.P+i.F*o,"Array",{findIndex:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),n(39)(s)},function(t,e,n){"use strict";n.r(e);n(87),n(32),n(3),n(90),n(0),n(1),n(94),n(51),n(95),n(74),n(99),n(100),n(80),n(105),n(106),n(55),n(108),n(110),n(113),n(116),n(29);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e,n){return(r="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=a(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function s(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?o(t):e}function o(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function m(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function f(t,e,n){return e&&m(t.prototype,e),n&&m(t,n),t}var d=function(){function t(){c(this,t),t.assert(!1,"Static class.")}return f(t,null,[{key:"isNumber",value:function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];n.forEach(function(e){if("number"!=typeof e||!1!==isNaN(parseFloat(e))||!0!==isFinite(e)){if(t.logOnFail&&console.error("[ASSERT]","Not a number."),t.throwOnFail)throw new Error("Not a number.")}})}},{key:"assert",value:function(e,n){if(!0!==e&&(n=null==n?"Assertion failed.":n,t.logOnFail&&console.error("[ASSERT]",n),t.throwOnFail))throw new Error(n)}},{key:"assertWarn",value:function(e,n){!0!==e&&(n=null==n?"Assertion warning.":n,t.warn(n))}},{key:"assertInfo",value:function(e,n){!0!==e&&(n=null==n?"Assertion info.":n,t.info(n))}},{key:"log",value:function(){for(var t,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];(t=console).info.apply(t,["%c%s","color: #000000","LOG:"].concat(n))}},{key:"info",value:function(){for(var t,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];(t=console).info.apply(t,["%c%s","color: #003bd2","INFO:"].concat(n))}},{key:"warn",value:function(){for(var t,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];(t=console).info.apply(t,["%c%s","color: #f67400","WARN:"].concat(n))}},{key:"error",value:function(){for(var t,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];(t=console).info.apply(t,["%c%s","color: #d50000","ERROR:"].concat(n))}},{key:"time",value:function(e){t.timeProfiles[e]=performance.now()}},{key:"timeEnd",value:function(e){t.timeProfiles[e]=performance.now()-t.timeProfiles[e]}}]),t}();d.throwOnFail=!0,d.logOnFail=!1,d.timeProfiles={};var v=function(){function t(){c(this,t)}return f(t,null,[{key:"randomBetween",value:function(t,e){return Math.floor(Math.random()*(e-t+1)+t)}},{key:"clamp",value:function(t,e,n){return t<e?e:t>n?n:t}},{key:"distance",value:function(t,e,n,i){var r=t-n,s=e-i;return Math.sqrt(r*r+s*s)}},{key:"distanceSqr",value:function(t,e,n,i){var r=t-n,s=e-i;return r*r+s*s}},{key:"angleBetween",value:function(t,e,n,i){return Math.atan2(i-e,n-t)}},{key:"mapRange",value:function(t,e,n,i,r){return i+(r-i)*(t-e)/(n-e)}},{key:"lerp",value:function(t,e,n){return t+n*(e-t)}},{key:"equals",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.EPSILON;return t-n<e&&t+n>e}}]),t}();v.PI_Q=Math.PI/4,v.PI2=2*Math.PI,v.DEG2RAD=.017453292519943295,v.RAD2DEG=57.29577951308232,(function(){function t(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];c(this,t),this.mRepeat=0,this.mPerm=[];for(var e=0;e<512;e++)this.mPerm.push(t.__permutation[e%256])}return f(t,[{key:"__perlin",value:function(t,e,n){this.mRepeat>0&&(t%=this.mRepeat,e%=this.mRepeat,n%=this.mRepeat);var i=this.mPerm,r=255&~~t,s=255&~~e,o=255&~~n,a=t-~~t,u=e-~~e,h=n-~~n,l=a*a*a*(a*(6*a-15)+10),c=u*u*u*(u*(6*u-15)+10),m=h*h*h*(h*(6*h-15)+10),f=i[i[i[r]+s]+o],d=i[i[i[r]+this.inc(s)]+o],v=i[i[i[r]+s]+this.inc(o)],y=i[i[i[r]+this.inc(s)]+this.inc(o)],p=i[i[i[this.inc(r)]+s]+o],g=i[i[i[this.inc(r)]+this.inc(s)]+o],k=i[i[i[this.inc(r)]+s]+this.inc(o)],b=i[i[i[this.inc(r)]+this.inc(s)]+this.inc(o)],_=this.lerp(this.grad(f,a,u,h),this.grad(p,a-1,u,h),l),w=this.lerp(this.grad(d,a,u-1,h),this.grad(g,a-1,u-1,h),l),C=this.lerp(_,w,c);_=this.lerp(this.grad(v,a,u,h-1),this.grad(k,a-1,u,h-1),l),w=this.lerp(this.grad(y,a,u-1,h-1),this.grad(b,a-1,u-1,h-1),l);var x=this.lerp(_,w,c);return.5*(this.lerp(C,x,m)+1)}},{key:"perlin",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;if(1===i&&1===r)return this.__perlin(t,e,n);for(var s=0,o=1,a=1,u=0,h=0;h<i;h++)s+=this.__perlin(t*o,e*o,n*o)*a,u+=a,a*=r,o*=2;return s/u}},{key:"inc",value:function(t){return t++,this.mRepeat>0&&(t%=this.mRepeat),t}},{key:"grad",value:function(t,e,n,i){switch(15&t){case 0:return e+n;case 1:return-e+n;case 2:return e-n;case 3:return-e-n;case 4:return e+i;case 5:return-e+i;case 6:return e-i;case 7:return-e-i;case 8:return n+i;case 9:return-n+i;case 10:return n-i;case 11:return-n-i;case 12:return n+e;case 13:return-n+i;case 14:return n-e;case 15:return-n-i}}},{key:"lerp",value:function(t,e,n){return t+n*(e-t)}}]),t}()).__permutation=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180];var y=function(){function t(){c(this,t),this.mMap=new Map}return f(t,[{key:"has",value:function(t,e){return this.mMap.has(t)&&this.mMap.get(t).has(e)}},{key:"set",value:function(t,e,n){var i=this.mMap.get(t);null==i&&(i=new Map,this.mMap.set(t,i)),i.set(e,n)}},{key:"get",value:function(t,e){return null!=this.mMap.get(t)?this.mMap.get(t)&&this.mMap.get(t).get(e):null}}]),t}(),p=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;c(this,t),this.mReleased=[],this.mCapacity=n,this.mType=e}return f(t,[{key:"releaseAll",value:function(){this.mReleased.splice(0,this.mReleased.length)}},{key:"get",value:function(){return this.mReleased.length>0?this.mReleased.pop():new this.mType}},{key:"release",value:function(t){(-1===this.mCapacity||this.mReleased.length<this.mCapacity)&&this.mReleased.push(t)}},{key:"capacity",get:function(){return this.mCapacity},set:function(t){d.assert(0!==t,"Capacity cannot be equal to zero."),d.assert(t>-1,"Capacity cannot be smaller then -1."),this.mCapacity=t,this.mCapacity>this.mReleased.length&&this.mReleased.splice(0,this.mReleased.length-this.mCapacity)}}]),t}(),g=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;c(this,t),this.r=e,this.g=n,this.b=i},k=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;c(this,t),this.h=e,this.s=n,this.v=i},b=function(){function t(){c(this,t)}return f(t,null,[{key:"hex2rgb",value:function(t){return new g(t>>16&255,t>>8&255,255&t)}},{key:"rgb2hex",value:function(t){return t.r<<16|t.g<<8|t.b}},{key:"hsv2rgb",value:function(t){var e=t.h,n=t.s,i=t.v,r=0,s=0,o=0,a=Math.floor(6*e),u=6*e-a,h=i*(1-n),l=i*(1-u*n),c=i*(1-(1-u)*n);switch(a%6){case 0:r=i,s=c,o=h;break;case 1:r=l,s=i,o=h;break;case 2:r=h,s=i,o=c;break;case 3:r=h,s=l,o=i;break;case 4:r=c,s=h,o=i;break;case 5:r=i,s=h,o=l}return new g(r*=255,s*=255,o*=255)}},{key:"rgb2hsv",value:function(t){var e=t.r,n=t.g,i=t.b;e/=255,n/=255,i/=255;var r,s=Math.max(e,n,i),o=Math.min(e,n,i),a=0,u=s,h=s-o;if(r=0===s?0:h/s,s===o)a=0;else{switch(s){case e:a=(n-i)/h+(n<i?6:0);break;case n:a=(i-e)/h+2;break;case i:a=(e-n)/h+4}a/=6}return new k(a,r,u)}},{key:"lerpHSV",value:function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5,r=t.rgb2hsv(t.hex2rgb(e)),s=t.rgb2hsv(t.hex2rgb(n)),o=0,a=s.h-r.h;if(r.h>s.h){var u=s.h;s.h=r.h,r.h=u,a=-a,i=1-i}a>.5&&(r.h=r.h+1,o=(r.h+i*(s.h-r.h))%1),a<=.5&&(o=r.h+i*a);var h=r.s+i*(s.s-r.s),l=r.v+i*(s.v-r.v);return t.rgb2hex(t.hsv2rgb(new k(o,h,l)))}},{key:"hexColorToString",value:function(t){var e=t.toString(16);return"#000000".substring(0,7-e.length)+e}},{key:"intToRGBA",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=t>>8&255,i=255&t;return"rgba(".concat(t>>16&255,", ").concat(n,", ").concat(i,", ").concat(e,")")}}]),t}(),_=function(){function t(e){c(this,t),this.mRegExp=new RegExp("^".concat(e.replace(/\./g,"\\.").replace(/\*\*$/g,".+").replace(/(?:\*\*\/|\*\*|\*)/g,function(e){return t.mPatterns[e]}),"$"))}return f(t,[{key:"test",value:function(t){return this.mRegExp.test(t)}}]),t}();_.mPatterns={"*":"[^/]+","**":".+/?[^/]+","**/":".+/?"};var w=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;c(this,t),d.isNumber(e,n),this.x=e,this.y=n}return f(t,[{key:"set",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return d.isNumber(t,e),this.x=t,this.y=e,this}},{key:"add",value:function(t){return this.x+=t.x,this.y+=t.y,this}},{key:"subtract",value:function(t){return this.x-=t.x,this.y-=t.y,this}},{key:"distance",value:function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)}},{key:"distanceSqr",value:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n}},{key:"multiply",value:function(t){return this.x*=t.x,this.y*=t.y,this}},{key:"multiplyScalar",value:function(t){return d.isNumber(t),this.x*=t,this.y*=t,this}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"lengthSqr",value:function(){return this.x*this.x+this.y*this.y}},{key:"normalize",value:function(){var t=this.lengthSqr();return t>0?(t=Math.sqrt(t),this.x/=t,this.y/=t):(this.x=0,this.y=0),this}},{key:"clamp",value:function(t,e){return d.isNumber(t,e),this.x=v.clamp(this.x,t,e),this.y=v.clamp(this.y,t,e),this}},{key:"clampLength",value:function(t,e){d.isNumber(t,e);var n=v.clamp(this.length(),t,e);return this.normalize(),this.multiplyScalar(n),this}},{key:"lerp",value:function(t,e){return d.isNumber(e),this.x=v.lerp(this.x,t.x,e),this.y=v.lerp(this.y,t.y,e),this}},{key:"copyTo",value:function(t){return t.x=this.x,t.y=this.y,t}},{key:"copyFrom",value:function(t){return this.x=t.x,this.y=t.y,this}},{key:"clone",value:function(){return new t(this.x,this.y)}},{key:"equals",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.EPSILON;return null!==t&&Math.abs(t.x-this.x)<e&&Math.abs(t.y-this.y)<e}},{key:"isEmpty",value:function(){return 0===this.x&&0===this.y}},{key:"setRotationFrom",value:function(t,e){return d.isNumber(e),this.subtract(t).setRotation(e).add(t)}},{key:"setRotation",value:function(t){d.isNumber(t);var e=Math.cos(t),n=Math.sin(t);return this.set(this.x*e-this.y*n,this.x*n+this.y*e)}},{key:"angleBetween",value:function(t){return Math.atan2(t.y-this.y,t.x-this.x)}},{key:"angle",value:function(){return Math.atan2(this.y,this.x)}},{key:"perp",value:function(){return this.set(this.y,-this.x)}},{key:"toString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return"Vector: { x: ".concat(this.x.toFixed(t),", y: ").concat(this.y.toFixed(t)," }")}}],[{key:"fromAngle",value:function(e,n){return d.isNumber(e),(n=n||new t).set(Math.cos(e),Math.sin(e))}},{key:"randomRange",value:function(e,n,i){return(i=i||new t).x=Math.random()*(n.x-e.x)+e.x,i.y=Math.random()*(n.y-e.y)+e.y,i}}]),t}();w.__cache=new w,w.pool=new p(w);var C=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;c(this,t),this.data=new Float32Array(6),this.set(e,n,i,r,s,o)}return f(t,[{key:"set",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;d.isNumber(t,e,n,i,r,s);var o=this.data;return o[0]=t,o[1]=e,o[2]=n,o[3]=i,o[4]=r,o[5]=s,this}},{key:"translate",value:function(t,e){d.isNumber(t,e);var n=this.data,i=n[0],r=n[1],s=n[2],o=n[3],a=n[4],u=n[5];return this.data[4]=i*t+s*e+a,this.data[5]=r*t+o*e+u,this}},{key:"setTranslation",value:function(t,e){return d.isNumber(t,e),this.data[4]=t,this.data[5]=e,this}},{key:"setRotation",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;d.isNumber(t,e);var n=this.data;return n[0]=Math.cos(t)*e,n[2]=Math.sin(t)*e,n[1]=-n[2],n[3]=n[0],this}},{key:"rotate",value:function(t){d.isNumber(t);var e=this.data,n=Math.cos(t),i=Math.sin(t),r=e[0],s=e[2],o=e[4];return e[0]=r*n-e[1]*i,e[1]=r*i+e[1]*n,e[2]=s*n-e[3]*i,e[3]=s*i+e[3]*n,e[4]=o*n-e[5]*i,e[5]=o*i+e[5]*n,this}},{key:"scale",value:function(t,e){d.isNumber(t,e);var n=this.data,i=n[0],r=n[1],s=n[2],o=n[3];n[4],n[5];return this.data[0]=i*t,this.data[1]=r*t,this.data[2]=s*e,this.data[3]=o*e,this}},{key:"skew",value:function(t,e){var n=Math.sin(t),i=Math.cos(t),r=Math.sin(e),s=Math.cos(e),o=this.data;this.set(o[0]*s-o[1]*n,o[0]*r+o[1]*i,o[2]*s-o[3]*n,o[2]*r+o[3]*i,o[4]*s-o[5]*n,o[4]*r+o[5]*i)}},{key:"identity",value:function(){return this.set(1,0,0,1,0,0)}},{key:"prepend",value:function(t){var e=this.data,n=t.data,i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],u=e[5],h=n[0],l=n[1],c=n[2],m=n[3],f=n[4],d=n[5];if(1!==h||0!==l||0!==c||1!==m){var v=i*h+r*c;e[1]=i*l+r*m,e[0]=v;var y=s*h+o*c;e[3]=s*l+o*m,e[2]=y}var p=a*h+u*c+f;return e[5]=a*l+u*m+d,e[4]=p,this}},{key:"append",value:function(t){var e=this.data,n=t.data,i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],u=e[5],h=n[0],l=n[1],c=n[2],m=n[3],f=n[4],d=n[5];return e[0]=i*h+s*l,e[1]=r*h+o*l,e[2]=i*c+s*m,e[3]=r*c+o*m,e[4]=i*f+s*d+a,e[5]=r*f+o*d+u,this}},{key:"transformXY",value:function(t,e,n){d.isNumber(t,e),n=n||new w;var i=this.data;return n.x=i[0]*t+i[2]*e+i[4],n.y=i[1]*t+i[3]*e+i[5],n}},{key:"transformDirectionXY",value:function(t,e,n){d.isNumber(t,e);var i=this.data;return(n=n||new w).x=i[0]*t+i[2]*e,n.y=i[1]*t+i[3]*e,n}},{key:"transformVector",value:function(t,e){e=e||new w;var n=this.data,i=n[0]*t.x+n[2]*t.y+n[4],r=n[1]*t.x+n[3]*t.y+n[5];return e.set(i,r)}},{key:"transformRect",value:function(t,e){e=e||new x;for(var n=Number.MAX_VALUE,i=-Number.MAX_VALUE,r=Number.MAX_VALUE,s=-Number.MAX_VALUE,o=this.data,a=w.pool.get(),u=[t.x,t.y,t.x+t.width,t.y,t.x,t.y+t.height,t.x+t.width,t.y+t.height],h=0;h<u.length;h+=2)a.x=o[0]*u[h]+o[2]*u[h+1]+o[4],a.y=o[1]*u[h]+o[3]*u[h+1]+o[5],n>a.x&&(n=a.x),i<a.x&&(i=a.x),r>a.y&&(r=a.y),s<a.y&&(s=a.y);return w.pool.release(a),e.set(n,r,i-n,s-r)}},{key:"invert",value:function(){var t=this.data,e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],o=t[5],a=e*r-n*i;return 0===a?(t[0]=t[1]=t[2]=t[3]=0,t[4]=-s,t[5]=-o,this):(a=1/a,t[0]=r*a,t[1]=-n*a,t[2]=-i*a,t[3]=e*a,t[4]=(i*o-r*s)*a,t[5]=(n*s-e*o)*a,this)}},{key:"__decompose",value:function(){var t=this.data,e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],o=t[5],a=-Math.atan2(-i,r),u=Math.atan2(n,e),h=0,l=0,c=0;return Math.abs(a+u)<1e-5?(h=u,e<0&&r>=0&&(h+=h<=0?Math.PI:-Math.PI)):(l=a,c=u),[s,o,h,Math.sqrt(e*e+n*n),Math.sqrt(i*i+r*r),l,c]}},{key:"clone",value:function(){var e=new t,n=this.data;return e.set(n[0],n[1],n[2],n[3],n[4],n[5]),e}},{key:"copyTo",value:function(t){var e=this.data,n=t.data;return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],t}},{key:"copyFrom",value:function(t){return t.copyTo(this)}},{key:"exactEquals",value:function(t){if(!t)return!1;var e=this.data,n=t.data;return e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]&&e[3]===n[3]&&e[4]===n[4]&&e[5]===n[5]}},{key:"equals",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.EPSILON;if(!t)return!1;var n=this.data,i=t.data;return Math.abs(n[0]-i[0])<e&&Math.abs(n[1]-i[1])<e&&Math.abs(n[2]-i[2])<e&&Math.abs(n[3]-i[3])<e&&Math.abs(n[4]-i[4])<e&&Math.abs(n[5]-i[5])<e}},{key:"toString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return"        | ".concat(this.value[0].toFixed(t)," | ").concat(this.value[1].toFixed(t)," | ").concat(this.value[4].toFixed(t)," |\nMatrix: | ").concat(this.value[2].toFixed(t)," | ").concat(this.value[3].toFixed(t)," | ").concat(this.value[5].toFixed(t)," |")}},{key:"isIdentity",get:function(){return this.exactEquals(t.__identity)}},{key:"value",get:function(){return this.data}}]),t}();C.__cache=new C,C.__identity=new C,C.pool=new p(C);var x=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;c(this,t),d.isNumber(e,n,i,r),this.x=e,this.y=n,this.width=i,this.height=r}return f(t,[{key:"set",value:function(t,e,n,i){return d.isNumber(t,e,n,i),this.x=t,this.y=e,this.width=n,this.height=i,this}},{key:"copyFrom",value:function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}},{key:"copyTo",value:function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}},{key:"size",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return(t=t||new w).set(this.width,this.height)}},{key:"zero",value:function(){return this.set(0,0,0,0)}},{key:"equals",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.EPSILON;return null!==t&&Math.abs(this.x-t.x)<e&&Math.abs(this.y-t.y)<e&&Math.abs(this.width-t.width)<e&&Math.abs(this.height-t.height)<e}},{key:"containsXY",value:function(t,e){return t>=this.x&&t<=this.right&&e>=this.y&&e<=this.bottom}},{key:"contains",value:function(t){return t.x>=this.x&&t.y>=this.y&&t.right<=this.right&&t.bottom<=this.bottom}},{key:"intersects",value:function(t){return t.right>this.x&&t.bottom>this.y&&t.x<this.right&&t.y<this.bottom}},{key:"intersection",value:function(e,n){n=n||new t;var i=this.x<e.x?e.x:this.x,r=this.right>e.right?e.right:this.right;if(r<=i)return new t;var s=this.y<e.y?e.y:this.y,o=this.bottom>e.bottom?e.bottom:this.bottom;return o<=s?new t:(n.set(i,s,r-i,o-s),n)}},{key:"union",value:function(t){var e=this.x>t.x?t.x:this.x,n=this.right<t.right?t.right:this.right,i=this.y>t.y?t.y:this.y,r=this.bottom<t.bottom?t.bottom:this.bottom;return this.set(e,i,n-e,r-i)}},{key:"expand",value:function(t,e,n,i){if(d.isNumber(t,e,n,i),0===this.volume)return this.set(t,e,n,i);var r=this.right,s=this.bottom;return this.x>t&&(this.x=t,this.width=r-t),this.y>e&&(this.y=e,this.height=s-e),r<t+n&&(this.width=t+n-this.x),s<e+i&&(this.height=e+i-this.y),this}},{key:"expandXY",value:function(t,e){return t<this.x&&(this.width+=this.x-t,this.x=t),e<this.y&&(this.height+=this.y-e,this.y=e),t>this.x+this.width&&(this.width=t-this.x),e>this.y+this.height&&(this.height=e-this.y),this}},{key:"inflate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return d.isNumber(t,e),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this}},{key:"clone",value:function(){return new t(this.x,this.y,this.width,this.height)}},{key:"center",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return(t=t||new w).set(this.x+.5*this.width,this.y+.5*this.height)}},{key:"scale",value:function(t,e){return this.width*=t,this.height*=e,this}},{key:"toString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return"Rectangle { x: ".concat(this.x.toFixed(t),", y: ").concat(this.y.toFixed(t),", width: ").concat(this.width.toFixed(t),", height: ").concat(this.height.toFixed(t)," }")}},{key:"left",get:function(){return this.x},set:function(t){d.isNumber(t),this.x=t}},{key:"right",get:function(){return this.x+this.width},set:function(t){d.isNumber(t),this.x=t-this.width}},{key:"top",get:function(){return this.y},set:function(t){d.isNumber(t),this.y=t}},{key:"bottom",get:function(){return this.y+this.height},set:function(t){d.isNumber(t),this.y=t-this.height}},{key:"topLeft",get:function(){return new w(this.x,this.y)},set:function(t){this.left=t.x,this.top=t.y}},{key:"topRight",get:function(){return new w(this.right,this.y)},set:function(t){this.right=t.x,this.top=t.y}},{key:"bottomRight",get:function(){return new w(this.right,this.bottom)},set:function(t){this.right=t.x,this.bottom=t.y}},{key:"bottomLeft",get:function(){return new w(this.x,this.bottom)},set:function(t){this.x=t.x,this.bottom=t.y}},{key:"volume",get:function(){return this.width*this.height}},{key:"perimeter",get:function(){return 2*(this.width+this.height)}},{key:"isEmpty",get:function(){return this.width<=0||this.height<=0}},{key:"lines",get:function(){return[new T(this.topLeft,this.topRight),new T(this.topRight,this.bottomRight),new T(this.bottomRight,this.bottomLeft),new T(this.bottomLeft,this.topLeft)]}}],[{key:"fromPoints",value:function(e){var n=new t;if(0===e.length)return n;for(var i=e.length,r=e[0].x,s=e[0].y,o=e[0].x,a=e[0].y,u=1;u<i;u++){var h=e[u],l=h.x,c=h.y;r=Math.min(l,r),o=Math.max(l,o),s=Math.min(c,s),a=Math.max(c,a)}return n.x=r,n.y=s,n.width=o-r,n.height=a-s,n}},{key:"fromPointsXY",value:function(e){var n=new t;if(e.length<2)return n;for(var i=e.length,r=e[0],s=e[1],o=e[0],a=e[1],u=2;u<i;u+=2){var h=e[u],l=e[u+1];r=Math.min(h,r),o=Math.max(h,o),s=Math.min(l,s),a=Math.max(l,a)}return n.x=r,n.y=s,n.width=o-r,n.height=a-s,n}}]),t}();x.__cache=new x,x.pool=new p(x);var S=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;c(this,t),this.x=e,this.y=n,this.r=i}return f(t,[{key:"set",value:function(t,e,n){return this.x=t,this.y=e,this.r=n,this}},{key:"clone",value:function(){return new t(this.x,this.y,this.r)}},{key:"copyTo",value:function(t){return t.set(this.x,this.y,this.r)}},{key:"copyFrom",value:function(t){return this.set(t.x,t.y,t.r)}},{key:"equals",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.EPSILON;return null!==t&&Math.abs(this.x-t.x)<e&&Math.abs(this.y-t.y)<e&&Math.abs(this.r-t.r)<e}},{key:"containsXY",value:function(t,e){return this.contains(new w(t,e))}},{key:"contains",value:function(t){return new w(this.x,this.y).subtract(t).length()<=this.r}},{key:"zero",value:function(){return this.set(0,0,0)}},{key:"intersects",value:function(t){var e=new w(this.x,this.y).distance(new w(t.x,t.y));return e<=this.r+t.r&&e>=this.r-t.r}},{key:"collide",value:function(t){return new w(this.x,this.y).distance(new w(t.x,t.y))<=this.r+t.r}},{key:"overlap",value:function(t){return!(this.r<t.r)&&new w(this.x,this.y).distance(new w(t.x,t.y))<=this.r-t.r}},{key:"center",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return(t=t||new w).set(this.x,this.y)}},{key:"toString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return"Circle { x: ".concat(this.x.toFixed(t),", y: ").concat(this.y.toFixed(t),", r: ").concat(this.r.toFixed(t)," }")}},{key:"volume",get:function(){return Math.PI*this.r*this.r}},{key:"perimeter",get:function(){return 2*Math.PI*this.r}},{key:"left",get:function(){return this.x-this.r}},{key:"right",get:function(){return this.x+this.r}},{key:"top",get:function(){return this.y-this.r}},{key:"bottom",get:function(){return this.y+this.r}},{key:"topPoint",get:function(){return new w(this.x,this.top)}},{key:"bottomPoint",get:function(){return new w(this.x,this.bottom)}}],[{key:"getCircumferencePoint",value:function(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;return(r=r||new w).set(t+n*Math.sin(i),e+n*-Math.cos(i)),r}}]),t}();S.__cache=new S;var T=function(){function t(e,n){c(this,t),this.start=e,this.end=n}return f(t,[{key:"set",value:function(t,e){return this.start=t,this.end=e,this}},{key:"clone",value:function(){return new t(this.start.clone(),this.end.clone())}},{key:"copyTo",value:function(t){return t.set(this.start.clone(),this.end.clone())}},{key:"copyFrom",value:function(t){return this.set(t.start.clone(),t.end.clone())}},{key:"equals",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.EPSILON;return this.start.equals(t.start,e)&&this.end.equals(t.end,e)||this.start.equals(t.end,e)&&this.end.equals(t.start,e)}},{key:"reverse",value:function(){var t=this.start;return this.start=this.end,this.end=t,this}},{key:"normalize",value:function(){return this.end.subtract(this.start).normalize().add(this.start),this}},{key:"scale",value:function(t){return this.end.subtract(this.start).multiplyScalar(t).add(this.start),this}},{key:"zero",value:function(){return this.set(new w,new w)}},{key:"length",value:function(){return this.start.distance(this.end)}},{key:"center",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return(t=t||new w).set((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)}},{key:"containsXY",value:function(t,e){return this.contains(new w(t,e))}},{key:"contains",value:function(t){return this.start.distance(t)+this.end.distance(t)===this.length()}},{key:"intersects",value:function(t){var e=this.start,n=this.end,i=t.start,r=t.end,s=(r.y-i.y)*(n.x-e.x)-(r.x-i.x)*(n.y-e.y);if(0===s)return!1;var o=e.y-i.y,a=e.x-i.x,u=(r.x-i.x)*o-(r.y-i.y)*a;return a=((n.x-e.x)*o-(n.y-e.y)*a)/s,(o=u/s)>=0&&o<=1&&a>0&&a<1}},{key:"intersectsCircle",value:function(t){var e=this.start,n=this.end;if(t.contains(e)||t.contains(n))return!0;var i=e.distance(n),r=(n.x-e.x)/i,s=(n.y-e.y)/i,o=r*(t.x-e.x)+s*(t.y-e.y),a=new w(o*r+e.x,o*s+e.y).distance(new w(t.x,t.y));if(a<t.r){var u=Math.sqrt(Math.pow(t.r,2)-Math.pow(a,2)),h=(o-u)*r+e.x,l=(o-u)*s+e.y,c=(o+u)*r+e.x,m=(o+u)*s+e.y;return this.__isInBoundsXY(h,l)||this.__isInBoundsXY(c,m)}return!1}},{key:"__isInBoundsXY",value:function(t,e){var n=this.start.x,i=this.start.y,r=this.end.x,s=this.end.y;return t>Math.min(n,r)&&t<Math.max(n,r)&&e>Math.min(i,s)&&e<Math.max(i,s)}},{key:"toString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return"Line { start: ".concat(this.start.toString(t),", end: ").concat(this.end.toString(t)," }")}},{key:"left",get:function(){return Math.min(this.start.x,this.end.x)}},{key:"right",get:function(){return Math.max(this.start.x,this.end.x)}},{key:"top",get:function(){return Math.min(this.start.y,this.end.y)}},{key:"bottom",get:function(){return Math.max(this.start.y,this.end.y)}},{key:"type",get:function(){return"Line"}}]),t}();T.__cache=new T(new w,new w);var A=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];c(this,t),this.mVertices=e,this.mLines=[],this.mBounds=new x,this.mCenter=new w,e.length>2&&this.refresh()}return f(t,[{key:"set",value:function(t){return this.mVertices=t,this.refresh(),this}},{key:"copyTo",value:function(t){for(var e=this.mVertices.length,n=[],i=0;i<e;i++)n.push(this.mVertices[i].clone());return t.set(n)}},{key:"copyFrom",value:function(t){for(var e=t.mVertices,n=e.length,i=[],r=0;r<n;r++)i.push(e[r].clone());return this.set(i)}},{key:"clone",value:function(){for(var e=this.mVertices,n=e.length,i=[],r=0;r<n;r++)i.push(e[r].clone());return new t(i)}},{key:"containsXY",value:function(t,e){return this.contains(new w(t,e))}},{key:"contains",value:function(t){var e=this.mCenter,n=this.mLines,i=n.length;if(e.equals(t))return!0;var r=new T(t,e.clone()),s=0;r.scale((this.width+this.height)/r.length());for(var o=0;o<i;o++)s+=n[o].intersects(r)?1:0;return s%2!=0}},{key:"collide",value:function(t){if(!this.mBounds.intersects(t.mBounds))return!1;for(var e=this.mLines,n=e.length,i=t.mLines,r=i.length,s=0;s<n;s++)for(var o=0;o<r;o++)if(e[s].intersects(i[o]))return!0;return!1}},{key:"collideCircle",value:function(t){var e=this.mBounds,n=this.mLines;if(e.left>t.right||e.right<t.left||e.top>t.bottom||e.bottom<t.top)return!1;for(var i=n.length,r=0;r<i;r++)if(n[r].intersectsCircle(t))return!0;return!1}},{key:"collideRectangle",value:function(t){if(!this.mBounds.intersects(t))return!1;for(var e=this.mLines,n=e.length,i=t.lines,r=i.length,s=0;s<n;s++)for(var o=0;o<r;o++)if(e[s].intersects(i[o]))return!0;return!1}},{key:"overlap",value:function(t){if(this.mBounds.width<t.mBounds.width||this.mBounds.height<t.mBounds.height)return!1;if(!this.contains(t.mCenter))return!1;for(var e=this.mLines,n=e.length,i=t.mLines,r=i.length,s=0;s<n;s++)for(var o=0;o<r;o++)if(e[s].intersects(i[o]))return!1;return!0}},{key:"overlapCircle",value:function(t){if(!this.containsXY(t.x,t.y))return!1;for(var e=this.mLines,n=e.length,i=0;i<n;i++)if(e[i].intersectsCircle(t))return!1;return!0}},{key:"overlapRectangle",value:function(t){if(!this.contains(t.center()))return!1;for(var e=this.mLines,n=e.length,i=t.lines,r=i.length,s=0;s<n;s++)for(var o=0;o<r;o++)if(e[s].intersects(i[o]))return!1;return!0}},{key:"refresh",value:function(){var t=this.mCenter,e=this.mBounds,n=this.mVertices,i=this.mLines=[];t.set(0,0);for(var r=-Number.MAX_VALUE,s=-Number.MAX_VALUE,o=Number.MAX_VALUE,a=Number.MAX_VALUE,u=0;u<n.length;u++){var h=n[u];t.add(h);var l=h.x,c=h.y;r=l>r?l:r,s=c>s?c:s,o=l<o?l:o,a=c<a?c:a,i.push(new T(h,n[u+1]||n[0]))}return t.multiplyScalar(1/n.length),e.set(o,a,r-o,s-a),this}},{key:"refreshCenter",value:function(){var t=this.mCenter,e=this.mVertices,n=e.length;t.set(0,0);for(var i=0;i<n;i++)t.add(e[i]);return t.multiplyScalar(1/e.length),this}},{key:"refreshBounds",value:function(){for(var t,e,n=this.mBounds,i=this.mVertices,r=-Number.MAX_VALUE,s=-Number.MAX_VALUE,o=Number.MAX_VALUE,a=Number.MAX_VALUE,u=i.length,h=0;h<u;h++)t=i[h].x,e=i[h].y,r=t>r?t:r,s=e>s?e:s,o=t<o?t:o,a=e<a?e:a;return n.set(o,a,r-o,s-a),this}},{key:"refreshLines",value:function(){for(var t=this.mVertices,e=this.mLines=[],n=0;n<t.length;n+=2)e.push(new T(t[n],t[n+1]||t[0]));return this}},{key:"setRotation",value:function(t){for(var e=this.mCenter,n=this.mVertices,i=Math.cos(t),r=Math.sin(t),s=0,o=n.length;s<o;s++){var a=n[s];a.subtract(e).set(a.x*i-a.y*r,a.x*r+a.y*i).add(e)}return this.refresh()}},{key:"setTranslation",value:function(t){var e=this.mCenter,n=this.mVertices,i=n.length;t.subtract(e);for(var r=0;r<i;r++)n[r].add(t);return this.refresh()}},{key:"toString",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,e=this.mLines,n=this.mVertices,i=e.length,r="",s="",o=0;o<i;o++)s+=e[o].toString(t);i=n.length;for(var a=0;a<i;a++)r+=n[a].toString(t);return"Polygon { vertices: ".concat(r,", bounds: ").concat(this.mBounds.toString(t),", center: ").concat(this.mCenter.toString(),", lines: ").concat(s," }")}},{key:"width",get:function(){return this.mBounds.width}},{key:"height",get:function(){return this.mBounds.height}},{key:"perimeter",get:function(){for(var t=this.mLines,e=t.length,n=0,i=0;i<e;i++)n+=t[i].length();return n}},{key:"vertices",get:function(){return this.mVertices}},{key:"center",get:function(){return this.mCenter}}],[{key:"fromPath",value:function(e){for(var n=[],i=e.split(" "),r=0;r<i.length;r+=2)n.push(new w(Number(i[r]),Number(i[r+1])));return new t(n)}}]),t}();A.__cache=new A;var E=function(){function t(){c(this,t),this.mPoints=[],this.mLookup=null,this.mBaked=!1,this.mStep=1/60,this.mEachT=[]}return f(t,[{key:"set",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.mPoints=this.__initPoints(e),this.__refreshEachT(),this.mBaked&&this.__refreshCache(),this}},{key:"__initPoints",value:function(t){for(var e=[],n=6;n<t.length;n+=6)e=e.concat(t.slice(n-6,n+2));return e}},{key:"__refreshCache",value:function(){for(var e=this.mLookup=[],n=this.getFullLength(),i=this.mPoints,r=i.length,s=0;s<r;s+=8)for(var o=t.getLength.apply(t,l(i.slice(s,s+8))),a=this.mStep*n/o,u=a;u<1;u+=a)e.push(t.lerp.apply(t,[u].concat(l(i.slice(s,s+8)))));return this}},{key:"__refreshEachT",value:function(){for(var e=this.mPoints,n=this.mEachT=[],i=e.length,r=[],s=0;s<i;s+=8)r.push(t.getLength.apply(t,l(e.slice(s,s+8))));for(var o=this.getFullLength(),a=0,u=0;u<i;u+=8)a+=r[u/8],n.push(a/o);return this}},{key:"interpolate",value:function(e,n){var i=n||new w,r=this.mLookup;if(this.mBaked){var s=r[Math.ceil((r.length-1)*e)];return i.copyFrom(s),i}for(var o=this.mEachT,a=this.mPoints,u=0;o[u]<e;)u++;var h=o[u-1]||0,c=o[u],m=a.slice(8*u,8*u+8);return t.lerp.apply(t,[(e-h)/(c-h)].concat(l(m),[i]))}},{key:"getFullLength",value:function(){for(var e=this.mPoints,n=e.length,i=0,r=0;r<n;r+=8)i+=t.getLength.apply(t,l(e.slice(r,r+8)));return i}},{key:"baked",get:function(){return this.mBaked},set:function(t){this.mBaked=t,!this.mLookup&&this.mPoints&&this.__refreshCache()}}],[{key:"lerp",value:function(t,e,n,i,r,s,o,a,u,h){var l=1-t,c=t*t,m=l*l,f=m*l,d=c*t,v=h||new w;return v.set(e,n),v.x*=f,v.y*=f,v.x+=3*m*t*i,v.y+=3*m*t*r,v.x+=3*l*c*s,v.y+=3*l*c*o,v.x+=d*a,v.y+=d*u,v}},{key:"getLength",value:function(){var t=new w(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1]),e=new w(arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3]),n=new w(arguments.length<=4?void 0:arguments[4],arguments.length<=5?void 0:arguments[5]),i=new w(arguments.length<=6?void 0:arguments[6],arguments.length<=7?void 0:arguments[7]);return(i.distance(t)+t.distance(e)+e.distance(n)+n.distance(i))/2}}]),t}();E.__cache=new E;var P={DIRECT:"direct",BUBBLE:"bubble"},R={REGULAR:"regular",OVERHEARD:"overheard"},N=function(){function t(){c(this,t),this.sender=null,this.name="",this.target=null,this.origin=null,this.canceled=!1,this.type=P.DIRECT}return f(t,[{key:"cancel",value:function(){this.canceled=!0}},{key:"toString",value:function(){var t="";return!0===this.sender instanceof V&&(t=this.sender.name),"MESSAGE: { name: '".concat(this.name,"', sender: '").concat(t,"', target: '").concat(this.target.name,"', path: '").concat(this.path,"' }")}},{key:"__reset",value:function(){return this.sender=null,this.name="",this.target=null,this.canceled=!1,this.type=P.DIRECT,this}}]),t}();N.pool=new p(N),N.PROGRESS="progress",N.COMPLETE="complete",N.ERROR="error",N.CHANGE="change",N.READY="ready",N.UPDATE="update",N.RESIZE="resize";var O=function(){function t(e,n,i,r){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:R.REGULAR,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;c(this,t),this.owner=e,this.name=n,this.callback=i,this.isOnce=r,this.context=s,this.pathPattern=a,this.glob=null==a?null:new _(a),this.type=o}return f(t,[{key:"off",value:function(){this.owner.__off(this)}},{key:"__reset",value:function(){return this.owner=null,this.pathPattern=null,this}}]),t}(),M=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];c(this,t),this.mBindings=null,this.checkForStage=e}return f(t,[{key:"on",value:function(t,e,n){return this.__on(t,e,!1,n)}},{key:"off",value:function(){for(var t=0;t<arguments.length;t++){var e=t<0||arguments.length<=t?void 0:arguments[t];if(-1!==e.indexOf("@"))return void d.error("Removing overheard bindings is not allowed.");if(null!==this.mBindings&&!0===this.mBindings.hasOwnProperty(e))for(var n=this.mBindings[e].slice(),i=0;i<n.length;i++)this.__off(n[i])}}},{key:"once",value:function(t,e,n){return this.__on(t,e,!0,n)}},{key:"post",value:function(t){for(var e=this.__draftMessage(t),n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];e.type===P.DIRECT?this.__invoke.apply(this,[this,e].concat(i)):e.type===P.BUBBLE&&this.__postBubbles.apply(this,[this,e,!0].concat(i)),!1===e.canceled&&this.__invokeOverheard.apply(this,[this,e].concat(i)),N.pool.release(e)}},{key:"__on",value:function(e,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;d.assert(null!==e,"name cannot be null."),d.assert(e.trim().length>0,"name cannot be null."),d.assert(!(0===e.indexOf("~")),"Using `~` is not tot allowed here."),d.assert(null!==n,"callback cannot be null.");var s=e.indexOf("@");if(-1!==s){var o=e.substring(0,s),a=e.substring(s+1),u=t.mOverheardHandlers;!1===u.hasOwnProperty(o)&&(u[o]=[]);var h=u[o],l=new O(this,o,n,i,r,R.OVERHEARD,a);return h.push(l),l}null===this.mBindings&&(this.mBindings={}),!1===this.mBindings.hasOwnProperty(e)&&(this.mBindings[e]=[]);var c=new O(this,e,n,i,r,R.REGULAR);return this.mBindings[e].push(c),c}},{key:"__off",value:function(e){if(e.type===R.REGULAR){if(null===this.mBindings)return;if(!1===this.mBindings.hasOwnProperty(e.name))return;var n=this.mBindings[e.name],i=n.indexOf(e);if(-1===i)return;n.splice(i,1)}else if(e.type===R.OVERHEARD){var r=t.mOverheardHandlers;if(!1===r.hasOwnProperty(e.name))return;var s=r[e.name],o=s.indexOf(e);if(-1===o)return;s.splice(o,1)}}},{key:"__invoke",value:function(t,e){if(!0!==e.canceled&&null!==this.mBindings&&(!0!==this.checkForStage||this===Ye.stage||null!==this.stage)){var n=this.mBindings[e.name];if(void 0!==n&&0!==n.length){for(var i=n.slice(0),r=arguments.length,s=new Array(r>2?r-2:0),o=2;o<r;o++)s[o-2]=arguments[o];for(var a=0;a<i.length;a++){var u;e.target=this;var h=i[a];if((!0!==this.checkForStage||h.owner.stage!==Ye.stage||null!==h.owner.stage)&&((u=h.callback).call.apply(u,[h.context,e].concat(s)),!0===h.isOnce&&this.__off(h),!0===e.canceled))return}}}}},{key:"__invokeOverheard",value:function(e,n){if(!0!==n.canceled){var i=t.mOverheardHandlers[n.name];if(void 0!==i&&0!==i.length){for(var r=i.slice(0),s=arguments.length,o=new Array(s>2?s-2:0),a=2;a<s;a++)o[a-2]=arguments[a];for(var u=0;u<r.length;u++){var h,l=r[u];if((!0!==this.checkForStage||l.owner.stage!==Ye.stage||null!==l.owner.stage)&&(this.__checkPath(e.path,l)&&(n.target=this,(h=l.callback).call.apply(h,[l.context,n].concat(o)),!0===l.isOnce&&this.__off(l),!0===n.canceled)))return}}}}},{key:"__postBubbles",value:function(t,e,n){e.origin=this;for(var i=[this],r=this;null!==r.parent;)i.push(r.parent),r=r.parent;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];for(var u=0;u<i.length;u++){var h=i[u];if(h.__invoke.apply(h,[t,e].concat(o)),!0===e.canceled)return}}},{key:"__draftMessage",value:function(t){var e=N.pool.get();return e.__reset(),e.sender=this,"~"===t.charAt(0)?(e.name=t.substr(1),e.type=P.BUBBLE):e.name=t,e}},{key:"__checkPath",value:function(t,e){return null!==t&&null!==e.pathPattern&&(t===e.pathPattern||(-1===e.pathPattern.indexOf("*")?t===e.pathPattern:e.glob.test(t)))}},{key:"parent",get:function(){return null}},{key:"stage",get:function(){return null}},{key:"path",get:function(){return null}}]),t}();M.mOverheardHandlers={};var L=function(){function t(e){c(this,t),null===t.__CONTEXT&&(t.__CANVAS=document.createElement("canvas"),t.__CONTEXT=t.__CANVAS.getContext("2d"),t.__CANVAS.width=10,t.__CANVAS.height=200),e.size=24,this.mCanvas=t.__CANVAS,this.mCtx=t.__CONTEXT,this.mStyle=e;var n=Math.floor(.7766*t.__CANVAS.height);this.mCtx.clearRect(0,0,this.mCanvas.width,this.mCanvas.height),this.mCtx.font="".concat(e.weight," ").concat(e.size,"px ").concat(e.family),this.mCtx.fillText("x",0,n,1);for(var i=this.mCtx.getImageData(0,0,1,this.mCanvas.height).data,r=this.__getBottom(i)-this.__getTop(i),s=32;s<=126;s++)this.mCtx.fillText(String.fromCharCode(s),0,n,1);i=this.mCtx.getImageData(0,0,1,this.mCanvas.height).data;var o=this.__getTop(i),a=n-o,u=this.__getBottom(i)-o;this.baseline=a,this.bottom=u,this.ascent=a-r,this.descent=u-a,this.xHeight=r,this.capHeight=a}return f(t,[{key:"__getTop",value:function(t){for(var e=3,n=t.length;e<n;e+=4)if(t[e]>0)return(e-3)/4;return t.length/4}},{key:"__getBottom",value:function(t){for(var e=t.length-1;e>0;e-=4)if(t[e]>0)return(e+1)/4;return 0}},{key:"capHeightNormalized",get:function(){return this.capHeight/this.mStyle.size}},{key:"xHeightNormalized",get:function(){return this.xHeight/this.mStyle.size}},{key:"ascentNormalized",get:function(){return this.ascent/this.mStyle.size}},{key:"descentNormalized",get:function(){return this.descent/this.mStyle.size}},{key:"baselineNormalized",get:function(){return this.baseline/this.mStyle.size}},{key:"bottomNormalized",get:function(){return this.bottom/this.mStyle.size}}],[{key:"get",value:function(e){var n=t.CACHE[e];null==n&&(n=new t(new zt(e,0,24)),t.CACHE[e]=n);return n}}]),t}();L.CACHE={},L.__CONTEXT=null,L.__CANVAS=null,L.CHAR_CAPITAL_HEIGHT="s",L.CHAR_BASELINE="a",L.CHAR_XHEIGHT="x",L.CHAR_DESCENT="p",L.CHAR_ASCENT="h";var D=function t(e,n,i,r){c(this,t),this.text=e,this.style=n,this.lineIndex=i,this.bounds=r},I=function(){function t(){throw c(this,t),new Error("Singleton")}return f(t,null,[{key:"measure",value:function(e,n){for(var i,r=[],s=/(~{([^}]+)}|^)(.+?(?=~{.+}|$|^))|(\n)/gm,o="def",a=0,u=arguments.length,h=new Array(u>2?u-2:0),l=2;l<u;l++)h[l-2]=arguments[l];for(;null!==(i=s.exec(e));)i[4]&&a++,i[2]&&(o=i[2]),i[3]&&r.push({tag:o,text:i[3],style:h.filter(function(t){return t.name===o})[0],lineIndex:a});for(var m=new function t(){c(this,t),this.segments=[],this.bounds=new x,this.strokeBounds=null,this.shadowBounds=null,this.lineWidth=[]},f=h.filter(function(t){return"def"===t.name})[0]||zt.default,d=f.size*n,v=new x,y=new x,p=null,g=-1,k=0,b=0,_=L.get(f.family).baselineNormalized*f.size,w=0;w<r.length;w++){var C=r[w],S=C.style,T=t.__measure(C.text,S),A=L.get(S.family).baselineNormalized*S.size;if(g!==C.lineIndex&&(m.lineWidth[C.lineIndex]=0,k=0),b=d*C.lineIndex+_-A,T.x=k+2,T.y=b+2,k+=T.width,g=C.lineIndex,C.bounds=T,m.lineWidth[C.lineIndex]+=T.width,v.union(T),y.union(T.clone().inflate(S.strokeThickness,S.strokeThickness)),!0===S.dropShadow){var E=T.clone();E.inflate(S.shadowBlur,S.shadowBlur),E.x+=S.shadowDistanceX,E.y+=S.shadowDistanceY,(p=p||E).union(E)}m.segments.push(new D(C.text,S,C.lineIndex,C.bounds))}return m.bounds=v,m.strokeBounds=y,m.shadowBounds=p||new x,m}},{key:"__measure",value:function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;d.assert(null!=n,"Style cannot be null"),(i=i||new x).zero();var r=t.__span;null===t.__span&&(t.__span=document.createElement("span"),(r=t.__span).id="font",r.style.position="absolute",r.style.width="auto",r.style.height="auto",r.style.top="0px",r.style.left="0px",r.style.display="inline-block",r.style.border="1px solid green",r.style.color="#00ff00",r.style.verticalAlign="baseline",r.style.whiteSpace="nowrap",r.style.lineHeight="normal",r.style.top="-9999px",r.style.left="-9999px",document.body.appendChild(r)),r.style.fontFamily=n.family,r.style.fontSize="".concat(n.size,"px"),r.style.fontWeight=n.weight,r.style.fontStyle=n.style;var s=L.get(n.family);return r.innerHTML=e.replace(/ /g,"&nbsp"),i.set(0,s.baselineNormalized*n.size,r.offsetWidth+2,s.bottomNormalized*n.size+2),i}},{key:"measureBitmap",value:function(t,e,n,i){i=i||new x;for(var r=-1,s=0,o=0,a=0,u=0,h=0;h<t.length;h++){var l=t.charCodeAt(h);if(/(?:\r\n|\r|\n)/.test(t.charAt(h)))s=0,o+=e.lineHeight*n,r=-1;else{var c=e.chars[l];null!=c&&(r>=0&&c.kerning[r]&&(s+=c.kerning[r]),s+=c.xAdvance,u=Math.max(u,s+c.xOffset),a=Math.max(a,o+c.height+c.yOffset),r=l)}}return i.set(0,0,u,a)}}]),t}();I.__span=null,I.NEWLINE_REGEX=/\r?\n/;var B=function(){function t(){c(this,t)}return f(t,null,[{key:"now",get:function(){return t.mTime}},{key:"dt",get:function(){return t.mDeltaTime*t.mScale}},{key:"alpha",get:function(){return t.mAlphaTime}},{key:"delta",get:function(){return t.mDeltaTime*t.mScale}},{key:"scale",get:function(){return t.mScale},set:function(e){d.assert(e>=0,"Time.scale must be >= 0."),t.mScale=e}}]),t}();B.mTime=0,B.mActualTime=0,B.mDeltaTimeMs=1e3/60,B.mDeltaTime=1e3/60*.001,B.mScale=1,B.mAlphaTime=0,B.mRenderOffset=0;var F=function(t){function e(){return c(this,e),s(this,a(e).call(this))}return u(e,M),f(e,[{key:"onUpdate",value:function(){}},{key:"onPostUpdate",value:function(){}},{key:"onRender",value:function(){}},{key:"onChildrenAdded",value:function(t){}},{key:"onChildrenRemoved",value:function(t){}},{key:"onChildrenChanged",value:function(t){}},{key:"onComponentAdded",value:function(t,e){}},{key:"onComponentRemoved",value:function(t,e){}}]),e}(),H=function(t){function e(t){var n;c(this,e),(n=s(this,a(e).call(this))).mContainerElement=t;var i=n.mContainerElement.style;i.userSelect="none",i.touchAction="none",i.cursor="auto",i.WebkitTapHighlightColor="rgba(0, 0, 0, 0)";var r=n.mContainerElement.getBoundingClientRect();return n.mSize=new x(r.left,r.top,r.width,r.height),n.isTransparent=!0,n.backgroundColor=2236962,n.mChecksLeftSeconds=0,window.addEventListener("resize",function(){return n.__onResize()}),n}return u(e,M),f(e,[{key:"__update",value:function(){this.mChecksLeftSeconds<=0||(this.__onResize(),this.mChecksLeftSeconds-=B.delta)}},{key:"__onResize",value:function(){var t=this.mContainerElement.getBoundingClientRect(),e=x.pool.get().set(t.left,t.top,t.width,t.height);!0!==this.mSize.equals(e)&&(this.mSize.copyFrom(e),this.post(N.RESIZE,this.mSize),this.mChecksLeftSeconds=1,x.pool.release(e))}},{key:"size",get:function(){return this.mSize}},{key:"nativeDOM",get:function(){return this.mContainerElement}}]),e}(),j=function(t){function e(){var t;return c(this,e),(t=s(this,a(e).call(this,!0))).mId=++e.ID,t.mGameObject=null,t.mAdded=!1,t}return u(e,M),f(e,[{key:"onAdded",value:function(t){}},{key:"onRemoved",value:function(t){}},{key:"onUpdate",value:function(){}},{key:"onRender",value:function(){}},{key:"removeFromParent",value:function(){null!==this.mGameObject&&this.mGameObject.removeComponent(this)}},{key:"gameObject",get:function(){return this.mGameObject}},{key:"parent",get:function(){return this.mGameObject}},{key:"stage",get:function(){return null===this.mGameObject?null:this.mGameObject.stage}},{key:"path",get:function(){return null!==this.mGameObject?this.mGameObject.path+"#"+this.constructor.name:this.constructor.name}}]),e}();j.ID=0;var V=function(t){function e(){var t;return c(this,e),(t=s(this,a(e).call(this,!0))).mId=++e.ID,t.mName=null,t.mComponents=[],t.mChildren=[],t.mX=0,t.mY=0,t.mScaleX=1,t.mScaleY=1,t.mPivotX=0,t.mPivotY=0,t.mSkewX=0,t.mSkewY=0,t.mAnchorX=null,t.mAnchorY=null,t.mPivotOffsetX=0,t.mPivotOffsetY=0,t.mAnchorChanged=!1,t.mRotation=0,t.mBoundsCache=new x,t.mLocalTransform=new C,t.mWorldTransform=new C,t.mWorldTransformInverted=new C,t.mDirty=X.DIRTY,t.mParent=null,t.mTag=null,t.mAdded=!1,t.mNumChildrenRemoved=0,t.mNumComponentsRemoved=0,t.mDirtyFrameNum=0,t.mSuspendDirty=!1,t.mCollidersCache=[],t.mChildOrComponentBeenAdded=!1,t.mChildrenClone=null,t.mComponentClone=null,t}return u(e,M),f(e,[{key:"make",value:function(t){for(var e in this.mSuspendDirty=!0,t)t.hasOwnProperty(e)&&(this[e]=t[e]);return this.mSuspendDirty=!1,this.setTransformDirty(),this}},{key:"checkStatic",value:function(){if(!1===(!(arguments.length>0&&void 0!==arguments[0])||arguments[0]))return this.mDirtyFrameNum<Ye.frameNum;var t=!1;return e.forEach(this,function(e){if(e.mDirtyFrameNum>=Ye.frameNum)return t=!0,!0}),!t}},{key:"onAdded",value:function(){}},{key:"onRemoved",value:function(){}},{key:"add",value:function(){for(var t=0;t<arguments.length;t++){var n=t<0||arguments.length<=t?void 0:arguments[t];n instanceof e?this.addChild(n):this.addComponent(n)}return this}},{key:"addChild",value:function(t){return this.addChildAt(t,this.mChildren.length)}},{key:"addChildAt",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;d.assert(t instanceof e,"Type error.");var i=this.mChildren.length;if(n<0||n>i)throw new Error("Child index is out of bounds.");return t.mParent===this?this.setChildIndex(t,n):(this.mChildren.splice(n,0,t),t.removeFromParent(),t.__setParent(this),this.root instanceof Y&&Ye.instance.onChildrenAdded(t),this.mChildOrComponentBeenAdded=!0,t)}},{key:"__setParent",value:function(t){for(var e=t;null!==e&&e!==this;)e=e.mParent;if(e===this)throw new Error("Object cannot be a child to itself.");return this.mParent=t,this.setTransformDirty(),!0}},{key:"setChildIndex",value:function(t,e){var n=this.mChildren.indexOf(t);if(n<0)throw new Error("Given child element was not found in children list.");return n===e?t:(this.mChildren.splice(n,1),this.mChildren.splice(e,0,t),null!==this.stage&&Ye.instance.onChildrenChanged(t),this.setTransformDirty(),t)}},{key:"removeFromParent",value:function(){null!==this.mParent&&this.mParent.removeChild(this),this.setTransformDirty()}},{key:"removeChild",value:function(t){var e=this.mChildren.indexOf(t);return e<0?null:this.removeChildAt(e)}},{key:"getChildByName",value:function(t){for(var e=0;e<this.mChildren.length;e++)if(this.mChildren[e].name===t)return this.mChildren[e];return null}},{key:"removeChildAt",value:function(t){if(t<0||t>this.numChildren)throw new Error("Child index is out of bounds.");var e=null!==this.stage,n=this.mChildren[t];return n.__setParent(null),this.mChildren.splice(t,1),e&&Ye.instance.onChildrenRemoved(n),this.setTransformDirty(),this.mNumChildrenRemoved++,n}},{key:"getChildAt",value:function(t){return this.mChildren[t]}},{key:"addComponent",value:function(t){d.assert(t instanceof j,"Type error.");var e=t;if(e.gameObject)throw new Error("Component cannot be added to two game objects at the same time.");return this.mComponents.push(e),e.mGameObject=this,e instanceof U&&this.mCollidersCache.push(e),null===this.stage&&Ye.stage!==this||Ye.instance.onComponentAdded(this,e),this.mChildOrComponentBeenAdded=!0,e}},{key:"removeComponent",value:function(t){if(!t)return null;d.assert(t instanceof j,"Type error.");var e=this.mComponents.indexOf(t);if(e>-1&&this.mComponents.splice(e,1),t.mGameObject=null,t instanceof U){var n=this.mCollidersCache.indexOf(t);n>-1&&this.mCollidersCache.splice(n,1)}return null===this.stage&&Ye.stage!==this||Ye.instance.onComponentRemoved(this,t),this.mNumComponentsRemoved++,t}},{key:"getComponent",value:function(t){for(var e=0;e<this.mComponents.length;e++){var n=this.mComponents[e];if(n instanceof t)return n}return null}},{key:"getComponentAt",value:function(t){return t>=0&&t<this.mComponents.length?this.mComponents[t]:null}},{key:"__update",value:function(){if(this.onUpdate(),!1!==this.mChildOrComponentBeenAdded){if(this.mComponents.length>0){this.mComponentClone=this.mComponents.slice();for(var t=0;t<this.mComponentClone.length&&!1!==this.mAdded;t++){var e=this.mComponentClone[t];if(!1===e.mAdded)break;e.onUpdate()}}if(this.mChildren.length>0){this.mChildrenClone=this.mChildren.slice();for(var n=0;n<this.mChildrenClone.length;n++){var i=this.mChildrenClone[n];!0===i.mAdded&&i.__update()}}}}},{key:"onUpdate",value:function(){}},{key:"onCollectRenderables",value:function(t,e){arguments.length>2&&void 0!==arguments[2]&&arguments[2];return null}},{key:"onGetLocalBounds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return(t=t||new x).set(0,0,0,0)}},{key:"getBounds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if(n=n||new x,this.onGetLocalBounds(n),null==t&&(t=this.mParent),t==this);else if(t==this.mParent)if(!1===e){var i=C.pool.get();i.copyFrom(this.localTransformation),i.transformRect(n,n),C.pool.release(i)}else{if(!(!0===e&&this.mDirty&X.BOUNDS))return n.copyFrom(this.mBoundsCache),n;var r=C.pool.get();r.copyFrom(this.localTransformation),r.transformRect(n,n),C.pool.release(r)}else{var s=C.pool.get();s.copyFrom(this.worldTransformation),s.prepend(t.worldTransformationInverted),s.transformRect(n,n),C.pool.release(s)}if(!0===e){for(var o=x.pool.get(),a=0;a<this.mChildren.length;a++)o.zero(),this.mChildren[a].getBounds(t,e,o),n.union(o);x.pool.release(o),t==this.mParent&&this.mDirty&X.BOUNDS&&(this.mBoundsCache.copyFrom(n),this.mDirty^=X.BOUNDS)}return n}},{key:"getStageBounds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;t=t||new x,this.onGetLocalBounds(t);var e=C.pool.get();return e.copyFrom(this.worldTransformation),e.prepend(this.stage.worldTransformationInverted),e.transformRect(t,t),C.pool.release(e),t}},{key:"hitTest",value:function(t){var e=this.getComponent(Jt),n=null!==e&&e.touchable,i=this.onHitTestMask(t);if(!1===n||!1===i)return null;for(var r=null,s=this.mChildren.length-1;s>=0;--s){if(null!==(r=this.mChildren[s].hitTest(t)))return r}return!0===this.onHitTest(t)?this:null}},{key:"onHitTest",value:function(t){var e=!1,n=w.pool.get();if(this.worldTransformationInverted.transformVector(t,n),this.mCollidersCache.length>0)for(var i=0;i<this.mCollidersCache.length;i++){if(!0===(e=this.mCollidersCache[i].containsPoint(n)))return!0}else e=this.localBounds.containsXY(n.x,n.y);return w.pool.release(n),e}},{key:"onHitTestMask",value:function(t){return!0}},{key:"setTransform",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;!(arguments.length>7&&void 0!==arguments[7])||arguments[7];return this.mX=t,this.mY=e,this.mRotation=n,this.mScaleX=i,this.mScaleY=r,this.mAnchorX=s,this.mAnchorY=o,this.setTransformDirty(),this}},{key:"relativeTo",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(e=e||new w).set(this.x,this.y),null==this.parent||null==t?e:(this.parent.localToGlobal(e,e),t.globalToLocal(e,e),e)}},{key:"localToGlobal",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.worldTransformation.transformVector(t,e)}},{key:"globalToLocal",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.worldTransformationInverted.transformVector(t,e)}},{key:"alignAnchor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5;return d.isNumber(t,e),this.mAnchorX=t,this.mAnchorY=e,this}},{key:"alignPivot",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5;return this.alignPivotOffset(t,e)}},{key:"alignPivotOffset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return d.isNumber(t,e),this.getBounds(this,n,x.__cache.zero()),this.mPivotOffsetX=x.__cache.width*t,this.mPivotOffsetY=x.__cache.height*e,this.mPivotX=null===this.mAnchorX?this.mPivotOffsetX+x.__cache.x:this.mPivotOffsetX+x.__cache.width*this.mAnchorX+x.__cache.x,this.mPivotY=null===this.mAnchorY?this.mPivotOffsetY+x.__cache.y:this.mPivotOffsetY+x.__cache.height*this.mAnchorY+x.__cache.y,this.setTransformDirty(),this}},{key:"spawn",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=t.apply(null==e?this:e);return function t(e){e.done||("function"==typeof e.value?e.value(function(e){return t(n.next(e))}):t(n.next(e.value)))}(n.next()),n}},{key:"wait",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(n){return setTimeout(n.bind(t,1e3*e),1e3*e)}}},{key:"waitMessage",value:function(t){var e=this;return function(n){return e.once(t,n.bind(e))}}},{key:"setDirty",value:function(t){!(arguments.length>1&&void 0!==arguments[1])||arguments[1]?e.forEach(this,function(e){e.mDirty|=t,e.mDirtyFrameNum=Ye.frameNum}):(this.mDirty|=t,this.mDirtyFrameNum=Ye.frameNum),pt.__dirty=!0}},{key:"__updatePivots",value:function(t){t.getBounds(t,!0,x.__cache.zero()),t.mPivotX=null===t.mAnchorX?t.mPivotOffsetX+x.__cache.x:t.mPivotOffsetX+x.__cache.width*t.mAnchorX+x.__cache.x,t.mPivotY=null===t.mAnchorY?t.mPivotOffsetY+x.__cache.y:t.mPivotOffsetY+x.__cache.height*t.mAnchorY+x.__cache.y}},{key:"setParentDirty",value:function(t){for(var e=this;null!=e;)e.mDirty|=t,e.mDirtyFrameNum=Ye.frameNum,e=e.mParent;pt.__dirty=!0}},{key:"setTransformDirty",value:function(){!0!==this.mSuspendDirty&&(this.setDirty(X.LOCAL|X.BOUNDS,!1),this.setDirty(X.WIRB,!0),this.setParentDirty(X.BOUNDS|X.ANCHOR))}},{key:"setRenderDirty",value:function(){!0!==this.mSuspendDirty&&this.setDirty(X.RENDER,!0)}},{key:"id",get:function(){return this.mId}},{key:"numComponents",get:function(){return this.mComponents.length}},{key:"localTransformation",get:function(){if(this.mDirty&X.LOCAL){if(this.mDirty^=X.LOCAL,0===this.mSkewX&&0===this.mSkewY){if(0===this.mRotation)return this.mLocalTransform.set(this.mScaleX,0,0,this.mScaleY,this.mX-this.mPivotX*this.mScaleX,this.mY-this.mPivotY*this.mScaleY);var t=Math.cos(this.mRotation),e=Math.sin(this.mRotation),n=this.mScaleX*t,i=this.mScaleX*e,r=this.mScaleY*-e,s=this.mScaleY*t,o=this.mX-this.mPivotX*n-this.mPivotY*r,a=this.mY-this.mPivotX*i-this.mPivotY*s;return this.mLocalTransform.set(n,i,r,s,o,a)}this.mLocalTransform.identity(),this.mLocalTransform.scale(this.mScaleX,this.mScaleY),this.mLocalTransform.skew(this.mSkewX,this.mSkewY),this.mLocalTransform.rotate(this.mRotation);var u=this.mLocalTransform.data[0],h=this.mLocalTransform.data[1],l=this.mLocalTransform.data[2],c=this.mLocalTransform.data[3],m=this.mX,f=this.mY;0===this.mPivotX&&0===this.mPivotY||(m=this.mX-u*this.mPivotX-l*this.mPivotY,f=this.mY-h*this.mPivotX-c*this.mPivotY),this.mLocalTransform.data[4]=m,this.mLocalTransform.data[5]=f}return this.mLocalTransform},set:function(t){var e=Math.PI/4,n=t.data[0],i=t.data[1],r=t.data[2],s=t.data[3],o=t.data[4],a=t.data[5];this.mPivotX=this.mPivotX=0,this.mX=o,this.mY=a;var u=Math.atan(-r/s),h=Math.atan(i/n);u!=u&&(u=0),h!=h&&(h=0),this.mScaleY=u>-e&&u<e?s/Math.cos(u):-r/Math.sin(u),this.mScaleX=h>-e&&h<e?n/Math.cos(h):i/Math.sin(h),v.equals(u,h)?(this.mRotation=u,this.mSkewX=this.mSkewY=0):(this.mRotation=0,this.mSkewX=u,this.mSkewY=h),this.setTransformDirty()}},{key:"worldTransformation",get:function(){return this.mDirty&X.ANCHOR&&(null!==this.mAnchorX||null!==this.mAnchorY)&&(this.mDirty^=X.ANCHOR,this.__updatePivots(this),this.setDirty(X.LOCAL|X.WIRB,!0)),this.mDirty&X.WORLD&&(this.mDirty^=X.WORLD,null!==this.mParent?this.mParent.worldTransformation.copyTo(this.mWorldTransform).append(this.localTransformation):this.localTransformation.copyTo(this.mWorldTransform)),this.mWorldTransform}},{key:"worldTransformationInverted",get:function(){return this.mDirty&X.WORLD_INV&&(this.mDirty^=X.WORLD_INV,this.worldTransformation.copyTo(this.mWorldTransformInverted).invert()),this.mWorldTransformInverted}},{key:"localBounds",get:function(){return this.getBounds(this,!1)}},{key:"bounds",get:function(){return this.getBounds(this.mParent,!0)}},{key:"numChildren",get:function(){return this.mChildren.length}},{key:"name",get:function(){return this.mName},set:function(t){this.mName=t}},{key:"x",get:function(){return this.mX},set:function(t){this.mX!=t&&(d.assert(!isNaN(t),"Value cannot be NaN"),this.mX=t,this.setTransformDirty())}},{key:"y",get:function(){return this.mY},set:function(t){this.mY!=t&&(d.assert(!isNaN(t),"Value cannot be NaN"),this.mY=t,this.setTransformDirty())}},{key:"pivotOffsetX",get:function(){return this.mPivotOffsetX},set:function(t){this.mPivotOffsetX!==t&&(d.assert(!isNaN(t),"Value cannot be NaN"),this.mPivotOffsetX=t,this.__updatePivots(this),this.setTransformDirty())}},{key:"pivotOffsetY",get:function(){return this.mPivotOffsetY},set:function(t){this.mPivotOffsetY!==t&&(d.assert(!isNaN(t),"Value cannot be NaN"),this.mPivotOffsetY=t,this.__updatePivots(this),this.setTransformDirty())}},{key:"anchorX",set:function(t){this.mAnchorX!==t&&(d.assert(null!==t&&!isNaN(t),"Value cannot be NaN"),this.mAnchorX=t,this.mAnchorChanged=!0,this.setTransformDirty())},get:function(){return this.mAnchorX}},{key:"anchorY",set:function(t){this.mAnchorY!==t&&(d.assert(null!==t&&!isNaN(t),"Value cannot be NaN"),this.mAnchorY=t,this.mAnchorChanged=!0,this.setTransformDirty())},get:function(){return this.mAnchorY}},{key:"pivotX",get:function(){return this.mPivotX}},{key:"pivotY",get:function(){return this.mPivotY}},{key:"scaleX",get:function(){return this.mScaleX},set:function(t){this.mScaleX!=t&&(d.assert(!isNaN(t),"Value cannot be NaN"),this.mScaleX=t,this.setTransformDirty())}},{key:"scaleY",get:function(){return this.mScaleY},set:function(t){this.mScaleY!=t&&(d.assert(!isNaN(t),"Value cannot be NaN"),this.mScaleY=t,this.setTransformDirty())}},{key:"scale",get:function(){return this.scaleX},set:function(t){this.mScaleX!=t&&(d.assert(!isNaN(t),"Value cannot be NaN"),this.mScaleX=this.mScaleY=t,this.setTransformDirty())}},{key:"skewX",get:function(){return this.mSkewX},set:function(t){this.mSkewX!=t&&(d.assert(!isNaN(t),"Value cannot be NaN"),this.mSkewX=t,this.setTransformDirty())}},{key:"skewY",get:function(){return this.mSkewY},set:function(t){this.mSkewY!=t&&(d.assert(!isNaN(t),"Value cannot be NaN"),this.mSkewY=t,this.setTransformDirty())}},{key:"rotation",get:function(){return this.mRotation},set:function(t){this.mRotation!=t&&(d.assert(!isNaN(t),"Value cannot be NaN"),this.mRotation=t,this.setTransformDirty())}},{key:"parent",get:function(){return this.mParent}},{key:"root",get:function(){for(var t=this;null!=t.mParent;)t=t.mParent;return t}},{key:"stage",get:function(){return!0===this.mAdded?Ye.stage:null}},{key:"width",get:function(){return this.getBounds(this.mParent).width},set:function(t){d.assert(!isNaN(t),"Value cannot be NaN"),this.scaleX=1;var e=this.width;0!=e&&(this.scaleX=t/e)}},{key:"height",get:function(){return this.getBounds(this.mParent).height},set:function(t){d.assert(!isNaN(t),"Value cannot be NaN"),this.scaleY=1;var e=this.height;0!=e&&(this.scaleY=t/e)}},{key:"localWidth",get:function(){return this.getBounds(this,!1).width}},{key:"localHeight",get:function(){return this.getBounds(this,!1).height}},{key:"path",get:function(){return null!==this.mParent?this.mParent.path+"/"+this.mName:this.mName}},{key:"tag",get:function(){return this.mTag},set:function(t){if(this.mTag!==t){var e=this.mTag;this.mTag=t,this.mAdded&&Ye.instance.onTagUpdated(this,e,t)}}},{key:"touchable",set:function(t){var e=this.getComponent(Jt);!0===t?null===e?this.addComponent(new Jt):e.touchable=!0:null!==e&&this.removeComponent(e)},get:function(){var t=this.getComponent(Jt);return null!==t&&!0===t.touchable}}],[{key:"getBoundsWithPoints",value:function(t,e,n){n=n||new x;for(var i=Number.MAX_VALUE,r=-Number.MAX_VALUE,s=Number.MAX_VALUE,o=-Number.MAX_VALUE,a=new w,u=0;u<t.length;u+=2)e.transformXY(t[u],t[u+1],a),i>a.x&&(i=a.x),r<a.x&&(r=a.x),s>a.y&&(s=a.y),o<a.y&&(o=a.y);return n.set(i,s,r-i,o-s),n}},{key:"intersects",value:function(t,e){var n=new w;return t.worldTransformationInverted.transformVector(e,n),t.localBounds.containsXY(n.x,n.y)}},{key:"intersectsAt",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return n=n||new w,w.__cache.set(),t.worldTransformationInverted.transformVector(e,w.__cache),!1!==t.localBounds.containsXY(w.__cache.x,w.__cache.y)&&(n.x=w.__cache.x-t.localBounds.x,n.y=w.__cache.y-t.localBounds.y,!0)}},{key:"intersectsWith",value:function(t,n){for(var i=null,r=t.numChildren-1;r>=0;--r){var s=t.mChildren[r];if(null!=(i=e.intersectsWith(s,n)))return i;if(e.intersects(s,n)){i=s;break}}return null===i&&e.intersects(t,n)?t:null}},{key:"findWithTag",value:function(t){return!1===Ye.instance.mTagCache.hasOwnProperty(t)?null:Ye.instance.mTagCache[t]}},{key:"findComponents",value:function(t,e){d.assert(null!==t,"gameObject cannot be null."),d.assert(null!==e,"type cannot be null.");var n=[];return function t(e,i){for(var r=0;r<e.mComponents.length;r++){var s=e.mComponents[r];s instanceof i&&n.push(s)}for(var o=0;o<e.mChildren.length;o++)t(e.mChildren[o],i)}(t,e),n}},{key:"forEach",value:function(t,n){null==t&&(t=Ye.stage);var i=n(t);if(1!=i)for(var r=0;r<t.mChildren.length;r++)if(1==(i=e.forEach(t.mChildren[r],n)))return}},{key:"find",value:function(t,n){if(null==n&&(n=Ye.stage),n.name===t)return n;for(var i=0;i<n.numChildren;i++){var r=e.find(t,n.getChildAt(i));if(null!=r)return r}return null}},{key:"findById",value:function(t,n){if(null==n&&(n=Ye.stage),n.id===t)return n;for(var i=0;i<n.numChildren;i++){var r=e.findById(t,n.getChildAt(i));if(null!==r)return r}return null}}]),e}();V.ID=0;var X={CLEAN:0,LOCAL:1,WORLD:2,WORLD_INV:4,RENDER:8,RENDER_CACHE:16,ANCHOR:32,BOUNDS:64,DIRTY:16777215,WIRB:78},G={NORMAL:"normal",NO_SCALE:"noScale",FIXED:"fixed",LETTERBOX:"letterBox",COVER:"cover"},z={UNIVERSAL:"universal",LANDSCAPE:"landscape",PORTRAIT:"portrait"},Y=function(t){function e(){var t;return c(this,e),(t=s(this,a(e).call(this))).mName="stage",t.mScaleMode=G.NORMAL,t.mWidth=960,t.mHeight=640,t.mStageWidth=0,t.mStageHeight=0,t.mStageScaleFactor=0,t.mCacheWidth=0,t.mCacheHeight=0,t.mDPR=Ut.getDevicePixelRatio(),t.mOrientation=z.UNIVERSAL,t.mOrientationLock=!0,t.mAdded=!0,Ye.instance.hasSystem(Qt)&&t.addComponent(new Jt),t}return u(e,V),f(e,[{key:"setSize",value:function(t,e){this.mWidth=t,this.mHeight=e,this.__refresh()}},{key:"onUpdate",value:function(){var t=Ye.instance.viewport.size;this.mCacheWidth===t.width&&this.mCacheHeight===t.height||(this.mCacheWidth=t.width,this.mCacheHeight=t.height,this.__refresh())}},{key:"__refresh",value:function(){var t=Ye.instance.viewport.size.clone();if(this.mOrientationLock&&(this.mOrientation===z.LANDSCAPE&&Ut.isPortrait||this.mOrientation===z.PORTRAIT&&Ut.isLandscape)){var e=[t.height,t.width];t.width=e[0],t.height=e[1]}var n=t.width,i=t.height;if(this.mScaleMode===G.FIXED){var r=Math.min(n/this.mWidth,i/this.mHeight);this.mStageWidth=this.mWidth,this.mStageHeight=this.mHeight,this.mScaleX=this.mScaleY=this.mStageScaleFactor=r}else if(this.mScaleMode===G.NORMAL)this.mStageWidth=t.width,this.mStageHeight=t.height,this.mScaleX=this.mScaleY=this.mStageScaleFactor=1;else if(this.mScaleMode===G.LETTERBOX){var s=Math.min(n/this.mWidth,i/this.mHeight),o=this.mWidth*s,a=this.mHeight*s;this.mX=(n-o)/2,this.mY=(i-a)/2,this.mStageWidth=this.mWidth,this.mStageHeight=this.mHeight,this.mScaleX=this.mScaleY=this.mStageScaleFactor=s}else if(this.mScaleMode===G.COVER){var u=Math.max(n/this.mWidth,i/this.mHeight),h=this.mWidth*u,l=this.mHeight*u;this.mX=(n-h)/2,this.mY=(i-l)/2,this.mStageWidth=this.mWidth,this.mStageHeight=this.mHeight,this.mScaleX=this.mScaleY=this.mStageScaleFactor=u}else this.mScaleMode===G.NO_SCALE?(this.mStageWidth=t.width*this.mDPR,this.mStageHeight=t.height*this.mDPR,this.mScaleX=this.mScaleY=this.mStageScaleFactor=1/this.mDPR):d.error("Not supported stage scale mode.");this.mStageWidth=Math.round(this.mStageWidth),this.mStageHeight=Math.round(this.mStageHeight),this.mX=Math.round(this.mX),this.mY=Math.round(this.mY),Ye.driver.__onResize(null,null),this.setTransformDirty(),this.post(N.RESIZE)}},{key:"getBounds",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],!(arguments.length>1&&void 0!==arguments[1])||arguments[1];var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return(t=t||new x).set(-this.mX/this.mStageScaleFactor,-this.mY/this.mStageScaleFactor,this.mStageWidth+2*this.mX/this.mStageScaleFactor,this.mStageHeight+2*this.mY/this.mStageScaleFactor)}},{key:"onGetLocalBounds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return(t=t||new x).set(0,0,this.mStageWidth,this.mStageHeight)}},{key:"removeFromParent",value:function(){d.error("Not allowed.")}},{key:"orientation",get:function(){return this.mOrientation},set:function(t){this.mOrientation=t,this.__refresh()}},{key:"scaleMode",get:function(){return this.mScaleMode},set:function(t){this.mScaleMode=t,this.__refresh()}},{key:"scaleFactor",get:function(){return this.mStageScaleFactor}},{key:"renderWidth",get:function(){return this.mStageWidth*this.mDPR*this.mStageScaleFactor}},{key:"renderHeight",get:function(){return this.mStageHeight*this.mDPR*this.mStageScaleFactor}},{key:"centerX",get:function(){return.5*this.mStageWidth}},{key:"centerY",get:function(){return.5*this.mStageHeight}},{key:"orientationLock",get:function(){return this.mOrientationLock},set:function(t){this.mOrientationLock=t,this.__refresh()}},{key:"localTransformation",get:function(){if(this.mLocalTransform.set(this.mScaleX,0,0,this.mScaleY,this.mX,this.mY),!1===this.mOrientationLock)return this.mLocalTransform;var t,e;(this.mOrientation===z.LANDSCAPE&&Ut.isPortrait||this.mOrientation===z.PORTRAIT&&Ut.isLandscape)&&(this.mScaleMode===G.LETTERBOX||this.mScaleMode===G.COVER?(t=.5*Ye.instance.viewport.size.width-.5*this.mStageHeight*this.mStageScaleFactor,e=.5*Ye.instance.viewport.size.height+.5*this.mStageWidth*this.mStageScaleFactor):(t=0,e=Ye.instance.viewport.size.height),this.mLocalTransform.rotate(-Math.PI/2),this.mLocalTransform.setTranslation(t,e));return this.mLocalTransform}},{key:"scaleX",set:function(t){d.error("Not allowed.")},get:function(){return 1}},{key:"scaleY",set:function(t){d.error("Not allowed.")},get:function(){return 1}},{key:"pivotOffsetX",set:function(t){d.error("Not allowed.")},get:function(){return 0}},{key:"pivotOffsetY",set:function(t){d.error("Not allowed.")},get:function(){return 0}},{key:"anchorX",set:function(t){d.error("Not allowed.")},get:function(){return 0}},{key:"anchorY",set:function(t){d.error("Not allowed.")},get:function(){return 0}},{key:"x",set:function(t){d.error("Not allowed.")},get:function(){return this.mX/this.mStageScaleFactor}},{key:"y",set:function(t){d.error("Not allowed.")},get:function(){return this.mY/this.mStageScaleFactor}},{key:"rotation",set:function(t){d.error("Not allowed.")},get:function(){return 0}},{key:"width",set:function(t){d.error("Not allowed.")},get:function(){return this.mStageWidth}},{key:"height",set:function(t){d.error("Not allowed.")},get:function(){return this.mStageHeight}},{key:"name",set:function(t){d.error("Not allowed.")},get:function(){return this.mName}}]),e}(),U=function(t){function e(){var t;return c(this,e),(t=s(this,a(e).call(this))).mChanged=!0,t.mCenter=new w,t.mMin=new w,t.mMax=new w,t}return u(e,j),f(e,[{key:"containsPoint",value:function(t){return d.error("Abstract method."),!1}},{key:"refresh",value:function(t,e){}}]),e}(),W=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;c(this,t),this.mId=++t.__ID,this.mNative=e,this.mValid=!1,this.mRegion=new x,this.mUntrimmedRegion=new x,this.mNativeWidth=0,this.mNativeHeight=0,this.mDisplayWidth=0,this.mDisplayHeight=0,this.mRenderWidth=0,this.mRenderHeight=0,this.mScale=r,this.set(e,n,i,r)}return f(t,[{key:"set",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;d.assert(null!=t,"nativeElement cannot be null"),d.assert(!isNaN(i),"scale cannot be NaN"),this.mScale=i,this.mNative=t,this.mNativeWidth=t.naturalWidth||t.videoWidth||t.width,this.mNativeHeight=t.naturalHeight||t.videoHeight||t.height,this.mRegion=e||this.mRegion.set(0,0,this.mNativeWidth,this.mNativeHeight),this.mUntrimmedRegion=n||this.mUntrimmedRegion.set(0,0,this.mRegion.width,this.mRegion.height),this.mDisplayWidth=Math.ceil(this.mUntrimmedRegion.width*this.mScale),this.mDisplayHeight=Math.ceil(this.mUntrimmedRegion.height*this.mScale),this.mRenderWidth=Math.ceil(this.mRegion.width*this.mScale),this.mRenderHeight=Math.ceil(this.mRegion.height*this.mScale),this.mValid=null!=t&&this.mDisplayWidth>0&&this.mDisplayHeight>0}},{key:"width",get:function(){return this.mDisplayWidth}},{key:"height",get:function(){return this.mDisplayHeight}},{key:"scale",get:function(){return this.mScale}},{key:"region",get:function(){return this.mRegion}},{key:"untrimmedRegion",get:function(){return this.mUntrimmedRegion}},{key:"nativeWidth",get:function(){return this.mNativeWidth}},{key:"nativeHeight",get:function(){return this.mNativeHeight}},{key:"displayWidth",get:function(){return this.mDisplayWidth}},{key:"displayHeight",get:function(){return this.mDisplayHeight}},{key:"renderWidth",get:function(){return this.mRenderWidth}},{key:"renderHeight",get:function(){return this.mRenderHeight}},{key:"isValid",get:function(){return this.mValid}},{key:"native",get:function(){return this.mNative}},{key:"id",get:function(){return this.mId}}],[{key:"getScaleFactorFromName",value:function(t){var e=t.indexOf("@");if(-1===e)return 1;var n=t.indexOf("x",e);return parseFloat(t.substring(e+1,n))}},{key:"removeScaleFactorFromName",value:function(t){var e=t.indexOf("@");if(-1===e)return t;var n=t.indexOf("x",e);return t.substring(0,e)+t.substring(n+1)}},{key:"fromBase64String",value:function(e){var n=new Image;return n.src=e,new t(n)}},{key:"fromCanvasAsImage",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image/png",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=new Image;return r.src=e.toDataURL(n,i),new t(r)}},{key:"fromCanvas",value:function(t){return Ye.driver.getTextureFromCanvas(t)}}]),t}();W.__ID=0,W.MISSING_IMAGE_CACHE=null,W.MAX_SIZE=2048;var q=function(t){function e(t,n,i){var r;c(this,e);var o=new Et(t*i,n*i);return(r=s(this,a(e).call(this,o.native))).set(o.native,null,null,1/i),r.renderTarget=o,r}return u(e,W),f(e,[{key:"resize",value:function(t,e,n){this.renderTarget.resize(t*n,e*n),this.set(this.renderTarget.native,null,null,1/n)}},{key:"__dumpToDocument",value:function(){var t=new Image;t.style.position="fixed",t.style.top="0px",t.style.left="0px",t.style.background="#333",t.style.width="256px",t.style.height="auto",t.src=this.mNative.toDataURL("image/png"),document.body.appendChild(t)}}]),e}(),Q=function(t){function e(t,n){var i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return c(this,e),(i=s(this,a(e).call(this,t))).mSubTextures={},i.__parseJson(n,r),i}return u(e,W),f(e,[{key:"__parseJson",value:function(t,e){Math.PI;for(var n in t.frames){var i=t.frames[n],r=new x(i[0],i[1],i[2],i[3]),s=new x(i[4],i[5],i[6],i[7]);this.mSubTextures[n]=new W(this.native,r,s,e)}}},{key:"getTexture",value:function(t){var e=this.mSubTextures[t];return d.assertWarn(void 0!==e,"Texture '".concat(t,"' was not found")),e}},{key:"getTextures",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)||[];if(null===t){for(var i in this.mSubTextures)n.push(this.mSubTextures[i]);return n}var r=[],s=new RegExp("^"+t.split("*").join(".*")+"$");for(var o in this.mSubTextures)s.test(o)&&r.push(o);e.naturalSort(r);for(var a=0;a<r.length;a++)n.push(this.mSubTextures[r[a]]);return n}},{key:"subTextures",get:function(){return this.mSubTextures}}],[{key:"naturalSort",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t.sort(e.__naturalComparer(n))}},{key:"__naturalComparer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(n,i){for(var r=/(-?\d*\.?\d+)/g,s=String(null==t?n:n[t]).split(r),o=String(null==t?i:i[t]).split(r),a=Math.min(s.length,o.length),u=0;u<a;u++){var h=0,l=0;if(e?(h=Math.abs(parseFloat(s[u]))||s[u].toLowerCase(),l=Math.abs(parseFloat(o[u]))||o[u].toLowerCase()):(h=parseFloat(s[u])||s[u].toLowerCase(),l=parseFloat(o[u])||o[u].toLowerCase()),h<l)return-1;if(h>l)return 1}return 0}}}]),e}(),K=function(t){function e(t){var n;return c(this,e),(n=s(this,a(e).call(this))).mUrl=t,n.mData=null,n.mIsLoaded=!1,n.mOwner=null,n}return u(e,M),f(e,[{key:"load",value:function(){}},{key:"abort",value:function(){}},{key:"onLoad",value:function(){this.mIsLoaded=!0,this.post(N.COMPLETE)}},{key:"onError",value:function(){this.mIsLoaded=!1,this.post(N.ERROR)}},{key:"data",get:function(){return this.mData}},{key:"owner",get:function(){return this.mOwner}}]),e}(),J=function(t){function e(t){var n;return c(this,e),(n=s(this,a(e).call(this,t))).mImageElement=new Image,n.mImageElement.crossOrigin="anonymous",n}return u(e,K),f(e,[{key:"load",value:function(){var t=this;this.mImageElement.src=this.mUrl,this.mImageElement.onload=function(){return t.onLoad()},this.mImageElement.onerror=function(){return t.onError()},this.mData=this.mImageElement}},{key:"abort",value:function(){this.mImageElement.onload=this.mImageElement.onabort=this.mImageElement.onerror=function(){},this.mImageElement.src=e.ALT_URL}}]),e}();J.ALT_URL="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAA5JREFUeNpiYmBgAAgwAAAMAAMjcmNcAAAAAElFTkSuQmCC";var Z=function(t){function e(t){var n;return c(this,e),(n=s(this,a(e).call(this,t))).mRequest=new XMLHttpRequest,n.mimeType=void 0,n.responseType="",n}return u(e,K),f(e,[{key:"load",value:function(){var t=this;this.mRequest.open("GET",this.mUrl,!0),""!=this.responseType&&(this.mRequest.responseType=this.responseType),void 0!=this.mRequest.overrideMimeType&&this.mimeType&&this.mRequest.overrideMimeType(this.mimeType),this.mRequest.onreadystatechange=function(){4===t.mRequest.readyState&&(200===t.mRequest.status||0===t.mRequest.status&&t.mRequest.responseText?(""===t.responseType||"text"===t.responseType?t.mData=t.mRequest.responseText:t.mData=t.mRequest.response,t.onLoad()):t.onError())},this.mRequest.send(null)}},{key:"abort",value:function(){this.mRequest.abort()}}]),e}(),$=function(t){function e(t,n,i){var r;return c(this,e),(r=s(this,a(e).call(this,n))).mName=t,r.mTestingFontName="Courier New",r.mIsLocal=i,r.mTestingString="~ GHBDTN,.#$Mlck",r.mCheckDelay=50,r.mTestingElement=r.__getTestingElement(),r.metrics=null,r.mLoaderElement=r.__getLoaderElement(r.mIsLocal),r.mTestingElement.style.fontFamily=r.mTestingFontName,r.mDefaultFontWidth=r.mTestingElement.offsetWidth,r.mTestingElement.style.fontFamily=t+","+r.mTestingFontName,r.mTimeoutHandle=-1,r}return u(e,K),f(e,[{key:"load",value:function(){this.mIsLocal?this.mLoaderElement.innerHTML+="\n @font-face {font-family: ".concat(this.mName,"; src: url(").concat(this.mUrl,");}"):this.mLoaderElement.href=this.mUrl,this.__checkLoadingStatus()}},{key:"abort",value:function(){clearTimeout(this.mTimeoutHandle),this.mTestingElement.parentNode.removeChild(this.mTestingElement)}},{key:"__getLoaderElement",value:function(t){var e=this,n=document.createElement(t?"style":"link");return n.type="text/css",n.media="all",n.rel="stylesheet",n.onerror=function(){e.onError()},document.getElementsByTagName("head")[0].appendChild(n),n}},{key:"__getTestingElement",value:function(){var t=document.createElement("span");return t.style.position="absolute",t.style.top="-9999px",t.style.left="-9999px",t.style.visibility="hidden",t.style.fontSize="250px",t.innerHTML=this.mTestingString,document.body.appendChild(t),t}},{key:"__checkLoadingStatus",value:function(){this.mDefaultFontWidth!==this.mTestingElement.offsetWidth?(this.metrics=L.get(this.mName),this.mTestingElement.parentNode.removeChild(this.mTestingElement),this.onLoad()):this.mTimeoutHandle=setTimeout(this.__checkLoadingStatus.bind(this),this.mCheckDelay)}}]),e}(),tt=function(t){function e(t){var n;return c(this,e),(n=s(this,a(e).call(this))).mName=t,n.mData=null,n.mLoaders=[],n.mNumLoaded=0,n.mIsReady=!1,n}return u(e,M),f(e,[{key:"addLoader",value:function(t){t.mOwner=this,this.mLoaders.push(t),t.on(N.COMPLETE,this.__onLoaderComplete,this),t.on(N.ERROR,this.__onLoaderError,this)}},{key:"__onLoaderComplete",value:function(t){if(this.mNumLoaded++,this.mNumLoaded===this.mLoaders.length){for(var e=0;e<this.mLoaders.length;e++)this.mLoaders[e].off(N.COMPLETE,N.ERROR);this.onAllLoaded()}}},{key:"__onLoaderError",value:function(t){this.abort(),this.post(N.ERROR)}},{key:"onAllLoaded",value:function(){}},{key:"abort",value:function(){this.mNumLoaded=0;for(var t=0;t<this.mLoaders.length;t++){var e=this.mLoaders[t];e.off(N.COMPLETE,N.ERROR),e.abort()}}},{key:"ready",value:function(t){this.mData=t,this.mIsReady=!0,this.post(N.COMPLETE)}},{key:"name",get:function(){return this.mName}},{key:"data",get:function(){return this.mData}},{key:"isReady",get:function(){return this.mIsReady}},{key:"loaders",get:function(){return this.mLoaders}}]),e}(),et=function(t){function e(){return c(this,e),s(this,a(e).apply(this,arguments))}return u(e,tt),e}(),nt=function(t){function e(t,n){var i;return c(this,e),(i=s(this,a(e).call(this,t))).mScale=1/W.getScaleFactorFromName(n),i.mImageLoader=new J(n),i.addLoader(i.mImageLoader),i}return u(e,tt),f(e,[{key:"onAllLoaded",value:function(){r(a(e.prototype),"ready",this).call(this,new W(this.mImageLoader.data,null,null,this.mScale))}}]),e}(),it=function(t){function e(t,n){var i;return c(this,e),(i=s(this,a(e).call(this,t))).mXHR=new Z(n),i.mXHR.mimeType="application/json",i.addLoader(i.mXHR),i}return u(e,tt),f(e,[{key:"onAllLoaded",value:function(){r(a(e.prototype),"ready",this).call(this,JSON.parse(this.mXHR.data))}}]),e}(),rt=function(t){function e(t,n){var i;return c(this,e),(i=s(this,a(e).call(this,t))).mXHR=new Z(n),i.mXHR.mimeType="text/xml",i.addLoader(i.mXHR),i}return u(e,tt),f(e,[{key:"onAllLoaded",value:function(){r(a(e.prototype),"ready",this).call(this,(new DOMParser).parseFromString(this.mXHR.data,"text/xml"))}}]),e}(),st=function(t){function e(t,n,i){var r;return c(this,e),r=s(this,a(e).call(this,t)),!1===i&&(n="https://fonts.googleapis.com/css?family="+t.replace(new RegExp(" ","g"),"+")),r.mLoader=new $(t,n,i),r.addLoader(r.mLoader),r}return u(e,tt),f(e,[{key:"onAllLoaded",value:function(){r(a(e.prototype),"ready",this).call(this)}}]),e}(),ot=function(t){function e(t,n,i){var r;return c(this,e),(r=s(this,a(e).call(this,t))).mScale=1/W.getScaleFactorFromName(n),r.mImageLoader=new J(n),r.mXHR=new Z(i),r.mXHR.mimeType="application/json",r.addLoader(r.mImageLoader),r.addLoader(r.mXHR),r}return u(e,tt),f(e,[{key:"onAllLoaded",value:function(){r(a(e.prototype),"ready",this).call(this,new Q(this.mImageLoader.data,JSON.parse(this.mXHR.data),this.mScale))}}]),e}(),at=function(t){function e(t,n,i){var r;return c(this,e),(r=s(this,a(e).call(this,t))).mScale=1/W.getScaleFactorFromName(n),r.mImageLoader=new J(n),r.mXHR=new Z(i),r.mXHR.mimeType="text/xml",r.addLoader(r.mImageLoader),r.addLoader(r.mXHR),r}return u(e,tt),f(e,[{key:"onAllLoaded",value:function(){var t=(new DOMParser).parseFromString(this.mXHR.data,"text/xml"),n=new W(this.mImageLoader.data,null,null,this.mScale);r(a(e.prototype),"ready",this).call(this,e.parse(t,n))}}],[{key:"parse",value:function(t,e){var n=new ut;n.texture=e,n.xml=t;var i=t.getElementsByTagName("info")[0],r=t.getElementsByTagName("common")[0];n.name=i.getAttribute("face"),n.size=parseInt(i.getAttribute("size"),10),n.lineHeight=parseInt(r.getAttribute("lineHeight"),10),n.baseline=parseInt(r.getAttribute("base"),10),n.chars={};for(var s=t.getElementsByTagName("char"),o=0;o<s.length;o++){var a=s[o],u=parseInt(a.getAttribute("id"),10),h=parseInt(a.getAttribute("x"),10)+e.region.x,l=parseInt(a.getAttribute("y"),10)+e.region.y,c=parseInt(a.getAttribute("width"),10),m=parseInt(a.getAttribute("height"),10),f=parseInt(a.getAttribute("xoffset"),10),d=parseInt(a.getAttribute("yoffset"),10),v=parseInt(a.getAttribute("xadvance"),10),y=new x(h,l,c,m),p=new ht;p.texture=new W(e.native,y),p.xOffset=f,p.yOffset=d,p.width=c,p.height=m,p.xAdvance=v,n.chars[u]=p}for(var g=t.getElementsByTagName("kerning"),k=0;k<g.length;k++){var b=g[k],_=parseInt(b.getAttribute("first"),10),w=parseInt(b.getAttribute("second"),10),C=parseInt(b.getAttribute("amount"),10);n.chars[w]&&(n.chars[w].kerning[_]=C)}return n}}]),e}(),ut=function t(){c(this,t),this.texture=null,this.xml=null,this.name="",this.size=0,this.lineHeight=0,this.chars={},this.baseline=0},ht=function t(){c(this,t),this.texture=null,this.xOffset=0,this.yOffset=0,this.width=0,this.height=0,this.xAdvance=0,this.kerning={}},lt=function(t){function e(t,n){var i;return c(this,e),i=s(this,a(e).call(this,t)),!1===Ut.webAudioSupported?s(i):!1===Ye.instance.hasSystem(ee)?(d.warn("[SoundAsset] Loading sound files without MasterAudio system."),s(i)):(i.mXHR=new Z(n),i.mXHR.responseType="arraybuffer",i.addLoader(i.mXHR),i)}return u(e,tt),f(e,[{key:"onAllLoaded",value:function(){var t=this,n=this.mXHR.data;ee.context.decodeAudioData(n,function(n){r(a(e.prototype),"ready",t).call(t,new oe(n))})}}]),e}(),ct=function(t){function e(t,n,i){var r;return c(this,e),r=s(this,a(e).call(this,t)),!1===Ut.webAudioSupported?s(r):!1===Ye.instance.hasSystem(ee)?(d.warn("[SoundAsset] Loading sound files without MasterAudio system."),s(r)):(r.mAudioXHR=new Z(n),r.mAudioXHR.responseType="arraybuffer",r.addLoader(r.mAudioXHR),r.mDataXHR=new Z(i),r.mDataXHR.mimeType="application/json",r.mDataXHR.responseType="json",r.addLoader(r.mDataXHR),r)}return u(e,tt),f(e,[{key:"onAllLoaded",value:function(){var t=this,n=this.mAudioXHR.data;ee.context.decodeAudioData(n,function(n){r(a(e.prototype),"ready",t).call(t,new ae(n,t.mDataXHR.data))})}}]),e}(),mt=function(t){function e(t,n,i,r,o){var u;return c(this,e),(u=s(this,a(e).call(this,t))).mBakeSelf=i,u.mBakeChildren=r,u.mNamesToBake=r&&o?o:[],u.mGraphicsData=null,u.mXHR=new Z(n),u.mXHR.mimeType="application/json",u.addLoader(u.mXHR),u}return u(e,tt),f(e,[{key:"onAllLoaded",value:function(){var t=JSON.parse(this.mXHR.data),n=new Xe;this.mGraphicsData=n.parse(t),this.mGraphicsData.name=this.name,r(a(e.prototype),"ready",this).call(this,this.mGraphicsData)}},{key:"bakeTextures",value:function(){var t={},e=this.mNamesToBake;if(this.mBakeChildren&&0===e.length){!function t(n){if(0!==(n=n).length)for(var i=0,r=n.length;i<r;i++)n[i].name&&e.push(n[i].name),t(n[i].mNodes)}(this.mGraphicsData.mNodes)}this.mBakeSelf&&e.unshift(this.mGraphicsData.name);for(var n=0,i=e.length;n<i;n++){var r=e[n],s=this.mGraphicsData.searchNode(r);if(s){var o=new Lt(s,r!==this.mGraphicsData.name),a=1/Ye.driver.renderScaleFactor,u=new q(o.width,o.height,1);Ye.driver.render(o,u,(new C).scale(a,a)),t[r]=u}else d.warn("[BVGAsset] GraphicsData node with id '".concat(r,"' not found."))}return t}}]),e}(),ft={NONE:"none",LOADING:"loading",FINISHED:"finished"},dt=function(t){function e(){var t;return c(this,e),(t=s(this,a(e).call(this))).mDefaultPath="",t.mTotalLoaded=0,t.mTotalPending=0,t.mTotalErrors=0,t.mIsAllLoaded=!1,t.mLoadingProgress=0,t.mQueue=[],t.mLoadersQueue=[],t.mTextures={},t.mGraphicsData={},t.mVectorTextures={},t.mAtlases={},t.mJsons={},t.mXMLs={},t.mSounds={},t.mSoundAtlases={},t.mFonts={},t.mBitmapFonts={},t.mCustomAssets={},t.mState=ft.NONE,t.mDictionary={},t}return u(e,M),f(e,[{key:"addTexture",value:function(t,e){this.mTextures[t]=e}},{key:"enqueueImage",value:function(t,e){this.__validateState(),this.__validateName(t),this.mQueue.push(new nt(t,this.mDefaultPath+e))}},{key:"enqueueAtlas",value:function(t,e,n){this.__validateState(),this.__validateName(t),this.mQueue.push(new ot(t,this.mDefaultPath+e,this.mDefaultPath+n))}},{key:"enqueueBitmapFont",value:function(t,e,n){this.__validateState(),this.__validateName(t),this.mQueue.push(new at(t,this.mDefaultPath+e,this.mDefaultPath+n))}},{key:"enqueueXML",value:function(t,e){this.__validateState(),this.__validateName(t),this.mQueue.push(new rt(t,this.mDefaultPath+e))}},{key:"enqueueJSON",value:function(t,e){this.__validateState(),this.__validateName(t),this.mQueue.push(new it(t,this.mDefaultPath+e))}},{key:"enqueueVector",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.__validateState(),this.__validateName(t),this.mQueue.push(new mt(t,this.mDefaultPath+e,n,i,r))}},{key:"enqueueSound",value:function(t,e){this.__validateState(),this.__validateName(t),this.mQueue.push(new lt(t,this.mDefaultPath+e))}},{key:"enqueueSoundAtlas",value:function(t,e,n){this.__validateState(),this.__validateName(t),this.mQueue.push(new ct(t,this.mDefaultPath+e,this.mDefaultPath+n))}},{key:"enqueueFont",value:function(t,e){this.__validateState(),this.__validateName(t),this.mQueue.push(new st(t,this.mDefaultPath+e,!0))}},{key:"enqueueGoogleFont",value:function(t){this.__validateState(),this.__validateName(t),this.mQueue.push(new st(t,"",!1))}},{key:"enqueueCustomAsset",value:function(t){this.__validateState(),this.mQueue.push(t)}},{key:"loadQueue",value:function(){this.__validateState(),this.mState=ft.LOADING;for(var t=0;t<this.mQueue.length;t++){var e,n=this.mQueue[t];if(n.loaders.length>0)n.on(N.COMPLETE,this.onAssetLoaded,this),n.on(N.ERROR,this.onAssetError,this),(e=this.mLoadersQueue).push.apply(e,l(n.loaders)),this.mTotalPending++}for(var i=0;i<this.mLoadersQueue.length;i++){this.mLoadersQueue[i].load()}}},{key:"onAssetLoaded",value:function(t){this.mTotalLoaded++,this.mLoadingProgress=this.mTotalLoaded/this.mTotalPending;var e=t.sender;if(e.off(N.COMPLETE,N.ERROR),e.constructor===nt)this.mTextures[e.name]=e.data;else if(e.constructor===ot)this.mAtlases[e.name]=e.data;else if(e.constructor===it)this.mJsons[e.name]=e.data;else if(e.constructor===lt)this.mSounds[e.name]=e.data;else if(e.constructor===ct)this.mSoundAtlases[e.name]=e.data;else if(e.constructor===st)this.mFonts[e.name]=e.data;else if(e.constructor===rt)this.mXMLs[e.name]=e.data;else if(e.constructor===at)this.mBitmapFonts[e.name]=e.data;else if(e.constructor===mt){this.mGraphicsData[e.name]=e.data;var n=e.bakeTextures();for(var i in n)n.hasOwnProperty(i)&&(i!==e.name&&this.__validateName(i),this.mVectorTextures[i]=n[i])}else e instanceof et?this.mCustomAssets[e.name]=e.data:d.error("[AssetManager] Unable to handle asset type ".concat(e,"."));this.post(N.PROGRESS,this.mLoadingProgress),this.mTotalLoaded===this.mTotalPending&&(this.mQueue.splice(0,this.mQueue.length),this.mLoadersQueue.splice(0,this.mLoadersQueue.length),this.mState=ft.FINISHED,this.mTotalLoaded=0,this.mTotalErrors=0,this.mIsAllLoaded=!0,this.mDictionary={},this.post(N.COMPLETE))}},{key:"onAssetError",value:function(t){this.mTotalErrors++;var e=this.mTotalLoaded+this.mTotalErrors;this.mLoadingProgress=this.mTotalLoaded/this.mTotalPending;var n=t.sender;n.off(N.COMPLETE,N.ERROR),d.warn("[AssetManager] Error loading asset '".concat(n.name,"'.")),this.post(N.ERROR,n),e===this.mTotalPending&&(this.mQueue.splice(0,this.mQueue.length),this.mLoadersQueue.splice(0,this.mLoadersQueue.length),this.mState=ft.FINISHED,this.mTotalLoaded=0,this.mTotalErrors=0,this.mIsAllLoaded=!0,this.mDictionary={},this.post(N.COMPLETE))}},{key:"getBitmapFont",value:function(t){var e=this.mBitmapFonts[t];return null!=e?e:(d.warn("[AssetManager] BitmapFontData '".concat(t,"' was not found.")),null)}},{key:"getTexture",value:function(t){var e=this.mTextures[t]||this.mVectorTextures[t];if(null!=e)return e;for(var n in this.mAtlases)if(e=this.mAtlases[n].subTextures[t])return e;return d.warn("[AssetManager] Texture '".concat(t,"' was not found.")),null}},{key:"getGraphicsData",value:function(t){var e=this.mGraphicsData[t];if(e)return e;for(var n in this.mGraphicsData)if(e=this.mGraphicsData[n].searchNode(t))return e;return d.warn("[AssetManager] GraphicsData '".concat(t,"' was not found.")),null}},{key:"getTextures",value:function(t){var e=[],n=[],i=new RegExp("^"+t.split("*").join(".*")+"$");for(var r in this.mTextures)i.test(r)&&n.push({name:r,atlas:null,isBakedVector:!1});for(var s in this.mVectorTextures)i.test(s)&&n.push({name:s,atlas:null,isBakedVector:!0});for(var o in this.mAtlases){var a=this.mAtlases[o];for(var u in a.subTextures)i.test(u)&&n.push({name:u,atlas:a,isBakedVector:!1})}Q.naturalSort(n,"name");for(var h=0;h<n.length;h++){var l=n[h];null===l.atlas?!0===l.isBakedVector?e.push(this.mVectorTextures[l.name]):e.push(this.mTextures[l.name]):e.push(l.atlas.mSubTextures[l.name])}return e.length>0?e:null}},{key:"getAtlas",value:function(t){return null!=this.mAtlases[t]?this.mAtlases[t]:(d.warn("[AssetManager] Atlas '".concat(t,"' was not found.")),null)}},{key:"getSound",value:function(t){var e=this.mSounds[t];if(null!=e)return e;for(var n in this.mSoundAtlases)if(null!=(e=this.mSoundAtlases[n].subSounds[t]))return e;return d.warn("[AssetManager] Sound '".concat(t,"' was not found.")),null}},{key:"getSoundAtlas",value:function(t){return this.mSoundAtlases[t]}},{key:"getJSON",value:function(t){return this.mJsons[t]}},{key:"getCustomAsset",value:function(t){return this.mCustomAssets[t]}},{key:"__validateState",value:function(){d.assert(this.mState===ft.NONE||this.mState===ft.FINISHED,"Illegal state.")}},{key:"__validateName",value:function(t){d.assert(null==this.mDictionary[t],"Asset with such name is already added."),this.mDictionary[t]=!0}},{key:"defaultPath",get:function(){return this.mDefaultPath},set:function(t){this.mDefaultPath=t}},{key:"isAllLoaded",get:function(){return this.mIsAllLoaded}},{key:"numErrors",get:function(){return this.mTotalErrors}},{key:"state",get:function(){return this.mState}},{key:"path",get:function(){return"AssetManager"}}]),e}();dt.default=new dt;var vt={AUTO:"auto",NORMAL:"normal",ADD:"add",MULTIPLY:"multiply",SCREEN:"screen",OVERLAY:"overlay",DARKEN:"darken",LIGHTEN:"lighten",COLOR_DODGE:"colorDodge",COLOR_BURN:"colorBurn",HARD_LIGHT:"hardLight",SOFT_LIGHT:"softLight",DIFFERENCE:"difference",EXCLUSION:"exclusion",HUE:"hue",SATURATE:"saturate",COLOR:"color",LUMINOSITY:"luminosity",MASK:"mask",MASK_INV:"maskInv"},yt={auto:"auto",normal:"source-over",add:"lighter",multiply:"multiply",screen:"screen",overlay:"overlay",darken:"darken",lighten:"lighten",colorDodge:"color-dodge",colorBurn:"color-burn",hardLight:"hard-light",softLight:"soft-light",difference:"difference",exclusion:"exclusion",due:"hue",saturate:"saturate",color:"color",luminosity:"luminosity",mask:"source-in",maskInv:"source-out"},pt=function(){function t(){c(this,t),this.gameObject=null,this.parent=null,this.skipChildren=!1,this.skipSelf=!1,this.endPassRequired=!1,this.endPassRequiredAt=-1,this.alpha=1,this.blendMode=vt.NORMAL,this.color=null}return f(t,[{key:"preRender",value:function(t,e){this.endPassRequired=null!==this.gameObject.mClipRect&&!1===this.gameObject.mClipRect.isEmpty,this.skipChildren=!(this.gameObject.mAlpha>0&&!0===this.gameObject.mVisible),this.skipSelf=this.skipChildren}},{key:"begin",value:function(t,e){this.alpha=this.gameObject.mAlpha*this.parent.alpha,this.color=null===this.gameObject.mColor?this.parent.color:this.gameObject.mColor,this.blendMode=this.gameObject.mBlendMode===vt.AUTO?this.parent.blendMode:this.gameObject.mBlendMode}},{key:"upload",value:function(t,e){var n=this.gameObject,i=n.worldTransformation;t.setSnapToPixels(n.snapToPixels),t.setGlobalAlpha(this.alpha),t.setGlobalBlendMode(this.blendMode),t.setTransform(i),!0===this.endPassRequired&&t.beginClip(n.mClipRect,n.mPivotX,n.mPivotY)}},{key:"render",value:function(t,e){}},{key:"end",value:function(t,e){t.endClip(),this.endPassRequiredAt=-1,this.endPassRequired=!1}}],[{key:"getColoredTexture",value:function(e,n){if(16777215===n||null===n)return e;var i=n.toString();if(t.__colorCache.has(e.id,i))return t.__colorCache.get(e.id,i);var r=e.region,s=r.width,o=r.height,a=new Et(s,o),u=a.context;u.fillStyle=b.hexColorToString(n),u.fillRect(0,0,s,o),u.globalCompositeOperation="multiply",u.drawImage(e.native,r.x,r.y,r.width,r.height,0,0,r.width,r.height),u.globalCompositeOperation="destination-atop",u.drawImage(e.native,r.x,r.y,r.width,r.height,0,0,r.width,r.height);var h=new W(a.native,null,e.untrimmedRegion.clone(),e.scale);return t.__colorCache.set(e.id,i,h),h}}]),t}();pt.__colorCache=new y,pt.__dirty=!0,pt.skipUnchangedFrames=!1;var gt=function(){function t(){c(this,t),this.parentRenderers=[],this.endPassParentRenderers=[],this.isBackBufferActive=!0,this.customTransform=null,this.isMasking=!1}return f(t,[{key:"reset",value:function(){this.parentRenderers.splice(0,this.parentRenderers.length),this.endPassParentRenderers.splice(0,this.endPassParentRenderers.length),this.isBackBufferActive=!0,this.customTransform=null}}]),t}(),kt=function(t){function e(){var t;return c(this,e),(t=s(this,a(e).call(this))).texture=null,t.mTransformCache=new C,t.mTransform=null,t.mUseTransformCache=!1,t.mCanvas=document.createElement("canvas"),t.mContext=t.mCanvas.getContext("2d"),t.mContext.lineJoin="round",t.mContext.miterLimit=2,t.mMetrics=null,t}return u(e,pt),f(e,[{key:"preRender",value:function(t,e){this.endPassRequired=null!==this.gameObject.mClipRect&&!1===this.gameObject.mClipRect.isEmpty,this.skipChildren=!(this.gameObject.mAlpha>0&&!0===this.gameObject.mVisible),this.skipSelf=!0===this.skipChildren}},{key:"upload",value:function(t,e){var n=this.gameObject;n.mDirty&X.RENDER_CACHE&&(n.onGetLocalBounds(),this.mMetrics=n.mMetrics),(n.mDirty&X.RENDER_CACHE||n.mDirty&X.RENDER)&&this.updateTransform(),this.mTransform=!0===this.mUseTransformCache?this.mTransformCache:this.gameObject.worldTransformation,t.setSnapToPixels(n.snapToPixels),t.setTransform(this.mTransform),t.setGlobalAlpha(this.alpha),t.setGlobalBlendMode(this.blendMode),!0===this.endPassRequired&&t.beginClip(n.mClipRect,n.mPivotX,n.mPivotY)}},{key:"renderSegment",value:function(t,e,n,i,r,s){var o=this.gameObject,a=r.baselineNormalized*e.style.size;!0===s?(n.lineWidth=e.style.strokeThickness,n.strokeStyle=b.hexColorToString(e.style.strokeColor)):n.fillStyle=b.hexColorToString(e.style.color),n.font="".concat(e.style.weight," ").concat(e.style.style," ").concat(e.style.size,"px ").concat(e.style.family);var u=e.bounds.x-Math.min(t.strokeBounds.x,t.shadowBounds.x),h=a+e.bounds.y-Math.min(t.strokeBounds.y,t.shadowBounds.y);u+=o.padding.x,h+=o.padding.y,"center"===o.align?u+=.5*t.bounds.width-.5*t.lineWidth[e.lineIndex]:"right"===o.align&&(u+=t.bounds.width-t.lineWidth[e.lineIndex]),!0===s?n.strokeText(e.text,u,h):n.fillText(e.text,u,h)}},{key:"render",value:function(t,e){var n=this.gameObject;if(!0===n.mHighQuality&&n.mDirty&X.RENDER&&(n.mDirty^=X.RENDER,n.mDirty|=X.RENDER_CACHE),n.mDirty&X.RENDER_CACHE){n.mDirty^=X.RENDER_CACHE;var i=this.mCanvas,r=this.mContext,s=1;if(r.textBaseline="alphabetic",!0===n.mHighQuality){var o=this.mTransform.data,a=Math.sqrt(o[0]*o[0]+o[2]*o[2]),u=Math.sqrt(o[1]*o[1]+o[3]*o[3]);s=Math.max(a,u)*t.renderScaleFactor}var h=this.mMetrics.strokeBounds.clone();h.scale(s,s),h.union(this.mMetrics.shadowBounds),h.inflate(n.padding.right,n.padding.bottom),i.width=h.width,i.height=h.height;var l=L.get(n.mDefaultStyle.family),c=this.mMetrics.segments;r.save(),r.scale(s,s);for(var m=0;m<c.length;m++)c[m].style.dropShadow&&(r.save(),r.shadowColor=b.intToRGBA(c[m].style.shadowColor,c[m].style.shadowAlpha),r.shadowBlur=c[m].style.shadowBlur,r.shadowOffsetX=c[m].style.shadowDistanceX,r.shadowOffsetY=c[m].style.shadowDistanceY,this.renderSegment(this.mMetrics,c[m],r,t,l,!1),r.restore());for(var f=0;f<c.length;f++){var d=c[f];d.style.strokeThickness>0&&(r.lineJoin="round",r.miterLimit=2,this.renderSegment(this.mMetrics,d,r,t,l,!0))}for(var v=0;v<c.length;v++)this.renderSegment(this.mMetrics,c[v],r,t,l,!1);r.restore(),null===this.texture?this.texture=new W(i,null,null,1/s):this.texture.set(i,null,null,1/s)}}},{key:"updateTransform",value:function(){var t=this.gameObject,e=t.worldTransformation,n=0,i=0,r=Math.min(this.mMetrics.strokeBounds.x,this.mMetrics.shadowBounds.x),s=Math.min(this.mMetrics.strokeBounds.y,this.mMetrics.shadowBounds.y),o=0!==r||0!==s;!1===t.mAutoSize&&("center"===t.align?n=.5*(t.mFieldWidth-this.mMetrics.bounds.width):"right"===t.align&&(n=t.mFieldWidth-this.mMetrics.bounds.width),"middle"===t.mVerticalAlign?i=.5*(t.mFieldHeight-this.mMetrics.bounds.height):"bottom"===t.mVerticalAlign&&(i=t.mFieldHeight-this.mMetrics.bounds.height)),!0===o||!1===t.mAutoSize?(this.mUseTransformCache=!0,e.copyTo(this.mTransformCache),this.mTransformCache.translate(r+n-t.padding.x,s+i-t.padding.y)):!1===t.padding.isEmpty?(this.mUseTransformCache=!0,e.copyTo(this.mTransformCache),this.mTransformCache.translate(-t.padding.x,-t.padding.y)):this.mUseTransformCache=!1}}]),e}(),bt=function(t){function e(){var t;return c(this,e),(t=s(this,a(e).call(this))).mCanvas=document.createElement("canvas"),t.mContext=t.mCanvas.getContext("2d"),t.texture=null,t}return u(e,pt),f(e,[{key:"render",value:function(t,e){var n=this.gameObject;if(null!==n.mText&&n.mDirty&X.RENDER_CACHE){var i=this.mCanvas,r=this.mContext,s=n.mData,o=n.mText,a=n.onGetLocalBounds();n.mDirty^=X.RENDER_CACHE;var u=-1,h=0,l=0;i.width=a.width,i.height=a.height;for(var c=0;c<o.length;c++){var m=o.charCodeAt(c);if(/(?:\r\n|\r|\n)/.test(o.charAt(c)))h=0,l+=s.lineHeight*n.mLineHeight,u=-1;else{var f=s.chars[m];if(null!=f){var d=f.texture;u>=0&&f.kerning[u]&&(h+=f.kerning[u]);var v=d.width,y=d.height,p=d.untrimmedRegion.x+f.xOffset+h,g=d.untrimmedRegion.y+f.yOffset+l;r.drawImage(d.native,d.region.x,d.region.y,v,y,~~p,~~g,v,y),h+=f.xAdvance,u=m}}}null===this.texture?this.texture=new W(i):this.texture.set(i)}}}]),e}(),_t=function(){function t(e,n){c(this,t),this.mWidth=Math.ceil(e),this.mHeight=Math.ceil(n)}return f(t,[{key:"resize",value:function(t,e){this.mWidth=t,this.mHeight=e}},{key:"clear",value:function(){}},{key:"width",get:function(){return this.mWidth},set:function(t){this.mWidth=t}},{key:"height",get:function(){return this.mHeight},set:function(t){this.mHeight=t}}]),t}(),wt=function(t){function e(){return c(this,e),s(this,a(e).call(this))}return u(e,pt),e}(),Ct=function(t){function e(){var t;return c(this,e),(t=s(this,a(e).call(this))).mCacheAsBitmapDirty=!0,t.mCacheAsBitmapMatrixCache=null,t.mCacheTexture=null,t.mCacheBounds=null,t.mIsClipped=!1,t.mIsCached=!1,t.mBakeInvertedMatrix=null,t}return u(e,pt),f(e,[{key:"preRender",value:function(t,e){var n=this.gameObject;if(this.mIsClipped=null!==n.mClipRect,this.endPassRequired=this.mIsClipped,!0===n.mCacheAsBitmap)if(!1===n.mCacheAsBitmapDynamic)!1===this.mIsCached?(this.mIsCached=!0,n.setTransformDirty(),this.__refreshBitmapCache(),this.mCacheAsBitmapDirty=!1,this.endPassRequired=!1):n.mDirty|=X.RENDER;else{var i=n.checkStatic(!0);!0===i&&!0===this.mCacheAsBitmapDirty?(n.setTransformDirty(),this.__refreshBitmapCache(),this.mCacheAsBitmapDirty=!1,this.endPassRequired=!1):!1===i&&(this.mCacheAsBitmapDirty=!0,n.mDirty|=X.RENDER)}this.skipChildren=!0===n.mCacheAsBitmap&&!1===this.mCacheAsBitmapDirty||this.mIsClipped&&n.mClipRect.isEmpty,this.skipSelf=!1,!0===this.skipChildren&&(this.endPassRequired=!1,this.skipSelf=!0)}},{key:"begin",value:function(t,e){var n=this.gameObject;!0===this.skipChildren&&!0===e.isBackBufferActive?(this.alpha=1,this.blendMode=vt.NORMAL,this.color=null,this.skipSelf=n.mAlpha<=0||!1===n.mVisible||this.mIsClipped&&n.mClipRect.isEmpty):(this.alpha=n.mAlpha*this.parent.alpha,this.color=null===n.mColor?this.parent.color:n.mColor,this.blendMode=n.mBlendMode===vt.AUTO?this.parent.blendMode:n.mBlendMode,this.skipChildren=n.mAlpha<=0||!1===n.mVisible,this.skipSelf=!0===this.skipChildren||!1===this.mIsClipped||this.mIsClipped&&n.mClipRect.isEmpty)}},{key:"upload",value:function(t,e){var n=this.gameObject,i=n.worldTransformation;!0===this.skipChildren&&this.mCacheAsBitmapMatrixCache&&(i=this.mCacheAsBitmapMatrixCache,!1===n.mCacheAsBitmapDynamic&&(i=(new C).append(this.gameObject.worldTransformation).append(this.mBakeInvertedMatrix).append(this.mCacheAsBitmapMatrixCache))),!0!==this.skipChildren&&!0!==this.endPassRequired||(t.setSnapToPixels(n.snapToPixels),t.setTransform(i),t.setGlobalAlpha(this.alpha),t.setGlobalBlendMode(this.blendMode)),!0===this.endPassRequired&&t.beginClip(n.mClipRect,n.mPivotX,n.mPivotY)}},{key:"render",value:function(t,e){!0===this.skipChildren&&!0===e.isBackBufferActive&&t.drawTexture(this.mCacheTexture)}},{key:"__refreshBitmapCache",value:function(){var t=this.gameObject.getBounds(Ye.stage,!0),e=Ye.stage.scaleFactor,n=Ye.driver.renderScaleFactor*e,i=C.pool.get();i.set(1,0,0,1,~~(-t.x*e-Ye.stage.mX),~~(-t.y*e-Ye.stage.mY)),!0===this.mIsClipped&&!0===this.skipChildren&&(i.data[4]+=this.gameObject.mPivotX*e,i.data[5]+=this.gameObject.mPivotY*e),null===this.mCacheBounds&&(this.mCacheBounds=new x),t.copyTo(this.mCacheBounds),t.width*=n,t.height*=n,null===this.mCacheTexture?this.mCacheTexture=new q(t.width,t.height,1):this.mCacheTexture.resize(t.width,t.height,1),Ye.driver.render(this.gameObject,this.mCacheTexture,i),C.pool.release(i),null===this.mCacheAsBitmapMatrixCache&&(this.mCacheAsBitmapMatrixCache=new C),this.mCacheAsBitmapMatrixCache.copyFrom(i),this.mCacheAsBitmapMatrixCache.scale(1/Ye.driver.renderScaleFactor,1/Ye.driver.renderScaleFactor),this.mCacheAsBitmapMatrixCache.data[4]=-this.mCacheAsBitmapMatrixCache.data[4],this.mCacheAsBitmapMatrixCache.data[5]=-this.mCacheAsBitmapMatrixCache.data[5],this.mBakeInvertedMatrix=this.gameObject.worldTransformationInverted.clone()}}]),e}(),xt=function(t){function e(){return c(this,e),s(this,a(e).apply(this,arguments))}return u(e,kt),f(e,[{key:"render",value:function(t,n){r(a(e.prototype),"render",this).call(this,t,n),t.drawTexture(pt.getColoredTexture(this.texture,this.gameObject.mColor))}}]),e}(),St=function(t){function e(){return c(this,e),s(this,a(e).apply(this,arguments))}return u(e,bt),f(e,[{key:"render",value:function(t,n){r(a(e.prototype),"render",this).call(this,t,n),t.drawTexture(pt.getColoredTexture(this.texture,this.gameObject.mColor))}}]),e}(),Tt=function(t){function e(){var t;return c(this,e),(t=s(this,a(e).call(this))).isLocal=!1,t.__tmpLocal=new C,t.__tmpWorld=new C,t}return u(e,pt),f(e,[{key:"preRender",value:function(t,e){var n=this.gameObject;this.skipChildren=!(n.mAlpha>0&&n.mTextures.length>0&&!0===n.mVisible),this.skipSelf=!(n.mTextures.length>0&&n.mParticles.length>0)}},{key:"render",value:function(t,e){var n=this.gameObject;t.setSnapToPixels(n.snapToPixels);var i=n.mParticles.length,r=this.__tmpLocal,s=this.__tmpWorld;if(r.identity(),n.sortOrder===Wt.FRONT_TO_BACK)for(var o=0;o<i;o++)this.__renderParticle(n.mParticles[o],r,s,t);else for(var a=i-1;a>0;a--)this.__renderParticle(n.mParticles[a],r,s,t)}},{key:"__renderParticle",value:function(t,e,n,i){var r=this.gameObject,s=r.textures[t.textureIndex],o=s.displayWidth*t.anchorX,a=s.displayHeight*t.anchorY;if(0===t.r){var u=t.x-o*t.scaleX,h=t.y-a*t.scaleY;e.set(t.scaleX,0,0,t.scaleY,u,h)}else{var l=Math.cos(t.r),c=Math.sin(t.r),m=t.scaleX*l,f=t.scaleX*c,d=t.scaleY*-c,v=t.scaleY*l,y=t.x-o*m-a*d,p=t.y-o*f-a*v;e.set(m,f,d,v,y,p)}!0===r.mIsLocal?(n.identity(),n.copyFrom(e),n.prepend(r.worldTransformation)):(n.copyFrom(r.mSpace.worldTransformation),n.append(e)),i.setGlobalAlpha(r.mAlpha*t.alpha),i.setTransform(n),i.drawTexture(pt.getColoredTexture(s,null===t.color?r.mColor:t.color))}}]),e}(),At=function(t){function e(){var t;return c(this,e),(t=s(this,a(e).call(this))).pattern=null,t.patternTexture=null,t.sliceTextureCache=null,t.sizeWidthCache=null,t.sizeHeightCache=null,t.textureCache=null,t}return u(e,pt),f(e,[{key:"preRender",value:function(t,e){var n=this.gameObject,i=null!==n.mClipRect&&n.mClipRect.isEmpty;this.endPassRequired=null!==n.mClipRect&&!n.mClipRect.isEmpty,this.skipChildren=i||n.mAlpha<=0||!1===n.mVisible,this.skipSelf=i||null===n.mTexture||n.mAlpha<=0||!1===n.mVisible}},{key:"renderSlice9Grid",value:function(t,e,n){var i=t.mDevicePixelRatio,r=e.width*this.gameObject.mScaleX,s=e.height*this.gameObject.mScaleY;if(this.textureCache===e&&this.sizeWidthCache===r&&this.sizeHeightCache===s)return this.sliceTextureCache;this.textureCache=e,this.sizeWidthCache=r,this.sizeHeightCache=s;var o=e.region.x,a=e.region.y,u=e.region.width,h=e.region.height,l=e.untrimmedRegion.x*i,c=e.untrimmedRegion.y*i;null===this.sliceTextureCache?this.sliceTextureCache=new q(r,s,1/e.scale):this.sliceTextureCache.resize(r,s,1/e.scale);var m=this.sliceTextureCache.renderTarget.context,f=Math.min(this.gameObject.scaleX,this.gameObject.scaleY);f<=1&&(m.setTransform(f,0,0,f,0,0),r/=f,s/=f);var d=n.x/e.scale,v=n.y/e.scale,y=u-n.right/e.scale,p=h-n.bottom/e.scale,g=o+u-y,k=l+r/e.scale-y,b=a+h-p,_=c+s/e.scale-p;m.drawImage(e.native,o,a,d,v,l,c,d,v),m.drawImage(e.native,g,a,y,v,k,c,y,v),m.drawImage(e.native,g,b,y,p,k,_,y,p),m.drawImage(e.native,o,b,d,p,l,_,d,p);var w=o+d,C=l+d,x=a+v,S=c+v,T=o+u-y,A=l+r/e.scale-y,E=a+h-p,P=c+s/e.scale-p,R=u-d-y,N=r/e.scale-d-y,O=h-v-p,M=s/e.scale-v-p;return m.drawImage(e.native,w,a,R,v,C,c,N,v),m.drawImage(e.native,T,x,y,O,A,S,y,M),m.drawImage(e.native,w,E,R,p,C,P,N,p),m.drawImage(e.native,o,x,d,O,l,S,d,M),m.drawImage(e.native,w,x,R,O,C,S,N,M),this.sliceTextureCache}},{key:"render",value:function(t,e){var n=t.mCtx,i=this.gameObject,r=pt.getColoredTexture(i.mTexture,this.color);if(null!==i.mSlice9grid){var s=this.gameObject.worldTransformation.data,o=C.pool.get().set(s[0]/this.gameObject.scaleX,s[1]/this.gameObject.scaleX,s[2]/this.gameObject.scaleY,s[3]/this.gameObject.scaleY,s[4],s[5]);t.setTransform(o),C.pool.release(o),r=this.renderSlice9Grid(t,r,i.mSlice9grid)}if(null===i.mTiling)t.drawTexture(r);else{if(null===this.pattern||this.patternTexture!==r){var a=new Et(r.width,r.height),u=r.region,h=r.untrimmedRegion;a.context.drawImage(r.native,u.x,u.y,u.width,u.height,h.x,h.y,u.width,u.height),this.pattern=n.createPattern(a.native,"repeat"),this.patternTexture=r}n.fillStyle=this.pattern;var l=t.renderScaleFactor,c=i.worldTransformation.clone();c.scale(i.tiling.scaleX*l,i.tiling.scaleY*l),c.translate(i.tiling.wrapX/l,i.tiling.wrapY/l),t.setTransform(c),n.fillRect(-i.tiling.wrapX,-i.tiling.wrapY,i.tiling.width/i.tiling.scaleX,i.tiling.height/i.tiling.scaleY),n.fillStyle="black"}}}]),e}(),Et=function(t){function e(t,n){var i;return c(this,e),(i=s(this,a(e).call(this,t,n))).mCanvas=document.createElement("canvas"),i.mCtx=i.mCanvas.getContext("2d"),i.resize(t,n),i}return u(e,_t),f(e,[{key:"resize",value:function(t,e){this.mCanvas.width=Math.ceil(t),this.mCanvas.height=Math.ceil(e)}},{key:"clear",value:function(){this.mCtx.setTransform(1,0,0,1,0,0),this.mCtx.clearRect(0,0,this.mCanvas.width,this.mCanvas.height)}},{key:"width",get:function(){return this.mCanvas.width},set:function(t){this.mCanvas.width=t}},{key:"height",get:function(){return this.mCanvas.height},set:function(t){this.mCanvas.height=t}},{key:"native",get:function(){return this.mCanvas}},{key:"context",get:function(){return this.mCtx}}]),e}(),Pt=function(t){function e(){return c(this,e),s(this,a(e).call(this))}return u(e,wt),f(e,[{key:"render",value:function(t,e){var n=this.gameObject;this.__drawCommandBuffer(t),null!==n.mColor&&16777215!==n.mColor&&(t.context.globalCompositeOperation="multiply",this.__drawCommandBuffer(t,n.mColor))}},{key:"__drawCommandBuffer",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.gameObject,i=t.context;i.save(),i.beginPath();var r=C.pool.get().copyFrom(n.worldTransformation);r.translate(-n.mDataOffsetX,-n.mDataOffsetY),this.__renderNode(t,e,n.mGraphicsData,r),C.pool.release(r),i.restore()}},{key:"__renderNode",value:function(t,e,n,i){var r=n.mCommandQueue,s=t.context,o=r.length,a=t.renderScaleFactor,u=n.mPivotX,h=n.mPivotY;i=i.clone().append(n.mTransform),t.setTransform(i);for(var l=0;l<o;l++){var c=r[l];switch(c.type){case jt.LINE_STYLE:s.lineWidth=c.getNumber(0)*a,s.strokeStyle=b.intToRGBA(null===e?c.getNumber(1):e,c.getNumber(2)),s.lineCap=c.getString(3),s.lineJoin=c.getString(4),s.miterLimit=c.getNumber(5);break;case jt.FILL_STYLE:s.fillStyle=b.intToRGBA(null===e?c.getNumber(0):e,c.getNumber(1));break;case jt.FILL_GRD:var m=c.getObject(0),f=m.native;if(!f){var v=Ye.driver.renderScaleFactor,y=[];for(var p in f=m.native=s.createLinearGradient(m.x0*v,m.y0*v,m.x1*v,m.y1*v),m.stops)y.push({percent:parseFloat(p),color:m.stops[p]});y.sort(function(t,e){return t.percent-e.percent});for(var g=0,k=y.length;g<k;g++){var _=y[g];f.addColorStop(_.percent,_.color)}}s.fillStyle=f;break;case jt.FILL_PATTERN:var w=c.getObject(0),C=w.native;C||(C=w.native=s.createPattern(w.image,w.repetition)),s.fillStyle=C;break;case jt.ARC:s.arc(c.getNumber(0)*a-u,c.getNumber(1)*a-h,c.getNumber(2)*a,c.getNumber(3),c.getNumber(4),c.getBoolean(5));break;case jt.RECT:s.rect(c.getNumber(0)*a-u,c.getNumber(1)*a-h,c.getNumber(2)*a,c.getNumber(3)*a);break;case jt.ROUNDED_RECT:var x=c.getNumber(0),S=c.getNumber(1),T=c.getNumber(2),A=c.getNumber(3),E=c.getNumber(4);s.moveTo(x*a-u,(S+E)*a-h),s.quadraticCurveTo(x*a-u,S*a-h,(x+E)*a-u,S*a-h),s.lineTo((x+T-E)*a-u,S*a-h),s.quadraticCurveTo((x+T)*a-u,S*a-h,(x+T)*a-u,(S+E)*a-h),s.lineTo((x+T)*a-u,(S+A-E)*a-h),s.quadraticCurveTo((x+T)*a-u,(S+A)*a-h,(x+T-E)*a-u,(S+A)*a-h),s.lineTo((x+E)*a-u,(S+A)*a-h),s.quadraticCurveTo(x*a-u,(S+A)*a-h,x*a-u,(S+A-E)*a-h),s.closePath();break;case jt.BEZIER_CURVE_TO:s.bezierCurveTo(c.getNumber(0)*a-u,c.getNumber(1)*a-h,c.getNumber(2)*a-u,c.getNumber(3)*a-h,c.getNumber(4)*a-u,c.getNumber(5)*a-h);break;case jt.QUADRATIC_CURVE_TO:s.quadraticCurveTo(c.getNumber(0)*a-u,c.getNumber(1)*a-h,c.getNumber(2)*a-u,c.getNumber(3)*a-h);break;case jt.BEGIN_PATH:s.beginPath();break;case jt.CLOSE_PATH:s.closePath();break;case jt.FILL:s.fill(!0===c.getBoolean(0)?"nonzero":"evenodd");break;case jt.LINE_TO:s.lineTo(c.getNumber(0)*a-u,c.getNumber(1)*a-h);break;case jt.MOVE_TO:s.moveTo(c.getNumber(0)*a-u,c.getNumber(1)*a-h);break;case jt.LINE_DASH:s.setLineDash(c.getNumber(0));break;case jt.STROKE:s.stroke();break;case jt.BOUNDS:break;default:d.error("Unsupported canvas command '".concat(c.type,"'."))}}for(var P=0,R=n.mNodes.length;P<R;P++)this.__renderNode(t,e,n.mNodes[P],i)}}]),e}(),Rt=function(){function t(e,n,i){c(this,t),this.mContainerElement=e,this.mClientWidth=n,this.mClientHeight=i,this.mTransform=new C,this.mIdentityMatrix=new C,this.mActiveSession=new gt,this.mSessions=[],this.mLastRenderTexture=null,this.mSnapToPixels=!1,this.mDevicePixelRatio=!0===Ye.instance.useHiDPR?Ut.getDevicePixelRatio():1,this.mGlobalBlendMode=vt.AUTO,this.mGlobalAlpha=1,this.mStageRenderer=new pt,this.mRendererMap={},Ye.instance.viewport.on("resize",this.__onResize,this)}return f(t,[{key:"render",value:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2]}},{key:"getRenderer",value:function(t,e){return null}},{key:"__saveSession",value:function(){var e=t.sessionPool.get();return e.reset(),this.mSessions.push(e),this.mActiveSession=e,e}},{key:"__restoreSession",value:function(){this.mSessions.pop(),this.mActiveSession=this.mSessions[this.mSessions.length-1]||null}},{key:"__collectParentRenderables",value:function(t,e,n){var i=e;if(null!==i){var r=[];for(i=i.parent;null!==i;i=i.parent)r.splice(0,0,i);for(var s=0;s<r.length;s++){var o=(i=r[s]).mRenderer;null!=o&&(t.parentRenderers.push(o),o.parent=n,n=o,o.preRender(this,t),!0===o.endPassRequired&&t.endPassParentRenderers.push(o))}}}},{key:"beginClip",value:function(t,e,n){}},{key:"endClip",value:function(){}},{key:"__onResize",value:function(t,e){pt.__dirty=!0;var n=this.mContainerElement.clientWidth,i=this.mContainerElement.clientHeight;this.mClientWidth=n,this.mClientHeight=i}},{key:"start",value:function(){}},{key:"beginFrame",value:function(){this.clear()}},{key:"endFrame",value:function(){}},{key:"getTextureFromCanvas",value:function(t){return null}},{key:"setTransform",value:function(t){this.mTransform=t}},{key:"setSnapToPixels",value:function(t){this.mSnapToPixels=t}},{key:"getGlobalAlpha",value:function(){return this.mGlobalAlpha}},{key:"setGlobalAlpha",value:function(t){this.mGlobalAlpha=t}},{key:"getGlobalBlendMode",value:function(){return this.mGlobalBlendMode}},{key:"setGlobalBlendMode",value:function(t){this.mGlobalBlendMode=t}},{key:"drawTexture",value:function(t){}},{key:"drawTextureWithOffset",value:function(t,e,n){}},{key:"clear",value:function(){}},{key:"context",get:function(){return null}},{key:"renderScaleFactor",get:function(){return this.mDevicePixelRatio}}]),t}();Rt.sessionPool=new p(gt);var Nt=function(t){function e(t,n,i){var r;return c(this,e),(r=s(this,a(e).call(this,t,n,i))).mCtx=null,r.__createCanvas(),r.mRendererMap={DisplayObject:Ct,Sprite:At,Emitter:Tt,Text:xt,BitmapText:St,Graphics:Pt},r}return u(e,Rt),f(e,[{key:"getRenderer",value:function(t,e){var n=new this.mRendererMap[t];return n.gameObject=e,n}},{key:"render",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=null===e;if(!0!==pt.skipUnchangedFrames||!0!==r||!1!==pt.__dirty){var s=this.__saveSession();s.isBackBufferActive=r,s.customTransform=n,s.isMasking=i;var o=this.mStageRenderer;if(null!==e){this.mLastRenderTexture=this.mCtx,this.mCtx=e.renderTarget.context,this.mGlobalAlpha=-1,this.mGlobalBlendMode=null,o.alpha=1,o.blendMode=vt.NORMAL,o.color=null,this.__collectParentRenderables(s,t,this.mStageRenderer);for(var a=0,u=s.parentRenderers.length;a!==u;a++){var h=s.parentRenderers[a];h.begin(this,s),!1===h.skipSelf&&h.upload(this,s)}s.parentRenderers.length>0&&(o=s.parentRenderers[s.parentRenderers.length-1])}if(this.renderObject(t,s,o),null!==e){for(;s.endPassParentRenderers.length>0;)s.endPassParentRenderers.pop().end(this,s);this.mCtx=this.mLastRenderTexture,this.mGlobalAlpha=-1,this.mGlobalBlendMode=null}this.__restoreSession()}}},{key:"renderObject",value:function(t,e,n){var i=!1,r=t.mRenderer;if(null!=r){r.parent=n,r.preRender(this,e);for(var s=0;s<t.mComponents.length;s++){t.mComponents[s].onRender()}t.onRender(),r.begin(this,e),!1!==r.skipSelf&&!0!==e.isMasking||(r.upload(this,e),r.render(this,e)),i=r.skipChildren}if(!1===i||!0===e.isMasking)for(var o=0;o<t.mChildren.length;o++)this.renderObject(t.mChildren[o],e,r||n);null!=r&&!0===r.endPassRequired&&r.end(this,e)}},{key:"__createCanvas",value:function(){var t=this.mDevicePixelRatio,e=document.createElement("canvas");e.style.position="absolute",e.id="canvas",e.width=this.mClientWidth*t,e.height=this.mClientHeight*t,e.style.width=this.mClientWidth+"px",e.style.height=this.mClientHeight+"px",this.mContainerElement.appendChild(e),this.mCtx=e.getContext("2d")}},{key:"__onResize",value:function(t,n){r(a(e.prototype),"__onResize",this).call(this,t,n),this.mGlobalBlendMode=null,this.mGlobalAlpha=-1;var i=this.mDevicePixelRatio;this.mCtx.canvas.width=this.mClientWidth*i,this.mCtx.canvas.height=this.mClientHeight*i,this.mCtx.canvas.style.width=this.mClientWidth+"px",this.mCtx.canvas.style.height=this.mClientHeight+"px"}},{key:"drawTexture",value:function(t){if(!1!==t.isValid){var e=this.mDevicePixelRatio,n=t.region.x,i=t.region.y,r=t.region.width,s=t.region.height,o=t.untrimmedRegion.x*e,a=t.untrimmedRegion.y*e,u=t.renderWidth*e,h=t.renderHeight*e;this.mCtx.drawImage(t.native,n,i,r,s,o,a,u,h)}}},{key:"drawTextureWithOffset",value:function(t,e,n){if(!1!==t.isValid){var i=this.mDevicePixelRatio,r=t.region.x,s=t.region.y,o=t.region.width,a=t.region.height,u=(e+t.untrimmedRegion.x)*i,h=(n+t.untrimmedRegion.y)*i,l=t.renderWidth*i,c=t.renderHeight*i;this.mCtx.drawImage(t.native,r,s,o,a,u,h,l,c)}}},{key:"beginClip",value:function(t,e,n){var i=this.mDevicePixelRatio;this.mCtx.save(),this.mCtx.beginPath(),this.mCtx.rect((t.x+e)*i,(t.y+n)*i,t.width*i,t.height*i),this.mCtx.clip()}},{key:"endClip",value:function(){this.mCtx.restore(),this.mGlobalAlpha=-1,this.mGlobalBlendMode=null}},{key:"setTransform",value:function(t){var e=this.mDevicePixelRatio,n=this.mActiveSession;!1===n.isBackBufferActive&&(null===n.customTransform?((t=t.clone()).data[4]-=Ye.stage.mX,t.data[5]-=Ye.stage.mY):(t=t.clone()).prepend(n.customTransform)),this.mTransform=t;var i=t.value;d.isNumber(i[0],i[1],i[2],i[3],i[4],i[5]),!0===this.mSnapToPixels?this.mCtx.setTransform(i[0],i[1],i[2],i[3],i[4]*e|0,i[5]*e|0):this.mCtx.setTransform(i[0],i[1],i[2],i[3],i[4]*e,i[5]*e)}},{key:"setGlobalAlpha",value:function(t){d.isNumber(t),t!=this.mGlobalAlpha&&(this.mGlobalAlpha=t,this.mCtx.globalAlpha=t)}},{key:"setGlobalBlendMode",value:function(t){t!==vt.AUTO&&(t=yt[t],this.mGlobalBlendMode!==t&&(this.mGlobalBlendMode=t,this.mCtx.globalCompositeOperation=t))}},{key:"clear",value:function(){if(!0!==pt.skipUnchangedFrames||!1!==pt.__dirty){this.mCtx.setTransform(1,0,0,1,0,0);var t=Ye.instance.viewport;!1===t.isTransparent?(this.mCtx.fillStyle=b.hexColorToString(t.backgroundColor),this.mCtx.fillRect(0,0,t.size.width*this.mDevicePixelRatio,t.size.height*this.mDevicePixelRatio)):this.mCtx.clearRect(0,0,t.size.width*this.mDevicePixelRatio,t.size.height*this.mDevicePixelRatio)}}},{key:"getTextureFromCanvas",value:function(t){return new W(t)}},{key:"context",get:function(){return this.mCtx}}]),e}(),Ot=function(t){function e(){var t;return c(this,e),(t=s(this,a(e).call(this))).mAlpha=1,t.mBlendMode=vt.AUTO,t.mVisible=!0,t.mClipRect=null,t.mRenderer=t.getRenderer(),t.mCacheAsBitmap=!1,t.mCacheAsBitmapDynamic=!0,t.mCacheAsBitmapDirty=!0,t.mCacheAsBitmapMatrixCache=null,t.mCache=null,t.mCacheBounds=null,t.mColor=null,t.mSnapToPixels=!1,t}return u(e,V),f(e,[{key:"onRender",value:function(){}},{key:"getRenderer",value:function(){return Ye.driver.getRenderer("DisplayObject",this)}},{key:"onGetLocalBounds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return t=t||new x,null!==this.mClipRect?(this.mClipRect.copyTo(t),t):t.set(0,0,0,0)}},{key:"getBounds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;n=n||new x;var i=this.onGetLocalBounds();if(null==t&&(t=this.mParent),t==this);else if(t==this.mParent)if(!1===e||null!==this.mClipRect){var r=C.pool.get();r.copyFrom(this.localTransformation),r.transformRect(i,n),C.pool.release(r)}else{if(!(!0===e&&this.mDirty&X.BOUNDS))return n.copyFrom(this.mBoundsCache),n;var s=C.pool.get();s.copyFrom(this.localTransformation),s.transformRect(i,n),C.pool.release(s)}else{var o=C.pool.get();o.copyFrom(this.worldTransformation),o.prepend(t.worldTransformationInverted),o.transformRect(i,n),C.pool.release(o)}if(t!==this?null!==this.mClipRect&&(n.x+=this.mPivotX,n.y+=this.mPivotY):i.copyTo(n),null!==this.mClipRect)return n;if(!0===e){for(var a=x.pool.get(),u=0;u<this.mChildren.length;u++)a.zero(),this.mChildren[u].getBounds(t,e,a),n.union(a);x.pool.release(a),t==this.mParent&&this.mDirty&X.BOUNDS&&(this.mBoundsCache.copyFrom(n),this.mDirty^=X.BOUNDS)}return n}},{key:"hitTest",value:function(t){var e=this.getComponent(Jt),n=null!==e&&e.touchable,i=this.onHitTestMask(t);if(!1===this.visible||!1===n||!1===i)return null;for(var r=null,s=this.mChildren.length-1;s>=0;--s){if(null!==(r=this.mChildren[s].hitTest(t)))return r}return!0===this.onHitTest(t)?this:null}},{key:"onHitTestMask",value:function(t){if(null===this.mClipRect)return!0;var e=w.pool.get();this.worldTransformationInverted.transformVector(t,e);var n=this.mClipRect.containsXY(e.x-this.mPivotX,e.y-this.mPivotY);return w.pool.release(e),n}},{key:"color",get:function(){return this.mColor},set:function(t){this.mColor!==t&&(this.mColor=t,this.setRenderDirty())}},{key:"cacheAsBitmap",get:function(){return this.mCacheAsBitmap},set:function(t){t!==this.mCacheAsBitmap&&(this.mCacheAsBitmap=t,!1===t&&(this.mCache=null,this.mCacheAsBitmapDirty=!0,this.mCacheAsBitmapMatrixCache=null,this.mCacheBounds=null,this.setTransformDirty()))}},{key:"cacheAsBitmapDynamic",get:function(){return this.mCacheAsBitmapDynamic},set:function(t){this.mCacheAsBitmapDynamic=t}},{key:"alpha",get:function(){return this.mAlpha},set:function(t){d.assert(!isNaN(t),"Value cannot be NaN"),this.mAlpha!==v.clamp(t,0,1)&&(this.mAlpha=v.clamp(t,0,1),this.setRenderDirty())}},{key:"visible",get:function(){return this.mVisible},set:function(t){this.mVisible!==t&&(this.mVisible=t,this.setRenderDirty())}},{key:"blendMode",get:function(){return this.mBlendMode},set:function(t){this.mBlendMode!==t&&(this.mBlendMode=t,this.setRenderDirty())}},{key:"clipRect",get:function(){return this.mClipRect},set:function(t){this.mClipRect=t,this.setRenderDirty()}},{key:"snapToPixels",get:function(){return this.mSnapToPixels},set:function(t){this.mSnapToPixels=t}}]),e}(),Mt=function(){function t(){c(this,t),this.mNodes=[],this.mTransform=new C,this.mCommandQueue=[],this.mPivotX=0,this.mPivotY=0,this.mPosX=0,this.mPosY=0,this.mName=null}return f(t,[{key:"onGetLocalBounds",value:function(t,e){for(var n=new Dt,i=this.mCommandQueue.length,r=(e=e.clone().append(this.mTransform)).data,s=Math.sqrt(r[0]*r[0]+r[1]*r[1]),o=Math.sqrt(r[2]*r[2]+r[3]*r[3]),a=0;a<i;a++){var u=this.mCommandQueue[a];switch(u.type){case jt.BEGIN_PATH:n.bounds&&(e.transformRect(n.bounds,n.bounds),t.mLocalBounds=t.mLocalBounds?t.mLocalBounds.union(n.bounds):n.bounds),n=new Dt;break;case jt.BOUNDS:for(var h=0;h<u.data.length;h+=2)n.points.push(u.getNumber(h),u.getNumber(h+1));break;case jt.LINE_STYLE:n.lastLineWidth=u.getNumber(0),u.getString(4)===Xt.MITER&&(n.lineMul=1);break;case jt.FILL:if(0!==n.points.length){var l=x.fromPointsXY(n.points);n.bounds=n.bounds?n.bounds.union(l):l}break;case jt.STROKE:if(n.lastLineWidth>n.maxLineWidth&&(n.maxLineWidth=n.lastLineWidth),0===n.maxLineWidth&&(n.maxLineWidth=1),n.maxLineWidth*=n.lineMul,0!==n.points.length){var c=x.fromPointsXY(n.points);n.points.length>1&&c.inflate(n.maxLineWidth*s,n.maxLineWidth*o),n.bounds=n.bounds?n.bounds.union(c):c}}}n.bounds&&(e.transformRect(n.bounds,n.bounds),t.mLocalBounds=t.mLocalBounds?t.mLocalBounds.union(n.bounds):n.bounds);for(var m=0,f=this.mNodes.length;m<f;m++)this.mNodes[m].onGetLocalBounds(t,e);return t.mLocalBounds}},{key:"lineStyle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Vt.NONE,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Xt.MITER,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3;d.isNumber(t,e,n,s),t<=0||this.__pushCommand(jt.LINE_STYLE,t,e,n,i,r,s)}},{key:"fillStyle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;d.isNumber(t,e),this.__pushCommand(jt.FILL_STYLE,t,e)}},{key:"fillGradient",value:function(t){t instanceof Bt&&this.__pushCommand(jt.FILL_GRD,t)}},{key:"fillPattern",value:function(t){this.__pushCommand(jt.FILL_PATTERN,t)}},{key:"clear",value:function(){this.mPosX=0,this.mPosY=0,this.mCommandQueue=[],this.mNodes=[],this.beginPath()}},{key:"moveTo",value:function(t,e){this.mPosX=t,this.mPosY=e,this.__pushCommand(jt.MOVE_TO,t,e)}},{key:"lineTo",value:function(t,e){this.mPosX=t,this.mPosY=e,this.__pushCommand(jt.LINE_TO,t,e),this.__pushCommand(jt.BOUNDS,this.mPosX,this.mPosY,t,e)}},{key:"arc",value:function(t,e,n,i,r){var s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=!1,a=0,u=0,h=[],l=Math.abs(i-r);if(i!==r){if(l>=v.PI2){h.push(t-n,e-n,t+n,e+n);var c=S.getCircumferencePoint(t,e,n,r+.5*Math.PI);o=!0,r=i+v.PI2,a=c.x,u=c.y}else{var m=i%v.PI2+(i<0?v.PI2:0),f=r;for(s&&(f=m,m=r);f<m;)f+=v.PI2;var d,y,p,g,k=0===m||f>=v.PI2,b=m<=Math.PI&&f>=Math.PI||f>=3*Math.PI,_=m<=.5*Math.PI&&f>=.5*Math.PI||f>=2.5*Math.PI,w=m<=1.5*Math.PI&&f>=1.5*Math.PI||f>=3.5*Math.PI;b&&k||(d=Math.cos(m)*n,y=Math.cos(f)*n),w&&_||(p=Math.sin(m)*n,g=Math.sin(f)*n);var C=b?-n:Math.min(d,y),x=k?n:Math.max(d,y),T=w?-n:Math.min(p,g),A=_?n:Math.max(p,g);h.push(C+t,T+e,x+t,A+e)}this.__pushCommand(jt.ARC,t,e,n,i,r,s),this.__pushCommand.apply(this,[jt.BOUNDS].concat(h)),!0===o&&this.__pushCommand(jt.MOVE_TO,a,u)}}},{key:"circle",value:function(t,e,n){this.__pushCommand(jt.ARC,t,e,n,0,v.PI2),this.__pushCommand(jt.BOUNDS,t-n,e-n,t+n,e+n)}},{key:"rect",value:function(t,e,n,i){d.isNumber(t,e,n,i),this.__pushCommand(jt.RECT,t,e,n,i),this.__pushCommand(jt.BOUNDS,t,e,t+n,e+i)}},{key:"roundedRect",value:function(t,e,n,i,r){d.isNumber(t,e,n,i,r),this.__pushCommand(jt.ROUNDED_RECT,t,e,n,i,r),this.__pushCommand(jt.BOUNDS,t,e,t+n,e+i)}},{key:"bezierCurveTo",value:function(t,e,n,i,r,s){var o=this.__bezierRange(this.mPosX,t,n,r,w.pool.get()),a=this.__bezierRange(this.mPosY,e,i,s,w.pool.get());this.mPosX=r,this.mPosY=s,this.__pushCommand(jt.BEZIER_CURVE_TO,t,e,n,i,r,s),this.__pushCommand(jt.BOUNDS,o.x,a.x,o.y,a.y),w.pool.release(o),w.pool.release(a)}},{key:"quadraticCurveTo",value:function(t,e,n,i){var r=this.__quadraticRange(this.mPosX,t,n,w.pool.get()),s=this.__quadraticRange(this.mPosY,e,i,w.pool.get());this.mPosX=n,this.mPosY=i,this.__pushCommand(jt.QUADRATIC_CURVE_TO,t,e,n,i),this.__pushCommand(jt.BOUNDS,r.x,s.x,r.y,s.y),w.pool.release(r),w.pool.release(s)}},{key:"__bezierRange",value:function(t,e,n,i,r){r=r||new w;var s=n-2*e+t-(i-2*n+e),o=2*(e-t)-2*(n-e),a=o*o-4*s*(t-e),u=Math.min(t,i),h=Math.max(t,i);if(a>=0){var l=Math.sqrt(a),c=1/(2*s),m=(-o+l)*c,f=(-o-l)*c;if(m=isFinite(m)?m:.5,f=isFinite(f)?f:.5,m>0&&m<1){var d=this.__bezierDot(t,e,n,i,m);u=Math.min(d,u),h=Math.max(d,h)}if(f>0&&f<1){var v=this.__bezierDot(t,e,n,i,f);u=Math.min(v,u),h=Math.max(v,h)}}return r.x=u,r.y=h,r}},{key:"__bezierDot",value:function(t,e,n,i,r){var s=1-r;return t*s*s*s+3*e*r*s*s+3*n*r*r*s+i*r*r*r}},{key:"__quadraticRange",value:function(t,e,n,i){var r=n-t,s=e-t,o=s/r,a=t+(o<0||o>1?s*s/(2*s-r):0);return i.x=Math.min(t,n,a),i.y=Math.max(t,n,a),i}},{key:"beginPath",value:function(){this.__pushCommand(jt.BEGIN_PATH)}},{key:"closePath",value:function(){this.__pushCommand(jt.CLOSE_PATH)}},{key:"setLineDash",value:function(t){this.__pushCommand(jt.LINE_DASH,t)}},{key:"stroke",value:function(){this.__pushCommand(jt.STROKE)}},{key:"fill",value:function(t){this.__pushCommand(jt.FILL,t)}},{key:"__pushCommand",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var r=new Ht(t,n);this.mCommandQueue.push(r)}},{key:"searchNode",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;if(e.name===t)return e;for(var n=0,i=e.mNodes.length;n<i;n++){var r=this.searchNode(t,e.mNodes[n]);if(r)return r}}},{key:"name",get:function(){return this.mName},set:function(t){this.mName=t}}]),t}(),Lt=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return c(this,e),(t=s(this,a(e).call(this))).mBounds=new x,t.mLocalBounds=null,t.mGraphicsData=null,t.mDataOffsetX=0,t.mDataOffsetY=0,t.mTrim=i,t.mGraphicsData=null===n?new Mt:"string"==typeof n?dt.default.getGraphicsData(n):n,i&&(t.mGraphicsData.onGetLocalBounds(o(o(t)),new C),t.mLocalBounds&&(t.mDataOffsetX=t.mLocalBounds.x,t.mDataOffsetY=t.mLocalBounds.y,t.mLocalBounds=null)),t}return u(e,Ot),f(e,[{key:"getRenderer",value:function(){return Ye.driver.getRenderer("Graphics",this)}},{key:"onGetLocalBounds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return t=t||new x,null!==this.mClipRect?(this.mClipRect.copyTo(t),t):(this.mGraphicsData.onGetLocalBounds(this,new C),this.mLocalBounds&&t.copyFrom(this.mLocalBounds),this.mLocalBounds=null,this.mTrim||(t.width+=Math.max(0,t.x),t.height+=Math.max(0,t.y),t.x=Math.min(0,t.x),t.y=Math.min(0,t.y)),t)}},{key:"lineStyle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Vt.NONE,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Xt.MITER,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3;this.mGraphicsData.lineStyle(t,e,n,i,r,s)}},{key:"fillStyle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.mGraphicsData.fillStyle(t,e)}},{key:"fillGradient",value:function(t){this.mGraphicsData.fillGradient(t)}},{key:"fillPattern",value:function(t){this.mGraphicsData.fillPattern(t)}},{key:"clear",value:function(){this.mBounds.zero(),this.mGraphicsData.clear(),this.setTransformDirty()}},{key:"moveTo",value:function(t,e){this.mGraphicsData.moveTo(t,e)}},{key:"lineTo",value:function(t,e){this.mGraphicsData.lineTo(t,e)}},{key:"arc",value:function(t,e,n,i,r){var s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.mGraphicsData.arc(t,e,n,i,r,s)}},{key:"circle",value:function(t,e,n){this.mGraphicsData.circle(t,e,n)}},{key:"rect",value:function(t,e,n,i){this.mGraphicsData.rect(t,e,n,i)}},{key:"roundedRect",value:function(t,e,n,i,r){this.mGraphicsData.roundedRect(t,e,n,i,r)}},{key:"bezierCurveTo",value:function(t,e,n,i,r,s){this.mGraphicsData.bezierCurveTo(t,e,n,i,r,s)}},{key:"quadraticCurveTo",value:function(t,e,n,i){this.mGraphicsData.quadraticCurveTo(t,e,n,i)}},{key:"beginPath",value:function(){this.mGraphicsData.beginPath()}},{key:"closePath",value:function(){this.mGraphicsData.closePath()}},{key:"setLineDash",value:function(t){this.mGraphicsData.setLineDash(t)}},{key:"stroke",value:function(){this.mGraphicsData.stroke(),this.setTransformDirty()}},{key:"fill",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.mGraphicsData.fill(t),this.setTransformDirty()}},{key:"createLinearGradient",value:function(t,e,n,i){return new Bt(t,e,n,i)}}]),e}(),Dt=function t(){c(this,t),this.bounds=null,this.points=[],this.maxLineWidth=0,this.lastLineWidth=0,this.lineMul=.5},It=function(){function t(){c(this,t),this.stops={},this.native=null}return f(t,[{key:"addColorStop",value:function(t,e){this.stops[t]=e,this.native=null}}]),t}(),Bt=function(t){function e(t,n,i,r){var o;return c(this,e),(o=s(this,a(e).call(this))).x0=t,o.y0=n,o.x1=i,o.y1=r,o.isAbsolute=!1,o}return u(e,It),f(e,[{key:"addColorStop",value:function(t,e){this.stops[t]=e,this.native=null}},{key:"clone",value:function(){var t=new e(this.x0,this.y0,this.x1,this.y1);for(var n in t.isAbsolute=this.isAbsolute,this.stops)t.stops[n]=this.stops[n];return t}}]),e}(),Ft=function(){function t(e,n){c(this,t),this.image=e,this.repetition=n,this.native=null}return f(t,[{key:"clone",value:function(){return new t(this.image,this.repetition)}}]),t}(),Ht=function(){function t(e,n){c(this,t),this.type=e,this.data=n}return f(t,[{key:"getNumber",value:function(t){return this.data[t]}},{key:"getString",value:function(t){return this.data[t]}},{key:"getBoolean",value:function(t){return this.data[t]}},{key:"getObject",value:function(t){return this.data[t]}}]),t}(),jt={LINE_STYLE:"lineStyle",FILL_STYLE:"fillStyle",ARC:"arc",RECT:"rect",ROUNDED_RECT:"roundedRect",BEZIER_CURVE_TO:"bezierCurveTo",QUADRATIC_CURVE_TO:"quadraticCurveTo",BEGIN_PATH:"beginPath",CLOSE_PATH:"closePath",FILL:"fill",LINE_TO:"lineTo",MOVE_TO:"moveTo",STROKE:"stroke",BOUNDS:"bounds",LINE_DASH:"setLineDash",FILL_GRD:"gradientFillStyle",FILL_PATTERN:"patternFillStyle"},Vt={NONE:"none",ROUND:"round",SQUARE:"square"},Xt={BEVEL:"bevel",MITER:"miter",ROUND:"round"},Gt={NONE_ZERO:"nonzero",EVEN_ODD:"evenodd"},zt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"sans-serif",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:14,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.FontStyle.NORMAL,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:t.FontWeight.NORMAL,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:16777215;c(this,t),this.name="def",this.family=e,this.size=i,this.color=n,this.style=r,this.weight=s,this.strokeThickness=o,this.strokeColor=a,this.dropShadow=!1,this.shadowDistanceX=0,this.shadowDistanceY=0,this.shadowColor=0,this.shadowAlpha=1,this.shadowBlur=0}return f(t,[{key:"clone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:NaN,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:NaN,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:NaN,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:NaN,u=new t;return u.family=null===e?this.family:e,u.size=isNaN(i)?this.size:i,u.color=isNaN(n)?this.color:n,u.style=null===r?this.style:r,u.weight=null===s?this.weight:s,u.strokeThickness=isNaN(o)?this.strokeThickness:o,u.strokeColor=isNaN(a)?this.strokeColor:a,u.dropShadow=this.dropShadow,u.shadowAlpha=this.shadowAlpha,u.shadowBlur=this.shadowBlur,u.shadowColor=this.shadowColor,u.shadowDistanceX=this.shadowDistanceX,u.shadowDistanceY=this.shadowDistanceY,u}}]),t}();zt.FontStyle={NORMAL:"normal",ITALIC:"italic"},zt.FontWeight={NORMAL:"400",BOLD:"700"},zt.FontAlign={NONE:"none",LEFT:"left",RIGHT:"right",CENTER:"center"},zt.FontVerticalAlign={TOP:"top",MIDDLE:"middle",BOTTOM:"bottom"},zt.default=new zt("sans-serif",0,14,zt.FontStyle.NORMAL,zt.FontWeight.NORMAL,0,0);var Yt=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"sans-serif",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:14,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:zt.FontStyle.NORMAL,h=arguments.length>5&&void 0!==arguments[5]?arguments[5]:zt.FontWeight.NORMAL,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,m=arguments.length>7&&void 0!==arguments[7]?arguments[7]:16777215;return c(this,e),(t=s(this,a(e).call(this))).mText=n,t.mCacheBounds=new x,t.mTextWidth=0,t.mTextHeight=0,t.mDefaultStyle=new zt(i,r,o,u,h,l,m),t.mStyles={},t.mAutoSize=!0,t.mAlign=zt.FontAlign.LEFT,t.mVerticalAlign=zt.FontVerticalAlign.MIDDLE,t.mMultiline=!1,t.mLineHeight=1.2,t.mTextBounds=new x,t.mFieldWidth=0,t.mFieldHeight=0,t.mPadding=new x(0,0,0,0),t.mMetrics=null,t.mHighQuality=!1,t}return u(e,Ot),f(e,[{key:"getRenderer",value:function(){return Ye.driver.getRenderer("Text",this)}},{key:"onGetLocalBounds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(t=t||new x,this.mDirty&X.RENDER_CACHE){var e=this.text;!1===this.mMultiline&&(e=e.replace(/\n/g,""));var n=[this.mDefaultStyle];for(var i in this.mStyles)n.push(this.mStyles[i]);this.mMetrics=I.measure.apply(I,[e,this.mLineHeight].concat(n)),this.mTextBounds.copyFrom(this.mMetrics.bounds)}return null!==this.mClipRect?(this.mClipRect.copyTo(t),t):(!1===this.mAutoSize?(t.width=this.mFieldWidth,t.height=this.mFieldHeight):(t.width=this.mTextBounds.width,t.height=this.mTextBounds.height),t.width+=this.mPadding.right,t.height+=this.mPadding.bottom,t)}},{key:"setStyle",value:function(t,e){d.assert("def"!==t,"Please use 'setDefaultStyle' instead."),e.name=t,this.mStyles[t]=e,this.setDirty(X.RENDER_CACHE,!1),this.setTransformDirty()}},{key:"setDefaultStyle",value:function(t){this.mDefaultStyle=t,this.setDirty(X.RENDER_CACHE,!1),this.setTransformDirty()}},{key:"removeStyle",value:function(t){delete this.mStyles[t],this.setDirty(X.RENDER_CACHE,!1),this.setTransformDirty()}},{key:"getStyle",value:function(t){return this.mStyles.hasOwnProperty(t)?this.mStyles[t]:null}},{key:"getAllStyles",value:function(){var t=[];for(var e in this.mStyles)t.push(this.mStyles[e]);return t}},{key:"getDefaultStyle",value:function(t){return this.mDefaultStyle}},{key:"multiline",set:function(t){this.mMultiline=t,this.setDirty(X.RENDER_CACHE,!1),this.setTransformDirty()},get:function(){return this.mMultiline}},{key:"lineHeight",set:function(t){this.mLineHeight=t,this.setDirty(X.RENDER_CACHE,!1),this.setTransformDirty()},get:function(){return this.mLineHeight}},{key:"size",get:function(){return this.mDefaultStyle.size},set:function(t){this.mDefaultStyle.size!==t&&(this.mDefaultStyle.size=t,this.setDirty(X.RENDER_CACHE,!1),this.setTransformDirty())}},{key:"font",get:function(){return this.mDefaultStyle.family},set:function(t){this.mDefaultStyle.family!==t&&(this.mDefaultStyle.family=t,this.setDirty(X.RENDER_CACHE,!1),this.setTransformDirty())}},{key:"color",get:function(){return this.mDefaultStyle.color},set:function(t){this.mDefaultStyle.color!==t&&(this.mDefaultStyle.color=t,this.setDirty(X.RENDER_CACHE,!1),this.setTransformDirty())}},{key:"fontStyle",get:function(){return this.mDefaultStyle.style},set:function(t){this.mDefaultStyle.style!==t&&(this.mDefaultStyle.style=t,this.setDirty(X.RENDER_CACHE,!1),this.setTransformDirty())}},{key:"weight",get:function(){return this.mDefaultStyle.weight},set:function(t){this.mDefaultStyle.weight!==t&&(this.mDefaultStyle.weight=t,this.setDirty(X.RENDER_CACHE,!1),this.setTransformDirty())}},{key:"align",get:function(){return this.mAlign},set:function(t){this.mAlign!==t&&(this.mAlign=t,this.setDirty(X.RENDER_CACHE,!1),this.setTransformDirty())}},{key:"vAlign",get:function(){return this.mVerticalAlign},set:function(t){this.mVerticalAlign!==t&&(this.mVerticalAlign=t,this.setDirty(X.RENDER_CACHE,!1),this.setTransformDirty())}},{key:"strokeColor",get:function(){return this.mDefaultStyle.strokeColor},set:function(t){this.mDefaultStyle.strokeColor!==t&&(this.mDefaultStyle.strokeColor=t,this.setDirty(X.RENDER_CACHE|X.RENDER,!1))}},{key:"strokeThickness",get:function(){return this.mDefaultStyle.strokeThickness},set:function(t){t!==this.mDefaultStyle.strokeThickness&&(this.mDefaultStyle.strokeThickness=t,this.setDirty(X.RENDER_CACHE|X.RENDER,!1))}},{key:"fieldWidth",get:function(){return this.mFieldWidth},set:function(t){t!==this.mFieldWidth&&(this.mFieldWidth=t,this.setDirty(X.RENDER_CACHE,!1),this.setTransformDirty())}},{key:"fieldHeight",get:function(){return this.mFieldHeight},set:function(t){t!==this.mFieldHeight&&(this.mFieldHeight=t,this.setDirty(X.RENDER_CACHE,!1),this.setTransformDirty())}},{key:"text",get:function(){return this.mText},set:function(t){this.mText!==t&&(this.mText=t,this.setDirty(X.RENDER_CACHE,!1),this.setTransformDirty(),this.post(N.CHANGE))}},{key:"autoSize",get:function(){return this.mAutoSize},set:function(t){this.mAutoSize!==t&&(this.mAutoSize=t,this.setDirty(X.RENDER_CACHE,!1),this.setTransformDirty())}},{key:"padding",get:function(){return this.mPadding},set:function(t){this.mPadding=t,this.setDirty(X.RENDER_CACHE,!1),this.setTransformDirty()}},{key:"dropShadow",get:function(){return this.mDefaultStyle.dropShadow},set:function(t){t!==this.mDefaultStyle.dropShadow&&(this.mDefaultStyle.dropShadow=t,this.setDirty(X.RENDER_CACHE,!1),this.setTransformDirty())}},{key:"shadowColor",get:function(){return this.mDefaultStyle.shadowColor},set:function(t){t!==this.mDefaultStyle.shadowColor&&(this.mDefaultStyle.shadowColor=t,this.setDirty(X.RENDER_CACHE|X.RENDER,!1))}},{key:"shadowAlpha",get:function(){return this.mDefaultStyle.shadowAlpha},set:function(t){t!==this.mDefaultStyle.shadowAlpha&&(this.mDefaultStyle.shadowAlpha=t,this.setDirty(X.RENDER_CACHE|X.RENDER,!1))}},{key:"shadowBlur",get:function(){return this.mDefaultStyle.shadowBlur},set:function(t){t!==this.mDefaultStyle.shadowBlur&&(this.mDefaultStyle.shadowBlur=t,this.setDirty(X.RENDER_CACHE|X.RENDER,!1))}},{key:"shadowDistanceX",get:function(){return this.mDefaultStyle.shadowDistanceX},set:function(t){t!==this.mDefaultStyle.shadowDistanceX&&(this.mDefaultStyle.shadowDistanceX=t,this.setDirty(X.RENDER_CACHE|X.RENDER,!1))}},{key:"shadowDistanceY",get:function(){return this.mDefaultStyle.shadowDistanceY},set:function(t){t!==this.mDefaultStyle.shadowDistanceY&&(this.mDefaultStyle.shadowDistanceY=t,this.setDirty(X.RENDER_CACHE|X.RENDER,!1))}},{key:"highQuality",get:function(){return this.mHighQuality},set:function(t){this.mHighQuality=t,this.setDirty(X.RENDER_CACHE,!1),this.setTransformDirty()}}]),e}();Yt.__cache=null;Yt.__cache=null;var Ut=function(){function t(){c(this,t),t.mInstance=this,this.mPixelRatio=0,t.mInstance.mPixelRatio=t.getDevicePixelRatio()}return f(t,null,[{key:"getDevicePixelRatio",value:function(){return void 0!==window.screen.systemXDPI&&void 0!==window.screen.logicalXDPI&&window.screen.systemXDPI>window.screen.logicalXDPI?window.screen.systemXDPI/window.screen.logicalXDPI:void 0!==window.devicePixelRatio?window.devicePixelRatio:1}},{key:"os",get:function(){var t=navigator.userAgent||navigator.vendor||window.opera;return/windows phone/i.test(t)?"Windows Phone":/android/i.test(t)?"Android":/iPad|iPhone|iPod/.test(t)?"iOS":"unknown"}},{key:"isTouch",get:function(){return!!("ontouchstart"in window)||navigator.maxTouchPoints>0}},{key:"isMobile",get:function(){return/Mobi/.test(navigator.userAgent)}},{key:"pixelRatio",get:function(){return t.mInstance.mPixelRatio}},{key:"webAudioSupported",get:function(){return null!=window.AudioContext||null!=window.webkitAudioContext}},{key:"isLandscape",get:function(){var t=Ye.instance.viewport.size;return t.width>=t.height}},{key:"isPortrait",get:function(){return!t.isLandscape}}]),t}();Ut.mInstance=null;var Wt={FRONT_TO_BACK:"frontToBack",BACK_TO_FRONT:"backToFront"},qt=function t(e){c(this,t),this.keyCode=e.keyCode,this.code=e.code,this.char=e.key,this.shiftKey=e.shiftKey,this.altKey=e.altKey,this.ctrlKey=e.ctrlKey},Qt=function(t){function e(){var t;return c(this,e),t=s(this,a(e).call(this)),d.assert(null==t.constructor.instance,"Only single instance is allowed"),e.instance=o(o(t)),t.mPointerPosition=new w,t.mStagePosition=new w,t.mDom=Ye.instance.containerElement,t.mEventList=null,t.mKeyEventList=null,t.__initListeners(),t.mPointerQueue=[],t.mKeyQueue=[],t.mPressedKeys=[],t.mIsPointerDown=!1,t.mNeedUpEvent=!1,t.mInputListeners=new Map,t.mTarget=null,t.mTargetComponent=null,t.mLockedTarget=null,t.mLastInTargetComponent=null,t}return u(e,F),f(e,[{key:"__initListeners",value:function(){var t=this;this.mKeyEventList=e.mKeyEventList,window.PointerEvent?this.mEventList=e.mPointerEventList:Ut.isTouch&&Ut.isMobile?this.mEventList=e.mTouchEventList:this.mEventList=e.mMouseEventList;for(var n=0;n<3;n++)this.mDom.addEventListener(this.mEventList[n],function(e){return t.__onPointerEvent(e)},!1);document.addEventListener(this.mEventList[e.IX_POINTER_UP],function(e){return t.__onPointerEventDoc(e)},!1);for(var i=0;i<this.mKeyEventList.length;i++)document.addEventListener(this.mKeyEventList[i],function(e){return t.__onKeyEvent(e)},!1)}},{key:"__onKeyEvent",value:function(t){return!0!==Ye.instance.isPaused&&(this.mKeyQueue.push(t),!0)}},{key:"__onPointerEventDoc",value:function(t){!0!==Ye.instance.isPaused&&(!1===(t.target==this.mDom||t.target.parentElement==this.mDom)&&!0===this.mNeedUpEvent&&(this.mNeedUpEvent=!1,this.__pushEvent(t)))}},{key:"__onPointerEvent",value:function(t){return!0!==Ye.instance.isPaused&&(t.preventDefault(),this.__pushEvent(t),!0)}},{key:"__pushEvent",value:function(t){var e=null;e=0===t.type.indexOf("touch")?this.__getTouchPos(this.mDom,t):this.__getPointerPos(this.mDom,t),this.mPointerQueue.push({e:t,x:e.x,y:e.y})}},{key:"__getPointerPos",value:function(t,e){var n=t.getBoundingClientRect(),i=t.clientWidth/n.width,r=t.clientHeight/n.height;return new w((e.clientX-n.left)*i,(e.clientY-n.top)*r)}},{key:"__getTouchPos",value:function(t,e){var n=t.getBoundingClientRect(),i=e.changedTouches[0],r=i.clientX,s=i.clientY,o=t.clientWidth/n.width,a=t.clientHeight/n.height;return new w((r-n.left)*o,(s-n.top)*a)}},{key:"onUpdate",value:function(){this.__updateKeyboard();for(var t=Ye.stage;this.mPointerQueue.length>0;){var n=this.mPointerQueue.shift();this.mPointerPosition.x=n.x,this.mPointerPosition.y=n.y,this.mStagePosition.x=n.x,this.mStagePosition.y=n.y,t.worldTransformationInverted.transformVector(this.mStagePosition,this.mStagePosition);var i=e.mInputEventsLookup[this.mEventList.indexOf(n.e.type)];this.__findTarget(this.mPointerPosition),this.__processNativeEvent(n,this.mPointerPosition,i)}}},{key:"__findTarget",value:function(t){var e=Ye.stage.hitTest(t);if(null===e)return this.mTarget=null,void(this.mTargetComponent=null);this.mTarget=e,this.mTargetComponent=e.getComponent(Jt)}},{key:"__processNativeEvent",value:function(t,n,i){if(i===e.POINTER_DOWN?(this.mIsPointerDown=!0,this.mNeedUpEvent=!0):i===e.POINTER_UP&&(this.mIsPointerDown=!1),this.post(i),null!==this.mTarget||null!==this.mLockedTarget){var r=new Kt(this.mTarget,n.x,n.y);if(i===e.POINTER_DOWN)this.mLockedTarget=this.mTarget;else if(i===e.POINTER_UP&&null!==this.mLockedTarget)return this.mLockedTarget.post("~pointerUp",r),void(this.mLockedTarget=null);var s=this.mTarget===this.mLockedTarget;null===this.mLockedTarget?null!==this.mTarget&&this.mTarget.post("~"+i,r):!0===s?this.mLockedTarget.post("~"+i,r):null!==this.mLockedTarget.mParent&&null!==this.mTarget&&this.mLockedTarget.mParent.post("~"+i,r)}}},{key:"__updateKeyboard",value:function(){for(;this.mKeyQueue.length>0;){var t=this.mKeyQueue.shift(),n=this.mKeyEventList.indexOf(t.type),i=this.mPressedKeys.indexOf(t.keyCode),r=e.mKeyEventsLookup[n];"keyUp"===r&&-1!==i?this.mPressedKeys.splice(i,1):"keyDown"===r&&-1===i&&(this.mPressedKeys.push(t.keyCode),r="keyPress"),this.post(r,new qt(t),t)}}}],[{key:"on",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return e.instance.on(t,n,i)}},{key:"once",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return e.instance.once(t,n,i)}},{key:"isPointerDown",get:function(){return e.instance.mIsPointerDown}},{key:"pointerX",get:function(){return e.instance.mPointerPosition.x}},{key:"pointerY",get:function(){return e.instance.mPointerPosition.y}},{key:"stageX",get:function(){return e.instance.mStagePosition.x}},{key:"stageY",get:function(){return e.instance.mStagePosition.y}},{key:"pointerPosition",get:function(){return e.instance.mPointerPosition}},{key:"stagePosition",get:function(){return e.instance.mStagePosition}},{key:"pressedKeys",get:function(){return e.instance.mPressedKeys}}]),e}();Qt.POINTER_DOWN="pointerDown",Qt.POINTER_MOVE="pointerMove",Qt.POINTER_UP="pointerUp",Qt.instance=null,Qt.IX_POINTER_MOVE=0,Qt.IX_POINTER_DOWN=1,Qt.IX_POINTER_UP=2,Qt.mKeyEventList=["keydown","keyup"],Qt.mKeyEventsLookup=["keyDown","keyUp","keyPress"],Qt.mInputEventsLookup=["pointerMove","pointerDown","pointerUp","pointerIn","pointerOut"],Qt.mPointerEventList=["pointermove","pointerdown","pointerup","pointerenter","pointerleave"],Qt.mMouseEventList=["mousemove","mousedown","mouseup","mouseenter","mouseleave"],Qt.mTouchEventList=["touchmove","touchstart","touchend","touchenter","touchleave"];var Kt=function(){function t(e,n,i){c(this,t),this.mActiveObject=e,this.mX=n,this.mY=i}return f(t,[{key:"activeObject",get:function(){return this.mActiveObject}},{key:"x",get:function(){return this.mX}},{key:"y",get:function(){return this.mY}}]),t}(),Jt=function(t){function e(){var t;return c(this,e),(t=s(this,a(e).call(this))).touchable=!0,t.mPointerInDispatched=!1,t}return u(e,j),e}(),Zt=function(){function t(){c(this,t)}return f(t,null,[{key:"linear",value:function(t){return t}},{key:"quadraticIn",value:function(t){return t*t}},{key:"quadraticOut",value:function(t){return t*(2-t)}},{key:"quadraticInOut",value:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},{key:"cubicIn",value:function(t){return t*t*t}},{key:"cubicOut",value:function(t){return--t*t*t+1}},{key:"cubicInOut",value:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},{key:"quarticIn",value:function(t){return t*t*t*t}},{key:"quarticOut",value:function(t){return 1- --t*t*t*t}},{key:"quarticInOut",value:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},{key:"quinticIn",value:function(t){return t*t*t*t*t}},{key:"quinticOut",value:function(t){return--t*t*t*t*t+1}},{key:"quinticInOut",value:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},{key:"sinusoidalIn",value:function(t){return 1-Math.cos(t*Math.PI/2)}},{key:"sinusoidalOut",value:function(t){return Math.sin(t*Math.PI/2)}},{key:"sinusoidalInOut",value:function(t){return.5*(1-Math.cos(Math.PI*t))}},{key:"exponentialIn",value:function(t){return 0===t?0:Math.pow(1024,t-1)}},{key:"exponentialOut",value:function(t){return 1===t?1:1-Math.pow(2,-10*t)}},{key:"exponentialInOut",value:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},{key:"circularIn",value:function(t){return 1-Math.sqrt(1-t*t)}},{key:"circularOut",value:function(t){return Math.sqrt(1- --t*t)}},{key:"circularInOut",value:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},{key:"elasticIn",value:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)}},{key:"elasticOut",value:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1}},{key:"elasticInOut",value:function(t){return 0===t?0:1===t?1:(t*=2)<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1}},{key:"backIn",value:function(t){var e=1.70158;return t*t*((e+1)*t-e)}},{key:"backOut",value:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1}},{key:"backInOut",value:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}},{key:"bounceIn",value:function(e){return 1-t.bounceOut(1-e)}},{key:"bounceOut",value:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},{key:"bounceInOut",value:function(e){return e<.5?.5*t.bounceIn(2*e):.5*t.bounceOut(2*e-1)+.5}},{key:"smootherStep",value:function(t){return t*t*t*(t*(6*t-15)+10)}}]),t}(),$t=function(){function t(){c(this,t)}return f(t,null,[{key:"linear",value:function(t,e,n){var i=t.length-1,r=i*e,s=Math.floor(r);return n=n||v.lerp,e<0?n(t[0],t[1],r):e>1?n(t[i],t[i-1],i-r):n(t[s],t[s+1>i?i:s+1],r-s)}},{key:"bezier",value:function(e,n){for(var i=0,r=e.length,s=Math.pow,o=function(e,n){var i=t.__factorial;return i(e)/i(n)/i(e-n)},a=0;a<r;a++)i+=s(1-n,r-a)*s(n,a)*e[a]*o(r,a);return i}},{key:"catmullRom",value:function(t,e){var n=t.length-1,i=n*e,r=Math.floor(i),s=function(t,e,n,i,r){var s=.5*(n-t),o=.5*(i-e),a=r*r;return(2*(e-n)+s+o)*(r*a)+(3*(n-e)-2*s-o)*a+s*r+e};return t[0]===t[n]?(e<0&&(r=Math.floor(i=n*(1+e))),s(t[(r-1+n)%n],t[r],t[(r+1)%n],t[(r+2)%n],i-r)):e<0?t[0]-(s(t[0],t[0],t[1],t[1],-i)-t[0]):e>1?t[n]-(s(t[n],t[n],t[n-1],t[n-1],i-n)-t[n]):s(t[r?r-1:0],t[r],t[n<r+1?n:r+1],t[n<r+2?n:r+2],i-r)}}]),t}();$t.__factorial=function(){var t=[1];return function(e){if(t[e])return t[e];for(var n=e;--e;)n*=e;return t[e]=n,n}}();var te=function(t){function e(t){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.25,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(c(this,e),(n=s(this,a(e).call(this))).mValues=t,n.mDuration=i,n.mProperties=r,n.mPlugins=o,n.mIsPlaying=!1,n.mIsPaused=!1,n.mStartTime=0,n.mPausedTime=0,n.mValuesStart={},n.mElapsed=0,n.mInterpolation=$t.linear,n.mDelay=0,n.mRepeatDelay=0,n.mRepeats=0,n.mInitiated=!1,n.mStarted=!1,n.mReversed=!1,n.mYoyo=!1,n.mIsYoyoBack=!1,n.mReverseOnInit=!1,n.mRemoveOnComplete=!0,n.mPlayOnAdded=!0,n.mEase=e.DEFAULT_EASE,null!==n.mProperties)for(var u in n.mProperties)n[u]=n.mProperties[u];return n}return u(e,j),f(e,[{key:"__start",value:function(t){this.mIsPlaying=!0,this.mStartTime=t+this.mDelay}},{key:"play",value:function(){return this.mIsPaused?this.__resume():this.__start(B.now),this}},{key:"stop",value:function(){return this.mIsPlaying?(this.mIsPlaying=!1,this):this}},{key:"reset",value:function(){return this.mElapsed=0,this.mIsPlaying&&this.play(),this}},{key:"to",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.25;return this.mValues=t,this.mDuration=e,this.mInitiated=!1,this}},{key:"pause",value:function(){return this.mIsPlaying?(this.mIsPaused=!0,this.mPausedTime=B.now,this):this}},{key:"__resume",value:function(){this.mIsPaused&&(this.mIsPaused=!1,this.mStartTime+=B.now-this.mPausedTime)}},{key:"removeFromParent",value:function(){this.mIsPlaying&&this.stop(),r(a(e.prototype),"removeFromParent",this).call(this)}},{key:"chain",value:function(t){return t?(this.mRemoveOnComplete=!1,t.playOnAdded=!1,this.on(N.COMPLETE,function(){t.play()}),t):this}},{key:"onAdded",value:function(t){this.mPlayOnAdded&&this.__start(B.now)}},{key:"__update",value:function(t){}},{key:"set",value:function(t){for(var e in this.mValues=t,this.mValues)this.mValuesStart[e]=parseFloat(this.gameObject[e])}},{key:"reverse",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.mInitiated?this.__reverse():this.mReverseOnInit=!0,t&&(this.mIsYoyoBack=!this.mIsYoyoBack),this}},{key:"__reverse",value:function(){for(var t in this.mValues){var e=[this.mValuesStart[t],this.mValues[t]];this.mValues[t]=e[0],this.mValuesStart[t]=e[1]}}},{key:"onRender",value:function(){if(0===Ye.numUpdates){var t=B.now;if(!(t<this.mStartTime||!1===this.mIsPlaying||!0===this.mIsPaused)&&!1!==this.mStarted&&!1!==this.mInitiated){this.mElapsed=(t-this.mStartTime)/this.mDuration,this.mElapsed>1&&(this.mElapsed=1);var e=this.mEase(this.mIsYoyoBack?1-this.mElapsed:this.mElapsed);for(var n in this.mValues){var i=this.mValuesStart[n],r=this.mValues[n];if(null!==this.mPlugins&&this.mPlugins.hasOwnProperty(n)){var s=Array.isArray(r)?r:[i,r];this.gameObject[n]=$t.linear(s,e,this.mPlugins[n])}else Array.isArray(r)?this.gameObject[n]=this.mInterpolation(r,e):this.gameObject[n]=i+(r-i)*(this.mIsYoyoBack?1-e:e)}}}}},{key:"onUpdate",value:function(){var t=B.now;if(!(t<this.mStartTime||!1===this.mIsPlaying||!0===this.mIsPaused)){this.__collectStartingValues(),this.mElapsed=(t-this.mStartTime)/this.mDuration,this.mElapsed>1&&(this.mElapsed=1);var e=this.mEase(this.mIsYoyoBack?1-this.mElapsed:this.mElapsed);for(var n in this.mValues){var i=this.mValuesStart[n],r=this.mValues[n];if(null!==this.mPlugins&&this.mPlugins.hasOwnProperty(n)){var s=Array.isArray(r)?r:[i,r];this.gameObject[n]=$t.linear(s,e,this.mPlugins[n])}else Array.isArray(r)?this.gameObject[n]=this.mInterpolation(r,e):this.gameObject[n]=i+(r-i)*(this.mIsYoyoBack?1-e:e)}if(this.post(N.UPDATE,this.gameObject),1===this.mElapsed)if(this.mRepeats-- >0)!0===this.mYoyo&&this.reverse(!0),this.mStartTime=t+this.mRepeatDelay,this.post("loop",this.gameObject);else if(this.mIsPlaying=!1,this.post(N.COMPLETE,this.gameObject),this.mRemoveOnComplete)this.removeFromParent();else{for(var o in this.mValues)this.mValuesStart[o]=this.mValues[o];this.mStarted=!1}}}},{key:"__collectStartingValues",value:function(){if(!1===this.mStarted){for(var t in this.mStarted=!0,this.post("start",this.gameObject),this.mValues)!this.mInitiated&&Array.isArray(this.mValues[t])&&(this.mValues[t]=[this.gameObject[t]].concat(this.mValues[t])),this.mValuesStart[t]=parseFloat(this.gameObject[t]);!0!==this.mReversed&&!0!==this.mReverseOnInit||this.__reverse(),this.mInitiated=!0}}},{key:"ease",get:function(){return this.mEase},set:function(t){this.mEase=t}},{key:"interpolation",get:function(){return this.mInterpolation},set:function(t){this.mInterpolation=t}},{key:"elapsed",get:function(){return this.mElapsed}},{key:"delay",get:function(){return this.mDelay},set:function(t){this.mDelay=t}},{key:"repeats",get:function(){return this.mRepeats},set:function(t){this.mRepeats=t}},{key:"repeatDelay",get:function(){return this.mRepeatDelay},set:function(t){this.mRepeatDelay=t}},{key:"loop",get:function(){return this.mRepeats===1/0},set:function(t){this.mRepeats=t?1/0:0}},{key:"yoyo",get:function(){return this.mYoyo},set:function(t){this.mYoyo=t}},{key:"reversed",get:function(){return this.mReversed},set:function(t){this.mReversed=t}},{key:"removeOnComplete",get:function(){return this.mRemoveOnComplete},set:function(t){this.mRemoveOnComplete=t}},{key:"playOnAdded",get:function(){return this.mPlayOnAdded},set:function(t){this.mPlayOnAdded=t}},{key:"plugins",get:function(){return this.mPlugins},set:function(t){this.mPlugins=t}},{key:"duration",get:function(){return this.mDuration}},{key:"isPlaying",get:function(){return!0===this.mIsPlaying&&!1===this.mIsPaused}}]),e}();te.DEFAULT_EASE=Zt.smootherStep;var ee=function(t){function e(){var t;c(this,e),t=s(this,a(e).call(this)),e.instance=o(o(t)),t.mContext=null;try{t.mContext=new(window.AudioContext||window.webkitAudioContext)}catch(e){if(null==t.mContext)return d.warn("no audio support"),s(t)}return t.__unlock(),t.mCurrentListener=null,t.mChannels={},t.mMasterChannel=new ue("master"),t.mMasterChannel._outputNode.connect(t.mContext.destination),t.mChannels.master=t.mMasterChannel,t}return u(e,F),f(e,[{key:"__unlock",value:function(){var t=this,e=function e(){var n=t.mContext.createBuffer(1,1,22050),i=t.mContext.createBufferSource();i.buffer=n,i.connect(t.mContext.destination),void 0===i.start?i.noteOn(0):i.start(0),"suspended"===i.context.state&&i.context.resume(),document.removeEventListener("touchstart",e),document.removeEventListener("click",e)};document.addEventListener("touchstart",e),document.addEventListener("click",e)}}],[{key:"createChannel",value:function(t){if(null==e.instance.mChannels[t]){var n=new ue(t);n._outputNode.connect(e.instance.mMasterChannel._inputNode),e.instance.mChannels[t]=n}return e.instance.mChannels[t]}},{key:"getChannel",value:function(t){return e.instance.mChannels[t]}},{key:"_resolveChannel",value:function(t){for(var n in e.instance.mChannels)e.instance.mChannels[n].detachSound(t);var i=""==t.channel?"master":t.channel,r=e.instance.mChannels[i];return r.attachSound(t),r}},{key:"play",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"master",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;d.assert(null!=t,"Param 'nameOrSound' cannot be null.");var s=null;return t.constructor===String&&(s=dt.default.getSound(t)),s.play(e,n,i,r)}},{key:"stopAll",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(""===t)for(var n in e.instance.mChannels)e.instance.mChannels[n].stopAll();else e.getChannel(t).stopAll()}},{key:"looseListener",value:function(){e.context.listener.setPosition(0,0,1),e.currentListener=null}},{key:"_newGainNode",value:function(){return void 0===e.context.createGain?e.context.createGainNode():e.context.createGain()}},{key:"masterVolume",set:function(t){e.instance.mMasterChannel.volume=t},get:function(){return e.instance.mMasterChannel.volume}},{key:"context",get:function(){return e.instance.mContext}},{key:"masterChannel",get:function(){return e.instance.mMasterChannel}},{key:"currentListener",set:function(t){e.instance.mCurrentListener=t},get:function(){return e.instance.mCurrentListener}}]),e}();ee.instance=null;var ne=function(){function t(){c(this,t),this.mInputNode=null,this.mOutputNode=null}return f(t,[{key:"_inputNode",get:function(){return d.assert(null!=this.mInputNode,"Input node must be specified in descendant class"),this.mInputNode}},{key:"_outputNode",get:function(){return d.assert(null!=this.mOutputNode,"Output node must be specified in descendant class"),this.mOutputNode}}]),t}(),ie=function(t){function e(){var t;return c(this,e),(t=s(this,a(e).call(this))).mGainL=ee._newGainNode(),t.mGainR=ee._newGainNode(),t.mSplitter=ee.context.createChannelSplitter(2),t.mMerger=ee.context.createChannelMerger(2),t.mSplitter.connect(t.mGainL,0),t.mSplitter.connect(t.mGainR,1),t.mGainL.connect(t.mMerger,0,0),t.mGainR.connect(t.mMerger,0,1),t.mValue=0,t.mInputNode=t.mSplitter,t.mOutputNode=t.mMerger,t}return u(e,ne),f(e,[{key:"pan",set:function(t){this.mValue=v.clamp(t,-1,1),this.mGainL.gain.setValueAtTime(1-v.clamp(this.mValue,0,1),0),this.mGainR.gain.setValueAtTime(1+v.clamp(this.mValue,-1,0),0)},get:function(){return this.mValue}}]),e}(),re={NEWBORN:"newborn",PLAYING:"playing",PAUSED:"paused",STOPPED:"stopped",COMPLETED:"completed"},se=function(t){function e(t){var n;return c(this,e),(n=s(this,a(e).call(this))).mId=++e.ID,n.mSound=t,n.mState=re.NEWBORN,n.mChannel="master",n.mVolume=1,n.mLoop=!1,n.mStartTime=0,n.mPausePosition=0,n.mSrc=null,n.mGainNode=ee._newGainNode(),n.mFirstNode=n.mGainNode,n.mPlayNode=null,n.mSpatialPanner=null,n.mStereoPanner=null,n.mAnalyser=null,n}return u(e,M),f(e,[{key:"enableSpacePan",value:function(){return null==this.mSpatialPanner&&(this.mSpatialPanner=ee.context.createPanner(),this.mFirstNode&&(this.mSpatialPanner.connect(this.mFirstNode),this.mFirstNode=this.mSpatialPanner),this.__reconnectSource()),this.mSpatialPanner}},{key:"enableStereoPan",value:function(){return null==this.mStereoPanner&&(this.mStereoPanner=new ie,this.mFirstNode&&(this.mStereoPanner._outputNode.connect(this.mFirstNode),this.mFirstNode=this.mStereoPanner._inputNode),this.__reconnectSource()),this.mStereoPanner}},{key:"enableAnalyser",value:function(){return null==this.mAnalyser&&(this.mAnalyser=ee.context.createAnalyser(),this.mFirstNode&&(this.mAnalyser.connect(this.mFirstNode),this.mFirstNode=this.mAnalyser),this.__reconnectSource()),this.mAnalyser}},{key:"__reconnectSource",value:function(){null!=this.mSrc&&null!=this.mPlayNode&&null!=this.mFirstNode&&(this.mSrc.disconnect(this.mPlayNode),this.mSrc.connect(this.mFirstNode),this.mPlayNode=this.mFirstNode)}},{key:"_play",value:function(){var t=this;if(this.mState===re.PLAYING)return this;this.mState=re.PLAYING;var e=this.mSound.isSubClip&&!this.mLoop?this.mSound.duration-this.mPausePosition:void 0;this.mGainNode.gain.setValueAtTime(this.mVolume,0);var n=ee.context.createBufferSource();return n.buffer=this.mSound.native,n.loop=this.mLoop,n.onended=function(){return t.__onComplete()},this.mFirstNode&&n.connect(this.mFirstNode),this.mPlayNode=this.mFirstNode,this.mStartTime=ee.context.currentTime-this.mPausePosition,this.mLoop&&this.mSound.isSubClip&&(n.loopStart=this.mSound.offset,n.loopEnd=this.mSound.offset+this.mSound.duration),n.start(ee.context.currentTime,this.mSound.offset+this.mPausePosition,e),ee._resolveChannel(this),this.mSrc=n,this}},{key:"stop",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.mState===re.PLAYING&&(this.mGainNode.gain.cancelScheduledValues(0),this.mSrc.stop(ee.context.currentTime+t))}},{key:"pause",value:function(){this.mState===re.PLAYING&&(this.stop(),this.mPausePosition=this.currentPosition,this.mState=re.PAUSED)}},{key:"resume",value:function(){this.mState===re.PAUSED&&this._play()}},{key:"fade",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"linear";n<=0?this.mGainNode.gain.setValueAtTime(e,0):(this.mGainNode.gain.setValueAtTime(t,0),"exp"===i?this.mGainNode.gain.exponentialRampToValueAtTime(Math.max(e,.01),ee.context.currentTime+n):this.mGainNode.gain.linearRampToValueAtTime(e,ee.context.currentTime+n))}},{key:"__onComplete",value:function(){this.mSrc=null,this.mState!==re.PAUSED&&(this.mStartTime=0,this.mState=re.COMPLETED,this.post(N.COMPLETE))}},{key:"currentPosition",get:function(){switch(this.mState){case re.PLAYING:return(ee.context.currentTime-this.mStartTime)%(this.mSound.duration+.01);case re.PAUSED:return this.mPausePosition;case re.COMPLETED:return this.mSound.duration}return 0}},{key:"_outputNode",get:function(){return this.mGainNode}},{key:"channel",get:function(){return this.mChannel},set:function(t){this.mChannel!==t&&(this.mChannel=t,this.mState===re.PLAYING&&ee._resolveChannel(this))}},{key:"volume",get:function(){return this.mVolume},set:function(t){this.mVolume=t,this.mGainNode.gain.setValueAtTime(this.mVolume,0)}},{key:"loop",get:function(){return this.mLoop},set:function(t){this.mLoop=t}},{key:"pan",get:function(){return this.mStereoPanner.pan},set:function(t){0!==t&&null==this.mStereoPanner&&this.enableStereoPan(),this.mStereoPanner&&(this.mStereoPanner.pan=t)}},{key:"isPlaying",get:function(){return this.mState===re.PLAYING}},{key:"duration",get:function(){return this.mSound.duration}}]),e}();se.ID=0;var oe=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:NaN,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];c(this,t),this.mNativeBuffer=e,this.mStartOffset=n,this.mDuration=i||e.duration,this.mIsSubClip=r}return f(t,[{key:"play",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"master",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=new se(this);return r.channel=t,r.volume=e,r.loop=n,r.pan=i,r._play()}},{key:"collectWaveData",value:function(t){for(var e=[],n=0;n<this.mNativeBuffer.numberOfChannels;n++)e[n]=this.mNativeBuffer.getChannelData(n);for(var i=this.mDuration/this.mNativeBuffer.duration,r=this.mStartOffset/this.mNativeBuffer.duration,s=~~(e[0].length*r),o=s+~~(e[0].length*i),a=new Float32Array(t),u=~~(e[0].length*i/t),h=[],c=s,m=0;c<o;c++)if(h.push(this.__averagePeak(e,c)),h.length>=u){var f=Math.max.apply(Math,l(h)),d=Math.min.apply(Math,l(h));a[m++]=(f+d)/2,h=[]}return a}},{key:"__averagePeak",value:function(t,e){var n=0;return t.forEach(function(t){return n+=Math.abs(t[e])}),n/t.length}},{key:"native",get:function(){return this.mNativeBuffer}},{key:"offset",get:function(){return this.mStartOffset}},{key:"duration",get:function(){return this.mDuration}},{key:"isSubClip",get:function(){return this.mIsSubClip}}]),t}(),ae=function(t){function e(t,n){var i;if(c(this,e),(i=s(this,a(e).call(this,t))).mClips={},null!==n)for(var r in n.sounds)i.addSubSound(r,n.sounds[r][0],n.sounds[r][1]);return i}return u(e,oe),f(e,[{key:"addSubSound",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:NaN;return this.mClips[t]=new oe(this.native,e,n,!0),this.mClips[t]}},{key:"removeSubSound",value:function(t){delete this.mClips[t]}},{key:"playSubSound",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"master",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=this.mClips[t];if(null==s)return null;var o=new se(s);return o.channel=e,o.volume=n,o.loop=i,o.pan=r,o._play()}},{key:"subSounds",get:function(){return this.mClips}}]),e}(),ue=function(){function t(e){c(this,t),this.mName=e,this.mGain=ee._newGainNode(),this.mSounds=[],this.mEffects=[]}return f(t,[{key:"attachSound",value:function(t){var e=this;d.assert(null!=t,"Sound cannot be null"),t._outputNode.connect(this._inputNode),this.mSounds.push(t),t.on(N.COMPLETE,function(){e.mSounds.splice(e.mSounds.indexOf(t),1),t._outputNode.disconnect(0)})}},{key:"detachSound",value:function(t){d.assert(null!=t,"Sound cannot be null");var e=this.mSounds.indexOf(t);e>-1&&(this.mSounds.splice(e,1),t._outputNode.disconnect(0))}},{key:"stopAll",value:function(){for(var t=this.mSounds[0];this.mSounds.length;t=this.mSounds.shift())t.stop()}},{key:"addEffect",value:function(t){return d.assert(null!=t,"Effect cannot be null"),t._outputNode.connect(this._inputNode),this.mEffects.unshift(t),this.__reconnectSounds(),t}},{key:"removeEffect",value:function(t){return d.assert(null!=t,"Effect cannot be null"),t._outputNode.disconnect(0),this.mEffects.splice(this.mEffects.indexOf(t),1),this.__reconnectSounds(),t}},{key:"removeAllEffects",value:function(){for(;this.mEffects.length;this.mEffects.shift())this.mEffects[0]._outputNode.disconnect(0);this.__reconnectSounds()}},{key:"__reconnectSounds",value:function(){var t=this;this.mSounds.forEach(function(e){e._outputNode.disconnect(0),e._outputNode.connect(t._inputNode)})}},{key:"volume",set:function(t){this.mGain.gain.setValueAtTime(t,0)},get:function(){return this.mGain.gain.value}},{key:"_inputNode",get:function(){return this.mEffects.length?this.mEffects[0]._inputNode:this.mGain}},{key:"_outputNode",get:function(){return this.mGain}}]),t}(),he=function(){function t(){c(this,t),this.axis=null,this.verticesA=null,this.verticesB=null,this.rangeA=new le,this.rangeB=new le,this.offset=0}return f(t,[{key:"set",value:function(t,e,n){this.verticesA=t,this.verticesB=e,this.axis=n,this.refresh()}},{key:"refresh",value:function(){t.__project(this.verticesA,this.axis,this.rangeA),t.__project(this.verticesB,this.axis,this.rangeB)}}],[{key:"__project",value:function(t,e,n){for(var i=Number.MAX_VALUE,r=-Number.MAX_VALUE,s=0,o=t.length;s<o;s++){var a=t[s].dot(e);i=a<i?a:i,r=a>r?a:r}n.min=i,n.max=r}}]),t}(),le=function t(){c(this,t),this.min=0,this.max=0},ce=function(){function t(){c(this,t),this.a=null,this.b=null,this.bodyA=null,this.bodyB=null,this.mInCollision=!1,this.mIsStatic=!1,this.mNormalImpulse=0,this.mTangentImpulse=0,this.mPositionImpulse=0,this.mFriction=0,this.mBias=0,this.mMass=0,this.mOffset=new w,this.mNormal=new w,this.mOverlap=0,this.mChanged=!1}return f(t,[{key:"test",value:function(){return this.mInCollision}},{key:"preSolve",value:function(){var e=this.mNormal.x,n=this.mNormal.y,i=-n,r=+e,s=this.bodyA.mPosition,o=this.bodyB.mPosition,a=this.bodyA.mVelocity,u=this.bodyB.mVelocity,h=this.bodyA.mInvMass,l=this.bodyB.mInvMass,c=this.mOffset,m=this.mNormalImpulse*e+this.mTangentImpulse*i,f=this.mNormalImpulse*n+this.mTangentImpulse*r;c.x=o.x-s.x,c.y=o.y-s.y,a.x-=m*h,a.y-=f*h,u.x+=m*l,u.y+=f*l;var d=(u.x-a.x)*e+(u.y-a.y)*n,v=t.bounceTreshhold*t.unitsPerMeter*Ye.stage.mScaleX;this.mBias=d<-v?-Math.max(this.bodyA.bounce,this.bodyB.bounce)*d:0,this.mMass=1/(h+l),this.mFriction=Math.min(this.bodyA.friction,this.bodyB.friction),this.mPositionImpulse=0}},{key:"solveVelocity",value:function(){var t=this.mNormal.x,e=this.mNormal.y,n=-e,i=+t,r=this.bodyA.mVelocity,s=this.bodyB.mVelocity,o=this.bodyA.mInvMass,a=this.bodyB.mInvMass,u=-((s.x-r.x)*t+(s.y-r.y)*e-this.mBias)*this.mMass,h=Math.max(this.mNormalImpulse+u,0);u=h-this.mNormalImpulse,this.mNormalImpulse=h;var l=u*t,c=u*e;r.x-=l*o,r.y-=c*o,s.x+=l*a,s.y+=c*a;var m=-((s.x-r.x)*n+(s.y-r.y)*i)*this.mMass,f=this.mFriction*this.mNormalImpulse,d=v.clamp(this.mTangentImpulse+m,-f,f);m=d-this.mTangentImpulse,this.mTangentImpulse=d;var y=m*n,p=m*i;r.x-=y*o,r.y-=p*o,s.x+=y*a,s.y+=p*a}},{key:"solvePosition",value:function(){var e=this.mNormal.x,n=this.mNormal.y,i=this.bodyA.mInvMass,r=this.bodyB.mInvMass,s=this.bodyA.mPosition,o=this.bodyB.mPosition,a=this.mOffset,u=a.x-o.x+s.x,h=a.y-o.y+s.y,l=(this.mOverlap+(u*e+h*n)-t.slop)*t.baumgarte;if(!(l<=0)){var c=l*this.mMass,m=this.mPositionImpulse;this.mPositionImpulse=Math.max(m+c,0);var f=(c=this.mPositionImpulse-m)*e,d=c*n;s.x-=f*i,s.y-=d*i,o.x+=f*r,o.y+=d*r}}}],[{key:"__id",value:function(t,e){return t.mId>e.mId?"".concat(t.mId,"&").concat(e.mId):"".concat(e.mId,"&").concat(t.mId)}}]),t}();ce.timeToSleep=5,ce.slop=1,ce.baumgarte=.2,ce.unitsPerMeter=1,ce.sleepThreshold=.1,ce.bounceTreshhold=1;var me=function(t){function e(){var t;c(this,e),(t=s(this,a(e).call(this))).a=null,t.b=null;for(var n=[],i=0;i<4;i++)n.push(new he);return t.mProjections=n,t}return u(e,ce),f(e,[{key:"set",value:function(t,e,n,i){this.a=t,this.b=e,this.bodyA=n,this.bodyB=i;for(var r=this.mProjections,s=0,o=0;s<4;s+=2,o+=1)r[s].set(t.mVertices,e.mVertices,t.mNormals[o]),r[s+1].set(t.mVertices,e.mVertices,e.mNormals[o]);return this}},{key:"__refreshProjectionsRanges",value:function(){for(var t=this.mProjections,e=0;e<4;e++)t[e].refresh()}},{key:"test",value:function(){var t=this.a,e=this.b;if((t.mChanged||e.mChanged)&&(this.mChanged=!0),t.mMax.x<e.mMin.x||t.mMin.x>e.mMax.x||t.mMax.y<e.mMin.y||t.mMin.y>e.mMax.y)return this.mInCollision=!1;var n=this.mProjections,i=this.mNormal,r=this.bodyB.mPosition.x-this.bodyA.mPosition.x,s=this.bodyB.mPosition.y-this.bodyA.mPosition.y;this.mChanged&&(this.mChanged=!1,this.__refreshProjectionsRanges()),this.mOverlap=Number.MAX_VALUE;for(var o=0;o<4;o++){var a=n[o];a.offset=a.axis.x*r+a.axis.y*s;var u=a.rangeA.min,h=a.rangeA.max,l=a.rangeB.min+a.offset;if(u>a.rangeB.max+a.offset||l>h)return this.mInCollision=!1}for(var c=0;c<4;c++){var m=n[c],f=m.rangeA.min,d=m.rangeA.max,v=m.rangeB.min+m.offset,y=m.rangeB.max+m.offset,p=d-v,g=y-f,k=p<g?p:-g;f<v&&d<y?k=d-v:d>y&&(k=f-y);var b=Math.abs(k);b<this.mOverlap&&(this.mOverlap=b,i.copyFrom(m.axis),k<0&&i.multiplyScalar(-1))}return this.mInCollision=!0}}]),e}();me.pool=new p(me,100);var fe=function(t){function e(){var t;return c(this,e),(t=s(this,a(e).call(this))).a=null,t.b=null,t.mBoxHalfWidth=0,t.mBoxHalfHeight=0,t.mBoxRotate=new w,t.mCircleCenter=new w,t}return u(e,ce),f(e,[{key:"set",value:function(t,e,n,i){return this.a=t,this.b=e,this.bodyA=n,this.bodyB=i,this}},{key:"__rotate",value:function(t,e,n,i,r){var s=t.x-e,o=t.y-n,a=i*s-r*o,u=r*s+i*o;t.x=a+e,t.y=u+n}},{key:"test",value:function(){var t=this.a,e=this.b;if(t.mChanged&&(this.mChanged=!0),t.mMax.x<e.mMin.x||t.mMin.x>e.mMax.x||t.mMax.y<e.mMin.y||t.mMin.y>e.mMax.y)return this.mInCollision=!1;if(this.mChanged){this.mChanged=!1;var n=this.bodyA.mTransform.data,i=Math.sqrt(n[0]*n[0]+n[1]*n[1]),r=Math.sqrt(n[2]*n[2]+n[3]*n[3]);this.mBoxRotate.set(n[0]/i,n[1]/i),this.mBoxHalfWidth=t.mRect.width/2*i,this.mBoxHalfHeight=t.mRect.height/2*r}var s=this.mBoxRotate,o=this.mNormal,a=this.mCircleCenter.copyFrom(e.mCenter),u=this.mBoxHalfWidth,h=this.mBoxHalfHeight,l=0!==s.y;l&&this.__rotate(a,t.mCenter.x,t.mCenter.y,s.x,-s.y);var c=a.x-t.mCenter.x,m=a.y-t.mCenter.y;if(0===c&&0===m)return this.mOverlap=e.mRadius+u,o.set(-1,0),this.mInCollision=!0;var f=v.clamp(c,-u,u),d=v.clamp(m,-h,h),y=c===f&&m===d;y&&(Math.abs(c)>Math.abs(m)?f=f>0?u:-u:d=d>0?h:-h);var p=c-f,g=m-d,k=p*p+g*g,b=e.mRadius;if(k>b*b&&!y)return this.mInCollision=!1;if(0===k)this.mOverlap=b,o.set(0,1);else{var _=Math.sqrt(k);this.mOverlap=b-_,y?o.set(-p/_,-g/_):o.set(p/_,g/_)}return l&&this.__rotate(o,0,0,s.x,s.y),this.mInCollision=!0}}]),e}();fe.pool=new p(fe,100);var de=function(t){function e(){var t;return c(this,e),(t=s(this,a(e).call(this))).a=null,t.b=null,t}return u(e,ce),f(e,[{key:"set",value:function(t,e,n,i){return this.a=t,this.b=e,this.bodyA=n,this.bodyB=i,this}},{key:"test",value:function(){var t=this.a,e=this.b,n=e.mCenter.x-t.mCenter.x,i=e.mCenter.y-t.mCenter.y,r=t.mRadius+e.mRadius;if(0===n&&0===i)return this.mOverlap=r,this.mNormal.set(1,0),this.mInCollision=!0;var s=n*n+i*i;if(s>r*r)return this.mInCollision=!1;var o=Math.sqrt(s);return this.mOverlap=r-o,this.mNormal.set(n/o,i/o),this.mInCollision=!0}}]),e}();de.pool=new p(de,100);var ve=function(){function t(){c(this,t),this.data=null}return f(t,[{key:"parse",value:function(t){return this.data=t,null}}]),t}(),ye="M",pe="m",ge="L",ke="l",be="V",_e="v",we="H",Ce="h",xe="C",Se="c",Te="S",Ae="s",Ee="Q",Pe="q",Re="T",Ne="t",Oe="A",Me="a",Le="Z",De="r",Ie="c",Be="e",Fe="l",He="s",je="p",Ve="g",Xe=function(t){function e(){var t;return c(this,e),(t=s(this,a(e).call(this)))._defs={},t}return u(e,ve),f(e,[{key:"parse",value:function(t){r(a(e.prototype),"parse",this).call(this,t);var n=this.__parseStyles(t.styles);return this._defs={},this.__parseDefs(t.defs,this._defs),this.__traverse(t,n,new Mt,new Ge)}},{key:"__traverse",value:function(t,e,n,i){var r=this,s=this._defs,o=new Mt,a=i.clone();n.mNodes.push(o),t.id&&(o.name=t.id);var u=t.t;if(u){var h=u[0]||0,c=u[1]||0,m=u[2]||1,f=u[3]||1,d=u[5]||0,v=u[6]||0;o.mTransform.rotate(u[4]||0),o.mTransform.scale(m,f),o.mTransform.skew(u[7]||0,u[8]||0),o.mTransform.data[4]=h+d/m,o.mTransform.data[5]=c+v/f,o.mPivotX=d,o.mPivotY=v}if(t.cmds)for(var y=t.cmds.split("$").filter(function(t){return t}).reverse(),p=new x,g="";y.length>0;){var k=y.pop(),_=k[0],w=k.slice(1).split(",").map(function(t){return Number(t)});switch(o.beginPath(),"S"!==g&&"S"!==_&&(o.fillStyle(0,1),o.lineStyle(1,0,1,Vt.NONE,Xt.MITER,4)),g=_,_){case"S":var C=e[w[0]];(a=i.clone()).merge(C),a.compute();break;case je:this.__drawPath(k,o);break;case De:var S=w[0],T=w[1],A=w[2],E=w[3],P=(void 0===w[4]?w[5]:w[4])||0,R=(void 0===w[5]?w[4]:w[5])||0;p.set(S,T,A,E),0!==P&&0!==R?(o.moveTo(S,T+R),o.quadraticCurveTo(S,T,S+P,T),o.lineTo(S+A-P,T),o.quadraticCurveTo(S+A,T,S+A,T+R),o.lineTo(S+A,T+E-R),o.quadraticCurveTo(S+A,T+E,S+A-P,T+E),o.lineTo(S+P,T+E),o.quadraticCurveTo(S,T+E,S,T+E-R),o.closePath()):o.rect(w[0],w[1],w[2],w[3]);break;case Ie:var N=2*w[2];p.set(0,0,N,N),o.circle(w[0],w[1],w[2]);break;case Be:var O=w[0],M=w[1],L=w[2],D=w[3],I=this.__arcToBezier(O-L,M,L,D,0,0,0,O+L,M),B=this.__arcToBezier(O+L,M,L,D,0,0,0,O-L,M),F=l(I).concat(l(B));o.moveTo(O-L,M);for(var H=0,j=F.length;H<j;H++){var V=F[H];o.bezierCurveTo(V[2],V[3],V[4],V[5],V[6],V[7])}break;case Fe:var X=w[0],G=w[1],z=w[2],Y=w[3];o.moveTo(X,G),o.lineTo(z,Y);break;case He:case Ve:var U=k.slice(1).split(",").map(function(t){return Number(t)});o.moveTo(U[0],U[1]);for(var W=2,q=U.length;W<q;W+=2)o.lineTo(U[W],U[W+1]);_===Ve&&o.closePath()}if(a.needsFill&&"S"!==_){if(this.__isRef(a.F)){var Q=s[a.F.slice(1)].clone();if(Q instanceof Ft)o.fillPattern(Q);else if(Q instanceof Bt){for(var K in Q.isAbsolute||(Q.x0*=p.width,Q.x1*=p.width,Q.y0*=p.height,Q.y1*=p.height),Q.stops)Q.stops[K]=b.intToRGBA(parseInt(Q.stops[K].slice(1),16),a.fillAlpha);o.fillGradient(Q)}}else o.fillStyle(a.fillColor,a.fillAlpha);o.fill(a.fillRule===Gt.NONE_ZERO)}a.needsStroke&&(o.lineStyle(a.lineWidth,a.lineColor,a.lineAlpha,a.lineCap,a.lineJoin,a.miterLimit),o.setLineDash(a.lineDash),o.stroke())}return t.nodes&&t.nodes.forEach(function(t){r.__traverse(t,e,o,a)}),o}},{key:"__isRef",value:function(t){return 0===t.indexOf("$")}},{key:"__parseDefs",value:function(t,e){if(!t)return e;for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];if("string"==typeof i){switch(i.charAt(0)){case"R":var r=i.slice(1).split(" "),s=r[0].split(",").map(function(t){return parseFloat(t)}),o=new Bt(s[0],s[1],s[2],s[3]);o.isAbsolute=0===s[4],e[n]=o;for(var a=1,u=r.length;a<u;a++){var h=r[a].split(","),l="#"+h[1];o.addColorStop(parseFloat(h[0]),l)}}}else{var c=this.__parseStyles(i.s),m=this.__traverse(i,c,new Mt,new Ge),f=new Lt(m),d=new q(f.width,f.height,Ye.driver.renderScaleFactor);Ye.driver.render(f,d,new C),e[n]=new Ft(d.native,i.r)}}return e}},{key:"__parseStyles",value:function(t){return t?t.map(function(t){var e={};return t.split(" ").forEach(function(t){var n=t[0];e[n]=t.slice(1)}),e}):[]}},{key:"__drawPath",value:function(t,e){var n=[];t.split(",").map(function(t){for(;0!==t.length;){var e=parseFloat(t);if(isNaN(e))n.push(t.charAt(0)),t=t.slice(1);else{n.push(e);for(var i=1;;i++)if(parseFloat(t.slice(0,i))===e){t=t.slice(i);break}}}}),n.reverse();for(var i=0,r=0,s=0,o=0,a=0,u=0,h=0,l=0,c="",m=0,f=0;0!==n.length;){var d=n[n.length-1],v=d===d.toString()?n.pop():c;switch(c=v,m=f=0,v===v.toLowerCase()&&(m=i,f=r),v){case ye:case pe:i=n.pop()+m,r=n.pop()+f,e.moveTo(i,r),s=i,o=r;break;case ge:case ke:i=n.pop()+m,r=n.pop()+f,e.lineTo(i,r);break;case be:case _e:r=n.pop()+f,e.lineTo(i,r);break;case we:case Ce:i=n.pop()+m,e.lineTo(i,r);break;case xe:case Se:var y=n.pop()+m,p=n.pop()+f,g=n.pop()+m,k=n.pop()+f;i=n.pop()+m,r=n.pop()+f,e.bezierCurveTo(y,p,g,k,i,r),a=2*i-g,u=2*r-k;break;case Te:case Ae:var b=n.pop()+m,_=n.pop()+f;i=n.pop()+m,r=n.pop()+f,e.bezierCurveTo(a,u,b,_,i,r),a=2*i-b,u=2*r-_;break;case Ee:case Pe:var w=n.pop()+m,C=n.pop()+f;i=n.pop()+m,r=n.pop()+f,e.quadraticCurveTo(w,C,i,r),h=2*i-w,l=2*r-C;break;case Re:case Ne:i=n.pop()+m,r=n.pop()+f,e.quadraticCurveTo(h,l,i,r),h=2*i-h,l=2*r-l;break;case Oe:case Me:var x=i,S=r,T=n.pop(),A=n.pop(),E=n.pop(),P=n.pop(),R=n.pop();i=n.pop()+m,r=n.pop()+f;var N=this.__arcToBezier(x,S,T,A,E,P,R,i,r);if(!N)break;for(var O=0,M=N.length;O<M;O++){var L=N[O];e.bezierCurveTo(L[2],L[3],L[4],L[5],L[6],L[7])}break;case Le:e.closePath(),i=s,r=o}v!==xe&&v!==Se&&v!==Te&&v!==Ae&&(a=i,u=r),v!==Ee&&v!==Pe&&v!==Re&&v!==Ne&&(h=i,l=r)}}},{key:"__approxUnitArc",value:function(t,e){var n=4/3*Math.tan(e/4),i=Math.cos(t),r=Math.sin(t),s=Math.cos(t+e),o=Math.sin(t+e);return[i,r,i-r*n,r+i*n,s+o*n,o-s*n,s,o]}},{key:"__vectorAngle",value:function(t,e,n,i){var r=t*i-e*n<0?-1:1,s=v.clamp(t*n+e*i,-1,1);return r*Math.acos(s)}},{key:"__getArcCenter",value:function(t,e,n,i,r,s,o,a,u,h){var l=h*(t-n)/2+u*(e-i)/2,c=-u*(t-n)/2+h*(e-i)/2,m=o*o,f=a*a,d=l*l,v=c*c,y=Math.max(0,m*f-m*v-f*d);y/=m*v+f*d;var p=(y=Math.sqrt(y)*(r===s?-1:1))*o/a*c,g=y*-a/o*l,k=h*p-u*g+(t+n)/2,b=u*p+h*g+(e+i)/2,_=(l-p)/o,w=(c-g)/a,C=(-l-p)/o,x=(-c-g)/a,S=this.__vectorAngle(1,0,_,w),T=this.__vectorAngle(_,w,C,x);return 0===s&&T>0&&(T-=2*Math.PI),1===s&&T<0&&(T+=2*Math.PI),[k,b,S,T]}},{key:"__arcToBezier",value:function(t,e,n,i,r,s,o,a,u){var h=Math.sin(r*Math.PI/180),l=Math.cos(r*Math.PI/180),c=l*(t-a)/2+h*(e-u)/2,m=-h*(t-a)/2+l*(e-u)/2;if((0!==c||0!==m)&&0!==n&&0!==i){n=Math.abs(n),i=Math.abs(i);var f=c*c/(n*n)+m*m/(i*i);if(f>1){var d=Math.sqrt(f);n*=d,i*=d}var v=this.__getArcCenter(t,e,a,u,s,o,n,i,h,l),y=[],p=v[2],g=v[3],k=Math.max(Math.ceil(Math.abs(g)/(.5*Math.PI)),1);g/=k;for(var b=0;b<k;b++)y.push(this.__approxUnitArc(p,g)),p+=g;return y.map(function(t){for(var e=0;e<t.length;e+=2){var r=t[e]*n,s=t[e+1]*i,o=l*r-h*s,a=h*r+l*s;t[e]=o+v[0],t[e+1]=a+v[1]}return t})}}}]),e}(),Ge=function(){function t(){c(this,t),this.L="-",this.l=1,this.w=1,this.F="0",this.f=1,this.r=1,this.c="b",this.j="m",this.m=4,this.a=1,this.d="",this.needsFill=!0,this.needsStroke=!1,this.fillColor=0,this.fillAlpha=1,this.lineColor=0,this.lineAlpha=1,this.lineWidth=1,this.lineCap=Vt.NONE,this.lineJoin=Xt.MITER,this.miterLimit=this.m,this.fillRule=Gt.NONE_ZERO,this.lineDash=[]}return f(t,[{key:"merge",value:function(t){t.F&&(this.F=t.F),t.L&&(this.L=t.L),t.w&&(this.w=t.w),t.l&&(this.l*=t.l),t.f&&(this.f*=t.f),t.r&&(this.r=t.r),t.c&&(this.c=t.c),t.j&&(this.j=t.j),t.m&&(this.m=t.m),t.a&&(this.a=t.a),t.d&&(this.d=t.d)}},{key:"compute",value:function(){this.needsFill="-"!==this.F,this.needsFill&&(this.fillColor=parseInt(this.F,16)),this.lineWidth=+this.w,this.needsStroke="-"!==this.L&&this.lineWidth>0,this.needsStroke&&(this.lineColor=parseInt(this.L,16));var t=Number(this.a);this.lineAlpha=Number(this.l)*t,this.fillAlpha=Number(this.f)*t,this.lineCap={b:Vt.NONE,r:Vt.ROUND,s:Vt.SQUARE}[this.c],this.lineJoin={m:Xt.MITER,r:Xt.ROUND,b:Xt.BEVEL}[this.j],this.miterLimit=Number(this.m),this.fillRule={1:Gt.NONE_ZERO,0:Gt.EVEN_ODD}[this.r],this.lineDash=this.d.split(",").map(function(t){return Number(t)})}},{key:"clone",value:function(){var e=new t;return e.L=this.L,e.l=this.l,e.w=this.w,e.F=this.F,e.f=this.f,e.r=this.r,e.c=this.c,e.j=this.j,e.m=this.m,e.a=this.a,e}}]),t}(),ze=function(t){function e(){return c(this,e),s(this,a(e).call(this,!1))}return u(e,M),f(e,[{key:"show",value:function(){var t=this,n=.001*e.duration,i="#logo,#splash-screen{position:relative;box-sizing:border-box}#logo-inner,#logo-name{margin-left:auto;margin-right:auto}#splash-screen{z-index:999;top:0;left:0;width:100%;height:100%;display:block;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAYAAACp8Z5+AAAAIklEQVQYV2OUkpL6/+zZMwYpKSkGEM3IwMDwnwEJMBJUAQCLUhABUGRZzwAAAABJRU5ErkJggg==);opacity:1;animation:hide 0s ease-in ".concat(n,"s forwards}@keyframes hide{to{opacity:0}}#logo{top:20%;left:50%;animation:fadein ").concat(n,"s linear forwards}@keyframes fadein{0%{opacity:0}100%,40%{opacity:1}}#logo-name{width:100%;margin-top:108px}"),r=document.createElement("style");r.type="text/css",r.innerHTML=i,document.getElementsByTagName("head")[0].appendChild(r);var s=document.getElementById(Ye.instance.containerElementId),o=s.style.overflow;s.style.overflow="hidden";var a=document.createElement("div");a.id="splash-screen",s.appendChild(a);var u=document.createElement("div");u.id="logo",a.appendChild(u);var h=document.createElement("div");h.id="logo-inner",h.innerHTML=e.SVG_LOGO,u.appendChild(h);var l=document.createElement("div");l.id="logo-name",l.innerHTML=e.SVG_TEXT,u.appendChild(l);var c=function(){var e=a.offsetWidth,n=a.offsetHeight,i=t.calculateAspectRatioFit(e,n,.5*e,.5*n);u.style.width="".concat(i.width,"px"),u.style.height="".concat(i.height,"px"),u.style.marginLeft="".concat(.5*-i.width,"px"),h.style.width="".concat(Math.min(i.width,i.height),"px"),h.style.height="".concat(Math.min(i.width,i.height),"px"),l.style.width="".concat(.9*Math.min(i.width,i.height),"px"),l.style.height="".concat(Math.min(i.width,i.height),"px"),l.style.marginTop="".concat(12,"px")};c();var m=s.offsetWidth,f=s.offsetHeight,d=setInterval(function(t){m===s.offsetWidth&&f===s.offsetHeight||(m=s.offsetWidth,f=s.offsetHeight,c())},1e3/60);setTimeout(function(){clearTimeout(d),r.parentNode.removeChild(r),a.parentNode.removeChild(a),s.style.overflow=o,t.post(N.COMPLETE)},e.duration),this.post(N.COMPLETE)}},{key:"calculateAspectRatioFit",value:function(t,e,n,i){var r=Math.min(n/t,i/e);return{width:t*r,height:e*r}}}]),e}();ze.duration=4200,ze.enabled=!0,ze.SVG_LOGO='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 241.8 220.2"><defs><style>.b{fill:#f5f5f5}.c{fill:url(#a)}</style><pattern id="a" width="17.6" height="14.87" patternUnits="userSpaceOnUse" viewBox="0 0 17.6 14.9"><path fill="none" d="M0 0h17.6v14.87H0z"/><path class="b" d="M0 13.4v1.5h1.5A1.5 1.5 0 0 1 0 13.4z"/><path class="b" d="M8.8 0a1.5 1.5 0 0 1 1.5 1.5 1.5 1.5 0 1 1-3 0A1.5 1.5 0 0 1 8.8 0H0v13.4a1.5 1.5 0 0 1 1.5-1.5A1.5 1.5 0 0 1 3 13.4a1.5 1.5 0 0 1-1.5 1.5h4.3a1.5 1.5 0 0 1-1.5-1.5 1.5 1.5 0 0 1 1.5-1.5 1.4 1.4 0 0 1 1.5 1.5 1.5 1.5 0 0 1-1.5 1.5h6a1.5 1.5 0 0 1-1.5-1.5 1.5 1.5 0 0 1 3 0 1.5 1.5 0 0 1-1.5 1.5h5.8V0zm6.6.7a1.5 1.5 0 0 1 1.5 1.5 1.5 1.5 0 0 1-1.5 1.5 1.4 1.4 0 0 1-1.5-1.5A1.5 1.5 0 0 1 15.4.7zM.4 2.2A1.5 1.5 0 0 1 1.9.7a1.5 1.5 0 0 1 1.5 1.5 1.5 1.5 0 0 1-1.5 1.5A1.5 1.5 0 0 1 .4 2.2zm1.7 5.7A1.5 1.5 0 0 1 .6 6.4a1.5 1.5 0 0 1 1.5-1.5 1.5 1.5 0 0 1 0 3zm2 3.8a1.5 1.5 0 0 1-1.5-1.5 1.5 1.5 0 0 1 1.5-1.5 1.5 1.5 0 0 1 1.5 1.5 1.5 1.5 0 0 1-1.5 1.5zm.2-8a1.5 1.5 0 0 1 1.5-1.5 1.5 1.5 0 0 1 1.5 1.5 1.4 1.4 0 0 1-1.5 1.5 1.5 1.5 0 0 1-1.5-1.5zm2.2 3.5a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0zm2.2 5.3a1.5 1.5 0 1 1 1.5-1.5 1.5 1.5 0 0 1-1.5 1.5zm1.4-8a1.5 1.5 0 0 1 3 0 1.5 1.5 0 1 1-3 0zm2.5 5.7a1.5 1.5 0 0 1-1.5-1.5 1.5 1.5 0 0 1 1.5-1.5 1.4 1.4 0 0 1 1.5 1.5 1.5 1.5 0 0 1-1.5 1.5zm3 3.5a1.5 1.5 0 0 1-1.5-1.5 1.5 1.5 0 0 1 1.5-1.5 1.5 1.5 0 0 1 1.5 1.5 1.4 1.4 0 0 1-1.5 1.5zm0-5.5a1.5 1.5 0 0 1-1.5-1.5 1.5 1.5 0 0 1 1.5-1.5 1.5 1.5 0 0 1 1.5 1.5 1.4 1.4 0 0 1-1.5 1.5z"/></pattern></defs><path class="c" d="M25.8 105.2c12.1 8.8 29.7 6.7 59.8 6.8-7.9-7.3-9.1-18.7-7.1-27.3-6.6 7.3-5.1 19.3-12.8 19.4-3.4.1-6.9-4.7-8.3-10.8-5.3 9.4-12 10.7-14.7-4.5-2.3 2-3.9 8.2-9.5 6.2S26.8 81.8 30 71.3A28.3 28.3 0 0 1 14.6 61c-1.4 20.8.5 36.4 11.2 44.2zM51.9 39.9c29.7-3.6 54-22.8 69.5-26.3-.1 0-40.7-.3-72.3 1.9 6.2 3.5 10.5 16.3 2.8 24.4zM170.4 34.2c5.6-2 32.1-9.5 54.4-2.7-3-13.7-22.9-17-71.8-17.8a32.2 32.2 0 0 1 17.4 20.5zM211.3 109.3c-12.2 2.1-12.8-8.8-32.9-8.9-15.5 0-35.2 13.2-36.1 13.7h49.3c19.1 0 32.5-.6 35.5-7.3s-2.7-12.3-10.7-15.6c5.3 5.6 4.1 16.5-5.1 18.1zM66 189.2c-5.9 5-26 17.8-43.6 6.3 3.6 8.4 13.6 12.7 45.1 12-1.6-2.4-5.3-10.4-1.5-18.3zM32 161.5c7.3 7.8 18.1 2.6 33.7-6.2 10.5-6 27.5-9.9 40.6-1.1 3.7-8.7 5.4-10.9 6.7-10.6s.7 2.7 5.6 7c.4-1 3.8-7.9 3.8-12l-59.9-.8c-1.5 6.6-9.9 19-23.9 17.4-2.4-.3-2.5-11.6 2.4-16.9a36.7 36.7 0 0 0-7.4.9c-4.4 5.1-7 16.4-1.6 22.3zM150.9 148.1c23.6-.5 26 19.9 41.1 21 10.9.9 13.6-16.8 35.7-11.8-1.3-11.1-7.7-16.2-22.2-17.4 3 10.3-6.6 28.5-19.3 21.5a1.5 1.5 0 0 1-.8-1.1c-.9-11 2.8-15.8 7.5-20.7l-55.7-.7a18.5 18.5 0 0 1 3.7 12.4 20.7 20.7 0 0 1 10-3.2zM162 195.9c-3.9 3.6-3.8 9.5-2.5 12.5h4.1c0-14.8 17-12.8 21.2-.8 22.7-1.5 30.9-3.2 36-8.7s6.4-15.3 6.8-27.1c-2.6 3-9.8 14.7-10.9 16.4-17.8 26.3-39.9-5.9-54.7 7.7z"/><path class="b" d="M150 42.6c-.2 10.4-9.8 13.6-9.4-.7-16.2 1.9-14.5 8.5-13.7 9.5 4.4 5.6 29 4.5 27.3-4.3a5.7 5.7 0 0 0-4.2-4.5z"/><path class="b" d="M162.2 46.4c-1.7-15.7-17.2-18.2-28.4-15.6s-22.3 12.7-15.6 25.4 46.2 10.3 44-9.8zm-37.8 6.7c-5.4-9.7 10.6-13.4 13.2-13.8 7.5-1.3 18.2-1.2 19.6 7.6 2 13.2-28.8 13.3-32.8 6.2zM184.7 68.8c-1.1 0-1.1 3.3-5.4 12.5.3 0 5.8 0 8.6.2-.7-9.1-2.1-12.7-3.2-12.7zM162.5 82.9l7-1.1c-2.5-4.6-5.8-8.6-7 1.1zM153.1 74.5a55.8 55.8 0 0 0-7.8 2c6.4 9.4 7.4 2.2 7.8-2zM134.8 94.6c.4-.2 4.9-3.1 6.9-4.1-1.9-2-8.1-9.9-6.9 4.1zM190.9 81.8a58.3 58.3 0 0 1 9 1.5 77.7 77.7 0 0 0 .4-8.8c-1.7-.3-7.2-1.2-10.3-1.5a52 52 0 0 1 .9 8.8z"/><path class="b" d="M216.5 76.2a39.1 39.1 0 0 1-5.6 10.4c13 3 25.3 10.8 18.1 23.1-3.8 6.6-16.4 7.5-37.4 7.5l-55.4-.2a32.3 32.3 0 0 1-18.8 1.1c-6.8 1.5-18.2 3.7-28.2-3.1-30.8-.4-49.7 3.2-64.9-7.1C6.4 95.7 11.6 60.3 12 56.8c-6.4-12.5-.8-29.4 2.3-34.1S29.4 7.5 44.4 13c.2-.1 27.5-2.4 76-2.4 74.4 0 105.2.8 107.6 22.3 6 2.4 13.2 13 6.2 21 4.8 9.4.1 19.1-9.7 21.5a37.4 37.4 0 0 1 10.7 5.7c1.4-2.5 8.5-19.8 4.8-41.9-4.5-27.1-17.9-33.2-35.4-34.9C157.9 0 88.5.2 81.7.1 38.1-.3 18.2-.5 8.1 22.2-3.1 47.6-2.6 91.7 9.1 108c7.7 10.7 19.1 15.3 37.9 15.3 34.5 0 141.3 1.4 165.3 1.8 11-.3 27.9-3.4 29.3-19.7s-6.8-25.2-25.1-29.2z"/><path class="b" d="M202.7 88.6c1.3-.2 6.5-2 10.7-12.6-3-.2-6.3-.5-10.1-1.1.8 11.4-3 14-.6 13.7z"/><path class="b" d="M231.9 56c-7.6 5.5-18.2 1.8-19.8-3.4-2.6-8.6 4.4-10.9 6.7-10.6 7.7.8 7 6.1 4 8.1a1.5 1.5 0 0 1-1.9-2.4c1.8-1.3 0-2.8-2.1-2.7s-5.4 1-3.8 6.7 17.1 7.3 18.9-4.4c1-6.8-5.8-16.4-32.5-15.4a108.5 108.5 0 0 0-30.4 5.2c1.2 8.3-1.9 15.7-8.5 20.1-5.3 11.2-41.6 17.9-48.4-2.7-7.5.8-13.1 10-13.9 14.9a1.4 1.4 0 0 1-1.6 1.2c-6.5-.7-16.7 3.6-17.9 20-1.3 18.3 14.9 29.2 31.7 25.4a21.7 21.7 0 0 1-5-3.5c-5.7-.2-13.7-1.1-17.4-12.1-.6-1.7 2.1-3.2 2.9-.9 2.5 7.8 8.3 9.6 11.8 10a23.3 23.3 0 0 1-4.4-13.3c-.1-2.5 3-2 3-.2-.1 12.3 14.5 29.4 42 13 33.9-20.2 50.8-8.1 55.8-5 1.4.9 9.2 5.2 13.7.1 1.8-2 4.1-10.3-6.4-14.9-4.2 3.7-11.5 3.3-8.9-3-32.1-5.7-50.2 2.7-61.8 10.2s-16.4.3-17-2.5c-1.8-8.4 16.6-26.2 60.2-24.6 1.3-3.9 5.3-5.7 8.1.6 7.4.6 18 3.2 28.9 3.2s18.2-5.3 14-17.1z"/><path class="b" d="M176 81.3l3.8-9.1a107.7 107.7 0 0 0-23.6 1.6c-1.1 15.7-9.6 10.9-13.8 3.6-27.3 10.6-19.1 22.7-10.5 18.6-1.6-15.7 6-15 12.5-7a77.4 77.4 0 0 1 15.1-5.4c1.4-15.6 10-9.6 13.3-2.1zM65.8 101.1c5.2-.4 1.4-10.4 17-26.2 13.1-13.2-7.9-26.6-17.9-13s-4.4 39.6.9 39.2z"/><path class="b" d="M49.8 63.9c-4.7 6.2-6.6 20.2-2.4 30.6 2.9 7 6.9-1.5 9.3-5.4-1.2-8.8 0-20.5 5.2-28.1-5.6-3.5-10.1.3-12.1 2.9zM32.3 74.3c-2.4 10.4-.6 17.3 2.6 18.1s4.7-5.4 7.3-7.6c-.6-7.7.9-15.8 4.2-21.2-8.7-3.1-12.8 5.3-14.1 10.7z"/><path class="b" d="M12.2 39.9c-1.8 22.1 15.2 28 18.9 28.5 1.7-3.6 6.8-11.4 17.2-7.3 5.5-6.4 12-4.8 15.5-2.5C73.9 48.2 92 53.8 89.6 69.3a16.6 16.6 0 0 1 7.9-1.7c1.7-5.9 7.7-14.9 15.9-16.1a18.6 18.6 0 0 1 5.1-15.2c-4 1.6-20.6 10.6-28.1 12.3-1.4.3-2.4-2.4-.3-3 9.3-2.5 26.9-13.5 42.8-17.6 19.5-5.2 34.5 6.7 32.1 22.8 10.1-14.5-5.4-34.6-20.7-36.4-33.4-4.1-53.3 26.5-98.8 28.9-7 .4-11.9-2-13.7-6s-.9-9 3.7-10.6c2.1-.7 3.5 2.3 1.1 2.8s-4.9 9.2 4.8 10.7c12.7 2 14.5-14.3 7.3-21.2s-34-9.4-36.5 20.9zM108.8 156a30.1 30.1 0 0 1 6.8 8.2 45.5 45.5 0 0 1 2-10.6 17.4 17.4 0 0 1-5-5.7 47.5 47.5 0 0 0-3.8 8.1zM40.3 152.4c7.2.6 18.4-6.1 19.7-17.7-20.3-.3-20.5 13-19.7 17.7zM105.5 182.8c-9.5-20.1-30.2-13.6-46.7-2.2-14.8 10.3-29.4 7.7-35.8.1a31.5 31.5 0 0 1-4.6-32.4C5 168 14.6 187.8 24.8 193.5c18.7 10.5 37.8-5 41.6-8.5 12.4-11.2 28.8-11.8 33.4 2.2 4 12.2-7.6 21.6-15.9 18.1-10.7-4.4-6.4-13.5-3.1-15.1a7.4 7.4 0 0 1 8.7 1.9c1.2 1.3-.5 3.6-2.1 2.1s-3.5-2.1-5.1-1.3-4.3 7.6 2.6 9.6c8.9 2.6 14.7-7.1 12-14.4-3.9-10.7-15.2-8.9-19.9-6.6-14.5 7.2-12.8 30 6 30.7 23.2.9 27-19.8 22.5-29.4zM188.4 159.2c11.6 4.5 18.7-15.8 11.7-23.9-4.2 7.6-13.1 10.2-11.7 23.9z"/><path class="b" d="M191.9 172.1c-15.6-.4-20.8-23.1-41.9-20.9-24 2.5-24.8 45.6-13.1 57.6h3.1c-4.1-9.4-6.7-28.1 7.8-38.2 1.7-1.1 3.6 1.3 1.7 2.5-13.6 9.4-10.2 27.6-6.2 35.7h3.5c-4.2-8.4-3.6-21.3 2.4-27.3 18.5-18.3 44.9 16.4 57.1-.5 8-11.1 12.7-17.8 26.8-16.9a13.3 13.3 0 0 0-7-4c-19.7-4.1-20.7 12.4-34.2 12z"/><path class="b" d="M208.6 182.8c-13.7 18.8-40.7-15.8-57.2.7-5.4 5.4-5.6 18-1.2 25.1h6.1c-2-5.6.6-12.1 3.8-14.9 17.6-15 37.6 17.6 54.2-7.3 1-1.5 8.3-14.5 13.9-19.3-10.5.6-14.4 8.6-19.6 15.7z"/><path class="b" d="M238.8 151.3c-4-14.1-13.7-23-25.3-23.2-.3 0-120-1.8-163.5-1.8-40.8 0-44.9 21.4-47.3 34.2-3.8 20.4 3.9 40.1 8.9 46.1 9.4 11.4 25.3 13.6 48 13.6l128.4-.3c35.9 0 44.8-12.6 48.4-23.6 4.7-14 5.7-33.3 2.4-45zm-1.3 15.2c-1.5 1.5-3.3-.7-6.8 2.3.1 26.5-6.3 35.4-19 38.4-16.1 3.8-43.4 4.7-112.7 4.4-5.8 3.8-19.8 6.6-29-1.2-23.1.7-48.8.4-51.7-18.1-4.9-4.8-12.3-15.9-8.2-33.2 5.2-21.3 22.1-24.3 34.6-23.9 4.2-2.6 10-3.9 17-3.4 2 .2 1.4 2.5 1.3 3l59.3.8c.1-2-.9-2.5.1-3.9s8.9 1.7 11.8 4.1l61.1 1c4.2-4.3 3.6-10 9.2 0 12.4.9 25 4.3 26.3 21.8 3.7 1.8 8.1 6.4 6.7 7.9z"/><path class="b" d="M166.6 208.3l15.1-.6c-3.8-8.4-15.4-10.2-15.1.6zM113.3 166.2c-11.1-19.9-33.8-15.2-46.1-8.3-16.4 9.1-28.6 15.1-37.4 5.6-5.7-6.1-4.3-16.7-.5-23.4-12.8 6.6-13.3 28.1-4 38.6 5.7 6.5 18.5 8.7 31.8-.5 16.2-11.4 36.6-18.1 48.8-1.1 5.5 7.7 6.4 22.9-3 31.6h7.1c8-7 11.2-28.4 3.3-42.5z"/><path class="b" d="M137.7 153.6c1.7-13.2-7.4-17.4-12.4-18.8 1.6 11.6-8 17-6.8 36 4.6 13.7 2 29.9-4.4 38h19c-8.6-12.6-10-41.8 4.6-55.2z"/></svg>',ze.SVG_TEXT='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 228.9 29"><defs><style>.a{fill:#f5f5f5}</style></defs><path class="a" d="M9.7 19a3.7 3.7 0 0 1 2.9 1.4 6 6 0 0 1 .9 3.6 4.6 4.6 0 0 1-1.4 3.8c-.9.7-2.5 1-4.7 1L0 28.7V10.1l6.6-.2a9.4 9.4 0 0 1 4.9 1c.9.7 1.4 2 1.4 3.9a5.1 5.1 0 0 1-.7 3A3.3 3.3 0 0 1 9.7 19zm-6.4-1.1h3.4a3.3 3.3 0 0 0 2.3-.6 2.5 2.5 0 0 0 .7-2.1 2.9 2.9 0 0 0-.7-2.1 5.1 5.1 0 0 0-2.6-.5H3.3zm0 8.3h3.5a3.9 3.9 0 0 0 2.6-.6c.5-.3.7-1.1.7-2.2a3 3 0 0 0-.7-2.4 3.8 3.8 0 0 0-2.7-.7H3.3zM22.9 10.1v14.3a2.1 2.1 0 0 0 .3 1.2 2.3 2.3 0 0 0 1.3.3h6.4l.2 2.6c-1.8.2-4.3.2-7.4.2s-4.2-1.2-4.2-3.8V10.1zM46.2 23.4h-6.9l-1.5 5.3h-3.5L39.9 11a1.2 1.2 0 0 1 1.2-.9h3.3a1.2 1.2 0 0 1 1.2.9l5.6 17.7h-3.5zm-.8-2.7l-1.9-6.4c-.2-1-.4-1.5-.4-1.6h-.7l-.4 1.6-1.9 6.4zM68.2 25.8l.3 2.5a18.5 18.5 0 0 1-5.7.7c-2.8 0-4.7-.7-5.8-2.1s-1.7-4-1.7-7.5.5-6 1.7-7.4 3-2.2 5.8-2.2a19.8 19.8 0 0 1 5.3.6l-.3 2.6a39.4 39.4 0 0 0-5-.2c-1.5 0-2.6.4-3.1 1.4s-.9 2.7-.9 5.2.3 4.3.9 5.2a3.2 3.2 0 0 0 3.1 1.5 37.5 37.5 0 0 0 5.4-.3zM79.1 20.3h-1.8a11.1 11.1 0 0 1 .2 1.9v6.5h-3.4V10.1h3.4v5.5a12.5 12.5 0 0 1-.2 2.1h1.8l5.1-7.6h3.7l-5 7.5a4.3 4.3 0 0 1-1.3 1.4 4.5 4.5 0 0 1 1.5 1.6l5.1 8h-3.7zM100 21.4l-3.8-1.2a5.1 5.1 0 0 1-2.8-2 5.9 5.9 0 0 1-.9-3.4c0-2 .5-3.4 1.4-4s2.6-1 5-1a24 24 0 0 1 5.8.6l-.2 2.4H99a4.7 4.7 0 0 0-2.5.4c-.4.2-.6.8-.6 1.7a2.5 2.5 0 0 0 .4 1.7 3.8 3.8 0 0 0 1.7.8l3.5 1.1a5.3 5.3 0 0 1 3 2 5.9 5.9 0 0 1 .9 3.4c0 2.1-.5 3.4-1.5 4.2s-2.7 1-5.1 1a30.8 30.8 0 0 1-6.1-.6L93 26l5.8.2a4.4 4.4 0 0 0 2.5-.5 2.2 2.2 0 0 0 .6-1.8 2.2 2.2 0 0 0-.4-1.6 3.5 3.5 0 0 0-1.5-.9zM126 10.1h3.5a1.2 1.2 0 0 1 1.3 1.4l.8 17.2h-3.3l-.7-15.8h-.5l-3.2 12.3a1.3 1.3 0 0 1-1.4 1.1H120a1.4 1.4 0 0 1-1.5-1.1l-3.2-12.3h-.5l-.6 15.8h-3.3l.7-17.2c.1-.9.5-1.4 1.4-1.4h3.5a1.2 1.2 0 0 1 1.3 1.2l2.7 10 .5 2.6h.4a26.1 26.1 0 0 1 .6-2.6l2.6-10a1.4 1.4 0 0 1 1.4-1.2zM141.4 28.7H138V10.1h3.4zM161.5 13h-5.7v15.7h-3.4V13h-5.7v-2.9h14.8zM180.9 10.1v18.6h-3.4v-8.5h-7.3v8.5h-3.4V10.1h3.4v7.3h7.3v-7.3zM196 13.1l-.2-2.6a24.4 24.4 0 0 1 5.9-.7 8.9 8.9 0 0 1 4.5.9 3.5 3.5 0 0 1 1.5 3.3 6.4 6.4 0 0 1-.7 3.1 13.3 13.3 0 0 1-2.4 3.3l-4.9 5.3 2.8-.2h5.8v3.2h-12.7v-2a2 2 0 0 1 .5-1.4l4.9-5.4c2.2-2.4 3.3-4.2 3.3-5.6a1.3 1.3 0 0 0-.7-1.3 5.7 5.7 0 0 0-2.2-.3 52.9 52.9 0 0 0-5.4.4zM214.3 28.7V10.1l7-.2c2.8 0 4.8.7 5.9 2.1s1.7 3.8 1.7 7.4-.6 6.1-1.7 7.5-3.1 2-5.9 2-4.5 0-7-.2zm3.4-16v13.4h3.6a3.6 3.6 0 0 0 3.2-1.4 12.6 12.6 0 0 0 .8-5.3c0-2.5-.3-4.3-.9-5.3a3.3 3.3 0 0 0-3.1-1.4h-3.6zM.1 8.1v-8h2.7a2.9 2.9 0 0 1 2.1.5 3 3 0 0 1 .5 2 2.9 2.9 0 0 1-.5 1.9 2.5 2.5 0 0 1-1.9.6H1.2v3zm1.1-4h1.6a1.6 1.6 0 0 0 1.1-.3 2.1 2.1 0 0 0 .3-1.2 2.3 2.3 0 0 0-.3-1.3A1.6 1.6 0 0 0 2.8 1H1.2zM9.7 0a3 3 0 0 1 2.5.9 5.2 5.2 0 0 1 .7 3.2 5 5 0 0 1-.7 3.2 3 3 0 0 1-2.5.9 2.8 2.8 0 0 1-2.4-.9 5 5 0 0 1-.7-3.2A5.2 5.2 0 0 1 7.3.9 2.8 2.8 0 0 1 9.7 0zm1.6 1.7A1.7 1.7 0 0 0 9.7 1a1.6 1.6 0 0 0-1.5.7 4.5 4.5 0 0 0-.4 2.4 4.5 4.5 0 0 0 .4 2.4 1.6 1.6 0 0 0 1.5.7 1.7 1.7 0 0 0 1.6-.7 4.5 4.5 0 0 0 .4-2.4 4.5 4.5 0 0 0-.4-2.4zM24.2.1l-1.6 7.6a.4.4 0 0 1-.4.4h-1.3a.4.4 0 0 1-.4-.4l-1.2-5.8a3.4 3.4 0 0 1-.1-.9h-.3l-.2.9-1.1 5.8V8h-1.7c-.3 0-.4-.1-.5-.4L13.9.1h1.2l1.2 6.1a5.1 5.1 0 0 0 .1 1h.3c0-.3.1-.7.1-1L18 .5a.4.4 0 0 1 .4-.4h1.3a.2.2 0 0 1 .2.2.2.2 0 0 1 .2.2l1.1 5.7c.1.3.1.6.2 1h.3v-.5a1.1 1.1 0 0 0 .1-.5L22.9.1zM30.3 7.1V8H27a1.6 1.6 0 0 1-1.2-.4 1.2 1.2 0 0 1-.4-1v-5a1.4 1.4 0 0 1 .4-1.1A2.1 2.1 0 0 1 27 .1h3.4V1h-3.2l-.5.2a.7.7 0 0 0-.1.5v1.7h3.3v1h-3.3v2a1.1 1.1 0 0 0 .1.6h3.6zM37.6 8.1h-1.2l-.7-2.5a1.1 1.1 0 0 0-1-.8h-1.6v3.3h-1.2v-8h2.8a3.4 3.4 0 0 1 2 .5 2.4 2.4 0 0 1 .6 1.8 2.8 2.8 0 0 1-.3 1.4 2 2 0 0 1-1.2.6 1.4 1.4 0 0 1 1 1.2zm-4.5-4.3h1.6a1.6 1.6 0 0 0 1.1-.3 1.4 1.4 0 0 0 .3-1.1 1.6 1.6 0 0 0-.3-1.1 1.6 1.6 0 0 0-1.1-.3h-1.6zM43.9 7.1V8h-3.3a1.6 1.6 0 0 1-1.2-.4 1.2 1.2 0 0 1-.4-1v-5a1.4 1.4 0 0 1 .4-1.1 2.1 2.1 0 0 1 1.2-.4H44V1h-3.2a.6.6 0 0 0-.5.2.8.8 0 0 0-.2.5v1.7h3.4v1h-3.4v2a1.1 1.1 0 0 0 .2.6h3.6zM45.5 8.1v-8h2.9a3 3 0 0 1 2.4.9 5.2 5.2 0 0 1 .7 3.2 5.2 5.2 0 0 1-.7 3.2 3 3 0 0 1-2.4.9zm1.1-7v6h1.8a1.6 1.6 0 0 0 1.5-.7 5.7 5.7 0 0 0 .4-2.4 6.5 6.5 0 0 0-.4-2.4 1.8 1.8 0 0 0-1.5-.6h-1.8zM59.6 3.9a1.5 1.5 0 0 1 1.3.6 2.8 2.8 0 0 1 .3 1.5 2.2 2.2 0 0 1-.5 1.6 3.4 3.4 0 0 1-2 .5h-3v-8h2.6a3.7 3.7 0 0 1 2.1.4 1.8 1.8 0 0 1 .6 1.6 2.3 2.3 0 0 1-.3 1.3 1.4 1.4 0 0 1-1.1.5zm-2.8-.4h1.6a2.9 2.9 0 0 0 1.2-.2 1.3 1.3 0 0 0 .3-1c0-.5-.1-.9-.4-1a1.7 1.7 0 0 0-1.2-.3h-1.5zm0 3.7h1.7a1.7 1.7 0 0 0 1.2-.3c.3-.1.4-.5.4-1a1.7 1.7 0 0 0-.4-1.2 1.9 1.9 0 0 0-1.3-.3h-1.6zM65.6 5.3v2.8h-1.1V5.3L61.8.1h1.3l1.6 3.3a4.2 4.2 0 0 0 .3.9h.1a8.5 8.5 0 0 1 .3-.9L67 .1h1.2z"/></svg>';var Ye=function(t){function e(t,n,i){var r,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(c(this,e),r=s(this,a(e).call(this)),e.instance=o(o(r)),console.log("%c                         >>> BLACK <<<                         ","background: #000; color: #fff;"),r.mContainerElementId=t,r.mContainerElement=document.getElementById(r.mContainerElementId),!r.mContainerElement)throw new Error("Container element was not found");return r.mVideoDriverClass=i,r.mSystemClasses=u,r.mStageWidth=r.mContainerElement.clientWidth,r.mStageHeight=r.mContainerElement.clientHeight,r.mLastUpdateTime=0,r.mLastRenderTime=0,r.mSystems=[],r.mGameObject=null,r.mIsRunning=!1,r.mIsStarted=!1,r.mIsPanic=!1,r.mRAFHandle=-1,r.mViewport=null,r.mVideo=null,r.mPaused=!1,r.mUnpausing=!1,r.mPauseOnHide=!0,r.mPauseOnBlur=!0,r.mTagCache={},r.mGameClass=n,r.mGame=null,r.mStage=null,r.mWasStopped=!1,r.mSplashScreen=new ze,r.mFrameTimes=[],r.mUseHiDPR=Ut.isMobile,r.__bootViewport(),r.__update=r.__update.bind(o(o(r))),r}return u(e,M),f(e,[{key:"pause",value:function(){this.mPaused=!0,this.post("paused")}},{key:"resume",value:function(){!0===this.mPaused&&(this.mUnpausing=!0)}},{key:"__setUnpaused",value:function(){this.mPaused=!1,this.post("unpaused")}},{key:"__bootViewport",value:function(){this.mViewport=new H(this.mContainerElement)}},{key:"__bootSystems",value:function(){if(null!==this.mSystemClasses)for(var t=0;t<this.mSystemClasses.length;t++)this.__addSystem(new this.mSystemClasses[t])}},{key:"__bootStage",value:function(){var t=this;this.mStage=new Y,window.onblur=function(e){return t.__onVisibilityChange(e)},window.onfocus=function(e){return t.__onVisibilityChange(e)},window.onpagehide=function(e){return t.__onVisibilityChange(e)},window.onpageshow=function(e){return t.__onVisibilityChange(e)},document.hidden&&!0===this.mPauseOnHide&&this.pause()}},{key:"__onVisibilityChange",value:function(t){var e=t.type;"blur"===e&&!0===this.mPauseOnBlur?this.pause():"pagehide"===e&&!0===this.mPauseOnHide?this.pause():"focus"!==e&&"pageshow"!==e||!1===document.hidden&&this.resume()}},{key:"hasSystem",value:function(t){for(var e=0;e<this.mSystems.length;e++){if(this.mSystems[e]instanceof t)return!0}return!1}},{key:"__addSystem",value:function(t){return this.mSystems.push(t),t}},{key:"getSystem",value:function(t){for(var e=0;e<this.mSystems.length;e++){var n=this.mSystems[e];if(n instanceof t)return n}return null}},{key:"__bootVideo",value:function(){this.mVideo=new this.mVideoDriverClass(this.mContainerElement,this.mStageWidth,this.mStageHeight)}},{key:"start",value:function(){if(!0!==this.mWasStopped){if(e.instance=this,!0!==this.mIsStarted){this.__bootSystems(),this.__bootStage(),this.__bootVideo(),this.mStage.__refresh(),this.post(N.READY),this.mGameObject=new this.mGameClass,this.mStage.addChild(this.mGameObject);var t=this;this.mIsStarted=!0,this.mVideo.start(),this.mRAFHandle=window.requestAnimationFrame(function(e){t.mIsRunning=!0,!0===ze.enabled&&t.mSplashScreen.show(),t.mLastUpdateTime=e,t.mLastRenderTime=t.mLastUpdateTime,t.__update(e,!0)})}}else d.error("Black engine cannot be re-started.")}},{key:"stop",value:function(){this.mIsStarted=!1,this.mIsRunning=!1,window.cancelAnimationFrame(this.mRAFHandle),console.log("%c                        <<< BYE BYE >>>                        ","background: #000; color: #fff;")}},{key:"__update",value:function(t,n){if(!0===this.mPaused&&!0===this.mUnpausing&&(this.mUnpausing=!1,this.mLastUpdateTime=t,this.mLastRenderTime=this.mLastUpdateTime,this.__setUnpaused()),this.mRAFHandle=window.requestAnimationFrame(this.__update),!0!==this.mPaused){var i=Math.floor((t-this.mLastUpdateTime)/B.mDeltaTimeMs);!0===n&&(i=1),i>e.maxUpdatesPerFrame&&(this.post("looped",i),d.warn("Unable to catch up ".concat(i," update(s).")),i=e.maxUpdatesPerFrame),e.numUpdates=i;for(var r=0;r<i;r++)B.mActualTime+=B.delta,B.mTime=B.mActualTime,this.__internalUpdate(),this.__internalSystemPostUpdate();for(var s=t-B.mDeltaTimeMs;this.mLastUpdateTime<s;)this.mLastUpdateTime+=B.mDeltaTimeMs;B.mAlphaTime=0===i?(t-this.mLastUpdateTime)/B.mDeltaTimeMs:0,B.mTime=B.mActualTime+.001*(t-this.mLastUpdateTime)*B.mScale,this.__internalSystemRender(),this.mVideo.beginFrame(),this.mVideo.render(this.mStage),this.mVideo.endFrame(),e.__frameNum++,this.mIsPanic=!1,pt.__dirty=!1,this.mLastRenderTime=t}}},{key:"__internalUpdate",value:function(){this.mViewport.__update();for(var t=0;t<this.mSystems.length;t++)this.mSystems[t].onUpdate();this.mStage.__update()}},{key:"__internalSystemPostUpdate",value:function(){for(var t=0;t<this.mSystems.length;t++)this.mSystems[t].onPostUpdate()}},{key:"__internalSystemRender",value:function(){for(var t=0;t<this.mSystems.length;t++)this.mSystems[t].onRender()}},{key:"onTagUpdated",value:function(t,e,n){if(null!==e){var i=this.mTagCache[e];i.splice(i.indexOf(t),1),0===i.length&&delete this.mTagCache[e]}null!==n&&(!1===this.mTagCache.hasOwnProperty(n)&&(this.mTagCache[n]=[]),this.mTagCache[n].push(t))}},{key:"onChildrenAdded",value:function(t){var e=this;pt.__dirty=!0;for(var n=0;n<this.mSystems.length;n++)this.mSystems[n].onChildrenAdded(t);V.forEach(t,function(t){if(!0!==t.mAdded){e.onTagUpdated(t,null,t.mTag),t.mAdded=!0,t.onAdded();for(var n=0;n<t.mComponents.length;n++){var i=t.mComponents[n];!0!==i.mAdded&&(i.mAdded=!0,i.onAdded(t))}}})}},{key:"onChildrenChanged",value:function(t){pt.__dirty=!0;for(var e=0;e<this.mSystems.length;e++)this.mSystems[e].onChildrenChanged(t)}},{key:"onChildrenRemoved",value:function(t){var e=this;pt.__dirty=!0;for(var n=0;n<this.mSystems.length;n++)this.mSystems[n].onChildrenRemoved(t);V.forEach(t,function(t){if(!0===t.mAdded){e.onTagUpdated(t,null,t.mTag),t.mAdded=!1,t.onRemoved();for(var n=0;n<t.mComponents.length;n++){var i=t.mComponents[n];!1!==i.mAdded&&(i.mAdded=!1,i.onRemoved(t))}}})}},{key:"onComponentAdded",value:function(t,e){pt.__dirty=!0;for(var n=0;n<this.mSystems.length;n++)this.mSystems[n].onComponentAdded(t,e);!0!==e.mAdded&&(e.mAdded=!0,e.onAdded(t))}},{key:"onComponentRemoved",value:function(t,e){pt.__dirty=!0;for(var n=0;n<this.mSystems.length;n++)this.mSystems[n].onComponentRemoved(t,e);!1!==e.mAdded&&(e.mAdded=!1,e.onRemoved(t))}},{key:"ups",get:function(){return.001*B.mDeltaTimeMs},set:function(t){d.isNumber(t),d.assert(t>0),B.mDeltaTimeMs=1e3/t,B.mDeltaTime=.001*B.mDeltaTimeMs}},{key:"viewport",get:function(){return this.mViewport}},{key:"containerElement",get:function(){return this.mContainerElement}},{key:"pauseOnHide",get:function(){return this.mPauseOnHide},set:function(t){this.mPauseOnHide=t}},{key:"pauseOnBlur",get:function(){return this.mPauseOnBlur},set:function(t){this.mPauseOnBlur=t}},{key:"isPaused",get:function(){return this.mPaused}},{key:"stage",get:function(){return this.mStage}},{key:"containerElementId",get:function(){return this.mContainerElementId}},{key:"splashScreen",get:function(){return this.mSplashScreen}},{key:"useHiDPR",get:function(){return this.mUseHiDPR},set:function(t){this.mUseHiDPR=t}}],[{key:"magic",get:function(){return Math.random()}},{key:"driver",get:function(){return e.instance.mVideo}},{key:"stage",get:function(){return e.instance.mStage}},{key:"frameNum",get:function(){return e.__frameNum}}]),e}();Ye.__frameNum=0,Ye.instance=null,Ye.numUpdates=0,Ye.maxUpdatesPerFrame=60;n(117);var Ue=n(86),We=n.n(Ue);function qe(){var t=location.search.replace("?","");return We.a.parse(t)}var Qe=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"debug";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),void 0!==qe()[e]&&n.e(1).then(n.t.bind(null,127,7)).then(function(t){new(0,t.default)})};n(60);n(61);function Ke(t){return(Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Je(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ze(t,e){return!e||"object"!==Ke(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function $e(t){return($e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function tn(t,e){return(tn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var en=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ze(this,$e(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&tn(t,e)}(e,t),function(t,e,n){e&&Je(t.prototype,e),n&&Je(t,n)}(e,[{key:"load",value:function(){var t=this;return new Promise(function(e){t.mTotalPending=0,t.loadQueue(),t.once("complete",e)})}}]),e}(dt);en.default=new en;function nn(t){return(nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rn(t,e){return!e||"object"!==nn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function sn(t){return(sn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function on(t,e){return(on=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var an=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.x,r=void 0===i?0:i,s=n.y,o=void 0===s?0:s,a=n.alpha,u=void 0===a?.6:a,h=n.color,l=void 0===h?0:h;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=rn(this,sn(e).call(this))).beginPath();var c=Ye.stage,m=c.width,f=c.height;return t.rect(r,o,m,f),t.fillStyle(l,u),t.fill(),t.stroke(),t.alignAnchor(),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&on(t,e)}(e,Lt),e}(),un={DOM_DISPLAY_HIDDEN:-1,DOM_DISPLAY:1,CANVAS:2,DOM_INTERACTION:3};n(124);dt.default;function hn(t){return(hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ln(t,e){return!e||"object"!==hn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function cn(t){return(cn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mn(t,e){return(mn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var fn=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=ln(this,cn(e).call(this))).name=t,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&mn(t,e)}(e,Ot),e}();n(125);var dn=function(t){return t.constructor.name};function vn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var yn=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.availableScenes=[],this.activeScenes=[]}return function(t,e,n){e&&vn(t.prototype,e),n&&vn(t,n)}(t,[{key:"register",value:function(t,e){this.availableScenes.push({name:t,Class:e})}},{key:"load",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.sticky,i=void 0!==n&&n,r=e.transition,s=void 0===r||r,o=e.transitionTime,a=void 0===o?1:o,u=this.availableScenes.find(function(e){return e.name===t});if(!u)return t&&console.error("[".concat(dn(this),"] failed to load unregistered scene - ").concat(t)),!1;this.cleanup();var h=new(0,u.Class)(u.name);return h.sticky=i,this.activeScenes.push(h),s&&(h.alpha=0,h.add(new te({alpha:1},a))),Ye.stage.addChild(h),!0}},{key:"qsload",value:function(){var t=qe().scene;return this.load(t)}},{key:"cleanup",value:function(){this.activeScenes=this.activeScenes.filter(function(t){return!!t.sticky||(Ye.stage.removeChild(t),!1)})}},{key:"unload",value:function(t){var e=this.activeScenes.findIndex(function(e){return e.name===t});if(e>=0){var n=this.activeScenes[e];Ye.stage.removeChild(n),this.activeScenes.splice(e,1)}}},{key:"find",value:function(t){return this.activeScenes.find(function(e){return e.name===t})}}]),t}();yn.default=new yn;var pn=yn;function gn(t){return(gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function bn(t,e){return!e||"object"!==gn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function _n(t){return(_n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function wn(t,e){return(wn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Cn=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=bn(this,_n(e).call(this,t))).touchable=!0,n._drawing=!1,n._points=[],n.addCopyButton(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wn(t,e)}(e,fn),function(t,e,n){e&&kn(t.prototype,e),n&&kn(t,n)}(e,[{key:"onAdded",value:function(){var t=this;this.addBG(),this.addPointsCounter(),this.bg.on("pointerDown",function(){t._drawing=!0,t.resetPaths(),t.resetPoints(),t.currentPoint=t.bg.globalToLocal(Qt.pointerPosition),t._points.push(t.currentPoint)}),Qt.on("pointerMove",function(){if(t._drawing){t.prevPoint=t.currentPoint,t.currentPoint=t.bg.globalToLocal(Qt.pointerPosition),t._points.push(t.currentPoint),t.connectPoints(t.prevPoint,t.currentPoint);var e=t._points.length;t.setCounter(e)}}),Qt.on("pointerUp",function(){t._drawing&&(t._drawing=!1)})}},{key:"addBG",value:function(){var t=new an({color:16777215,alpha:1});t.touchable=!0,this.bg=t,t.alignAnchor(0,0),this.addChild(t)}},{key:"connectPoints",value:function(t,e){var n=t.x,i=t.y,r=e.x,s=e.y,o=new Lt;o.tag="path",o.beginPath(),o.lineStyle(4,0),o.moveTo(n,i),o.lineTo(r,s),o.stroke(),this.add(o)}},{key:"resetPaths",value:function(){(V.findWithTag("path")||[]).forEach(function(t){return t.removeFromParent()})}},{key:"resetPoints",value:function(){this._points=[]}},{key:"addPointsCounter",value:function(){var t=new Yt("0 Point");this.counter=t,t.alignAnchor(0,0),t.size=14,this.addChild(t)}},{key:"setCounter",value:function(t){this.counter.text="".concat(t," pointers")}},{key:"addCopyButton",value:function(){var t=this,e=document.createElement("button");document.body.appendChild(e),e.innerText="COPY POINTS",e.style.fontSize="24px",e.style.position="fixed",e.style.bottom="20px",e.style.right="20px",e.style.zIndex=un.DOM_INTERACTION,e.addEventListener("click",function(){var e=JSON.stringify(t._points,"",2);t.copy(e)})}},{key:"copy",value:function(t){var e=document.createElement("input");document.body.appendChild(e),window.input=e,e.value=t,e.select(),document.execCommand("copy"),document.body.removeChild(e)}}]),e}();function xn(t){return(xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sn(t,e){return!e||"object"!==xn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Tn(t){return(Tn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function An(t,e){return(An=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var En=pn.default;En.register("board",Cn);var Pn=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=Sn(this,Tn(e).call(this)),Ye.stage.scaleMode=G.LETTERBOX,Ye.stage.setSize(400,400),Ye.stage.orientation=z.UNIVERSAL,Ye.stage.orientationLock=!0,En.load("board"),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&An(t,e)}(e,V),e}();new Qe("debug"),ze.enabled=!1;var Rn=new Ye("game-container",Pn,Nt,[Qt,ee]);Rn.start(),Rn.pauseOnBlur=!1,Rn.pauseOnHide=!1}]);
//# sourceMappingURL=main.571efcf4.js.map